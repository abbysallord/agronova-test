module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},37602,e=>{"use strict";var t=e.i(60583),r=e.i(17921),a=e.i(6468),n=e.i(68304),i=e.i(60485),o=e.i(17584),s=e.i(51833),l=e.i(98098),d=e.i(21469),p=e.i(71215),u=e.i(7535),c=e.i(11066),h=e.i(51606),m=e.i(21765),x=e.i(7301),f=e.i(65199),v=e.i(93695);e.i(14914);var R=e.i(72312),g=e.i(45023),y=e.i(3325);async function w(e){try{let{crops:t,weatherData:r}=await e.json();if(!process.env.MISTRAL_API_KEY)return y.NextResponse.json({error:"MISTRAL_API_KEY not configured"},{status:500});let a=r?.daily,n=r?.current,i=`Current Conditions: Temp ${n?.temperature_2m}\xb0C, Humidity ${n?.relative_humidity_2m}%, Wind ${n?.wind_speed_10m}km/h.

Forecast:
`;a&&a.time&&a.time.forEach((e,t)=>{t<7&&(i+=`- ${e}: Max ${a.temperature_2m_max[t]}\xb0C, Min ${a.temperature_2m_min[t]}\xb0C, Rain ${a.precipitation_sum[t]}mm, UV Index ${a.uv_index_max?.[t]}.
`)});let o=new g.Mistral({apiKey:process.env.MISTRAL_API_KEY}),s=`
    Analyze the impact of the following weather forecast on these crops: ${t}.
    
    WEATHER DATA:
    ${i}

    Your goal is to provide a highly accurate and useful report for the farmer.
    1. Cite specific days or conditions from the forecast (e.g., "Heavy rain on Tuesday", "High heat on Day 3").
    2. Explain clearly WHY this weather matters for the specific crops listed.
    3. Give actionable advice.

    Return the response in this JSON format:
    {
        "impact_summary": "Detailed summary citing specific weather events and their effect.",
        "precautions": ["Actionable step 1", "Actionable step 2", "Actionable step 3"],
        "advisory": "Specific advice on irrigation and nutrients based on the rain/heat forecast.",
        "positive_outlook": "Any benefits of this weather."
    }
    Keep the tone professional yet simple for a farmer.
    `,l=await o.chat.complete({model:"pixtral-12b-2409",messages:[{role:"user",content:s}],responseFormat:{type:"json_object"}}),d=l.choices?.[0]?.message?.content;if(!d)throw Error("No content from AI");let p=d.replace(/```json/g,"").replace(/```/g,"").trim(),u=JSON.parse(p);return y.NextResponse.json(u)}catch(e){return console.error("Weather Analysis Error:",e),y.NextResponse.json({error:e.message},{status:500})}}e.s(["POST",()=>w],43634);var E=e.i(43634);let A=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/analyze-weather-impact/route",pathname:"/api/analyze-weather-impact",filename:"route",bundlePath:""},distDir:"build_v2",relativeProjectDir:"",resolvedPagePath:"[project]/agronova/app/api/analyze-weather-impact/route.ts",nextConfigOutput:"",userland:E}),{workAsyncStorage:_,workUnitAsyncStorage:C,serverHooks:b}=A;function T(){return(0,a.patchFetch)({workAsyncStorage:_,workUnitAsyncStorage:C})}async function N(e,t,a){A.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let g="/api/analyze-weather-impact/route";g=g.replace(/\/index$/,"")||"/";let y=await A.prepare(e,t,{srcPage:g,multiZoneDraftMode:!1});if(!y)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:w,params:E,nextConfig:_,parsedUrl:C,isDraftMode:b,prerenderManifest:T,routerServerContext:N,isOnDemandRevalidate:P,revalidateOnlyGenerated:S,resolvedPathname:j,clientReferenceManifest:O,serverActionsManifest:k}=y,I=(0,l.normalizeAppPath)(g),H=!!(T.dynamicRoutes[I]||T.routes[j]),M=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,C,!1):t.end("This page could not be found"),null);if(H&&!b){let e=!!T.routes[j],t=T.dynamicRoutes[I];if(t&&!1===t.fallback&&!e){if(_.experimental.adapterPath)return await M();throw new v.NoFallbackError}}let q=null;!H||A.isDev||b||(q="/index"===(q=j)?"/":q);let $=!0===A.isDev||!H,U=H&&!$;k&&O&&(0,o.setReferenceManifestsSingleton)({page:g,clientReferenceManifest:O,serverActionsManifest:k,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:k})});let D=e.method||"GET",K=(0,i.getTracer)(),F=K.getActiveScopeSpan(),L={params:E,prerenderManifest:T,renderOpts:{experimental:{authInterrupts:!!_.experimental.authInterrupts},cacheComponents:!!_.cacheComponents,supportsDynamicResponse:$,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:_.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>A.onRequestError(e,t,a,N)},sharedContext:{buildId:w}},z=new d.NodeNextRequest(e),W=new d.NodeNextResponse(t),B=p.NextRequestAdapter.fromNodeNextRequest(z,(0,p.signalFromNodeResponse)(t));try{let o=async e=>A.handle(B,L).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=K.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${D} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${D} ${g}`)}),s=!!(0,n.getRequestMeta)(e,"minimalMode"),l=async n=>{var i,l;let d=async({previousCacheEntry:r})=>{try{if(!s&&P&&S&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await o(n);e.fetchMetrics=L.renderOpts.fetchMetrics;let l=L.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let d=L.renderOpts.collectedTags;if(!H)return await (0,h.sendResponse)(z,W,i,L.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(i.headers);d&&(t[f.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==L.renderOpts.collectedRevalidate&&!(L.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&L.renderOpts.collectedRevalidate,a=void 0===L.renderOpts.collectedExpire||L.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:L.renderOpts.collectedExpire;return{value:{kind:R.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await A.onRequestError(e,t,{routerKind:"App Router",routePath:g,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:P})},N),t}},p=await A.handleResponse({req:e,nextConfig:_,cacheKey:q,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:T,isRoutePPREnabled:!1,isOnDemandRevalidate:P,revalidateOnlyGenerated:S,responseGenerator:d,waitUntil:a.waitUntil,isMinimalMode:s});if(!H)return null;if((null==p||null==(i=p.value)?void 0:i.kind)!==R.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==p||null==(l=p.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",P?"REVALIDATED":p.isMiss?"MISS":p.isStale?"STALE":"HIT"),b&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let u=(0,m.fromNodeOutgoingHttpHeaders)(p.value.headers);return s&&H||u.delete(f.NEXT_CACHE_TAGS_HEADER),!p.cacheControl||t.getHeader("Cache-Control")||u.get("Cache-Control")||u.set("Cache-Control",(0,x.getCacheControlHeader)(p.cacheControl)),await (0,h.sendResponse)(z,W,new Response(p.value.body,{headers:u,status:p.value.status||200})),null};F?await l(F):await K.withPropagatedContext(e.headers,()=>K.trace(u.BaseServerSpan.handleRequest,{spanName:`${D} ${g}`,kind:i.SpanKind.SERVER,attributes:{"http.method":D,"http.target":e.url}},l))}catch(t){if(t instanceof v.NoFallbackError||await A.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:P})}),H)throw t;return await (0,h.sendResponse)(z,W,new Response(null,{status:500})),null}}e.s(["handler",()=>N,"patchFetch",()=>T,"routeModule",()=>A,"serverHooks",()=>b,"workAsyncStorage",()=>_,"workUnitAsyncStorage",()=>C],37602)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2eff846a._.js.map