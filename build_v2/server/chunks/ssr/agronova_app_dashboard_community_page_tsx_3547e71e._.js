module.exports=[35284,a=>{"use strict";var b=a.i(98009),c=a.i(31834),d=a.i(77413),e=a.i(4228);let f=(0,e.default)("outline","heart","Heart",[["path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572",key:"svg-0"}]]),g=(0,e.default)("outline","message-circle","MessageCircle",[["path",{d:"M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1",key:"svg-0"}]]);var h=a.i(88845);let i=(0,e.default)("outline","message","Message",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]]),j=(0,e.default)("outline","send","Send",[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]]),k=(0,e.default)("outline","photo","Photo",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]);var l=a.i(61442),m=a.i(93957),n=a.i(69052);let o=(0,e.default)("outline","arrow-back-up","ArrowBackUp",[["path",{d:"M9 14l-4 -4l4 -4",key:"svg-0"}],["path",{d:"M5 10h11a4 4 0 1 1 0 8h-1",key:"svg-1"}]]);var p=a.i(53103),q=a.i(9613),r=a.i(26003),s=a.i(75440);function t(){let{user:a}=(0,d.useAuth)(),[e,f]=(0,c.useState)("feed"),[i,k]=(0,c.useState)(!1),[m,p]=(0,c.useState)([]),[q,t]=(0,c.useState)(!0),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)("all"),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(null),O=(0,c.useRef)(null),P=(0,c.useRef)(null);(0,c.useEffect)(()=>{k(!0)},[]),(0,c.useEffect)(()=>{if(i)return R(),S(),O.current=setInterval(()=>{a&&"messages"===e&&T()},3e3),()=>{O.current&&clearInterval(O.current)}},[a,e,i]),(0,c.useEffect)(()=>{"messages"===e&&i&&Q()},[E.length,G,e,i]);let Q=()=>P.current?.scrollIntoView({behavior:"smooth"}),R=async()=>{t(!0);try{let a=await fetch("/api/community/posts");p(await a.json())}catch(a){}finally{t(!1)}},S=async()=>{try{let a=await fetch("/api/users");B(await a.json())}catch(a){}},T=async()=>{if(a)try{let b=await fetch(`/api/messages?email=${a.email}`);F(await b.json())}catch(a){}},U=async b=>{a&&(B(c=>c.map(c=>{if(c.email===b){let b=c.followers.includes(a.email);return{...c,followers:b?c.followers.filter(b=>b!==a.email):[...c.followers,a.email]}}if(c.email===a.email){let a=c.following.includes(b);return{...c,following:a?c.following.filter(a=>a!==b):[...c.following,b]}}return c})),await fetch("/api/users/follow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:a.email,targetEmail:b})}))},V=async(b,c)=>{a&&(await fetch("/api/community/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:a.email,userName:a.name||"Farmer",userRole:"farmer",content:b,image:c})}),R())},W=async b=>{a&&(p(c=>c.map(c=>c.id===b?{...c,likes:c.likes.includes(a.email)?c.likes.filter(b=>b!==a.email):[...c.likes,a.email]}:c)),await fetch("/api/community/posts/like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:b,userEmail:a.email})}))},X=async b=>{a&&confirm("Delete this post?")&&(p(a=>a.filter(a=>a.id!==b)),await fetch(`/api/community/posts?id=${b}&userEmail=${a.email}`,{method:"DELETE"}))},Y=async(b,c)=>{if(!a)return;let d={id:Date.now().toString(),userEmail:a.email,userName:a.name||"User",text:c,date:new Date().toISOString()};p(a=>a.map(a=>a.id===b?{...a,comments:[...a.comments,d]}:a)),await fetch("/api/community/posts/comment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:b,userEmail:a.email,userName:a.name,text:c})})},Z=async(b,c)=>{a&&confirm("Delete this comment?")&&(p(a=>a.map(a=>a.id===b?{...a,comments:a.comments.filter(a=>a.id!==c)}:a)),await fetch(`/api/community/posts/comment?postId=${b}&commentId=${c}&userEmail=${a.email}`,{method:"DELETE"}))},$=async(b,c)=>{a&&(p(a=>a.map(a=>a.id===b?{...a,content:c}:a)),z(null),await fetch("/api/community/posts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:b,content:c,userEmail:a.email})}))},_=async()=>{if(!a||!G||!I.trim())return;let b={id:Date.now().toString(),sender:a.email,receiver:G,content:I,timestamp:new Date().toISOString(),replyToId:K?.id};F(a=>[...a,b]),J(""),L(null),Q(),await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:a.email,receiver:G,content:b.content,replyToId:b.replyToId})}),T()},aa=async(b,c)=>{a&&(F(a=>a.map(a=>a.id===b?{...a,reaction:a.reaction===c?void 0:c}:a)),await fetch(`/api/messages/${b}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:a.email,reaction:c})}))},ab=async b=>{a&&confirm("Delete this message?")&&(F(a=>a.filter(a=>a.id!==b)),await fetch(`/api/messages/${b}?userEmail=${a.email}`,{method:"DELETE"}))},ac=async(b,c)=>{a&&(F(a=>a.map(a=>a.id===b?{...a,content:c,edited:!0}:a)),N(null),await fetch(`/api/messages/${b}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:a.email,content:c})}))},ad=async()=>{confirm("Are you sure you want to delete this entire conversation?")&&F(b=>b.filter(b=>(b.sender!==a?.email||b.receiver!==G)&&(b.sender!==G||b.receiver!==a?.email)))},ae=A.filter(b=>b.email!==a?.email&&("following"===C?b.followers.includes(a?.email||""):"followers"!==C||b.following.includes(a?.email||"")));return i?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-900 text-neutral-900 dark:text-gray-100 font-sans transition-colors duration-300",children:[(0,b.jsxs)("header",{className:"sticky top-0 z-40 bg-white dark:bg-neutral-900 border-b border-gray-200 dark:border-neutral-800 shadow-sm transition-colors duration-300",children:[(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-600 flex items-center justify-center",children:(0,b.jsx)(h.IconUsers,{className:"text-white w-5 h-5"})}),(0,b.jsx)("span",{className:"font-bold text-xl tracking-tight text-neutral-900 dark:text-white",children:"AgroNova Community"})]}),(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsx)("nav",{className:"hidden md:flex space-x-1 bg-gray-100 dark:bg-neutral-800 p-1 rounded-lg",children:["feed","network","messages"].map(a=>(0,b.jsx)("button",{onClick:()=>f(a),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${e===a?"bg-white dark:bg-neutral-700 text-green-600 shadow-sm":"text-gray-500 hover:text-gray-900 dark:hover:text-gray-200"}`,children:(0,b.jsx)("span",{className:"capitalize",children:a})},a))})})]}),(0,b.jsx)("div",{className:"md:hidden flex justify-center pb-2 px-2",children:(0,b.jsx)("nav",{className:"flex space-x-1 bg-gray-100 dark:bg-neutral-800 p-1 rounded-lg w-full justify-between",children:["feed","network","messages"].map(a=>(0,b.jsx)("button",{onClick:()=>f(a),className:`flex-1 py-1.5 rounded-md text-xs font-medium transition-all ${e===a?"bg-white dark:bg-neutral-700 text-green-600 shadow-sm":"text-gray-500"}`,children:(0,b.jsx)("span",{className:"capitalize",children:a})},a))})})]}),(0,b.jsx)("main",{className:"max-w-7xl mx-auto p-4 md:p-6 lg:p-8",children:(0,b.jsx)(s.AnimatePresence,{mode:"wait",children:(0,b.jsxs)(r.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:["feed"===e&&(0,b.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,b.jsx)(u,{user:a,refresh:R,onPost:V}),(0,b.jsx)("div",{className:"space-y-4",children:q?(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-40 bg-gray-200 dark:bg-neutral-800 rounded-xl animate-pulse"},a))}):0===m.length?(0,b.jsx)("div",{className:"text-center py-20 text-gray-500",children:"No posts yet. Be the first to share!"}):m.map(c=>(0,b.jsx)(v,{post:c,user:a,onLike:()=>W(c.id),onDelete:()=>X(c.id),onComment:Y,onDeleteComment:Z,onEdit:$,isEditing:y===c.id,setEditingPostId:z},c.id))})]}),"network"===e&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-center gap-2 mb-6",children:["all","following","followers"].map(a=>(0,b.jsx)("button",{onClick:()=>D(a),className:`px-4 py-1.5 rounded-full text-sm font-semibold capitalize transition-colors ${C===a?"bg-green-600 text-white":"bg-white dark:bg-neutral-800 text-gray-500 border border-gray-200 dark:border-neutral-700"}`,children:a},a))}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[ae.map(c=>(0,b.jsx)(w,{user:c,currentUser:a,onFollow:()=>U(c.email),onChat:()=>{H(c.email),f("messages"),T()}},c.email)),0===ae.length&&(0,b.jsx)("div",{className:"col-span-full text-center py-20 text-gray-500",children:"No users found in this list."})]})]}),"messages"===e&&(0,b.jsxs)("div",{className:"h-[calc(100vh-140px)] bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-2xl overflow-hidden flex shadow-sm",children:[(0,b.jsxs)("div",{className:`w-full md:w-80 border-r border-gray-200 dark:border-neutral-800 flex flex-col bg-gray-50 dark:bg-neutral-900 ${G?"hidden md:flex":"flex"}`,children:[(0,b.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-neutral-800",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Messages"})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:A.filter(b=>b.email!==a?.email).map(a=>(0,b.jsxs)("button",{onClick:()=>H(a.email),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${G===a.email?"bg-green-100 dark:bg-neutral-800 text-green-900 dark:text-white":"hover:bg-gray-100 dark:hover:bg-neutral-800"}`,children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center text-sm font-bold text-gray-600 dark:text-gray-300",children:a.name[0]}),(0,b.jsxs)("div",{className:"flex-1 text-left",children:[(0,b.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-gray-500 capitalize",children:a.role})]})]},a.email))})]}),(0,b.jsx)("div",{className:`flex-1 flex flex-col bg-white dark:bg-neutral-900 ${!G?"hidden md:flex":"flex"}`,children:G?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"h-16 px-6 border-b border-gray-200 dark:border-neutral-800 flex items-center justify-between bg-white dark:bg-neutral-900",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>H(null),className:"md:hidden p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-full",children:(0,b.jsx)(o,{size:20})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:A.find(a=>a.email===G)?.name||G}),(0,b.jsx)("span",{className:"text-xs text-green-600 flex items-center gap-1",children:"Online"})]})]}),(0,b.jsx)("button",{onClick:ad,className:"p-2 text-gray-400 hover:text-red-500 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800",title:"Delete Chat",children:(0,b.jsx)(n.IconTrash,{size:20})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[E.filter(b=>b.sender===a?.email&&b.receiver===G||b.sender===G&&b.receiver===a?.email).map(c=>(0,b.jsx)(x,{message:c,isMe:c.sender===a?.email,replyContent:c.replyToId?E.find(a=>a.id===c.replyToId)?.content:void 0,onReply:()=>L(c),onReact:a=>aa(c.id,a),onDelete:()=>ab(c.id),onEdit:a=>ac(c.id,a),isEditing:M===c.id,setEditingMsgId:N},c.id)),(0,b.jsx)("div",{ref:P})]}),(0,b.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-neutral-800 bg-gray-50 dark:bg-neutral-900",children:[K&&(0,b.jsxs)("div",{className:"mb-2 p-2 bg-gray-200 dark:bg-neutral-800 border-l-2 border-green-500 rounded text-sm flex justify-between items-center text-gray-600 dark:text-gray-300",children:[(0,b.jsxs)("span",{className:"truncate",children:["Replying to: ",K.content.substring(0,50),"..."]}),(0,b.jsx)("button",{onClick:()=>L(null),children:(0,b.jsx)(l.IconX,{size:14})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{value:I,onChange:a=>J(a.target.value),onKeyDown:a=>"Enter"===a.key&&_(),placeholder:"Type your message...",className:"flex-1 bg-white dark:bg-neutral-800 border border-gray-300 dark:border-neutral-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 dark:text-white"}),(0,b.jsx)("button",{onClick:_,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-transform active:scale-95 disabled:opacity-50",disabled:!I.trim(),children:(0,b.jsx)(j,{size:20})})]})]})]}):(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-neutral-800 rounded-full flex items-center justify-center",children:(0,b.jsx)(g,{size:32})}),(0,b.jsx)("p",{children:"Select a user to chat"})]})})]})]},e)})})]}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-900"})}let u=({user:a,refresh:d,onPost:e})=>{let[f,g]=(0,c.useState)("");return(0,b.jsx)("div",{className:"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-4 shadow-sm",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-neutral-800 flex items-center justify-center text-green-700 dark:text-green-400 font-bold",children:a?.name?.[0]||"U"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("textarea",{value:f,onChange:a=>g(a.target.value),placeholder:"What's happening?",className:"w-full bg-transparent border-none focus:ring-0 resize-none outline-none text-base placeholder-gray-400 dark:placeholder-neutral-600 min-h-[80px] text-gray-900 dark:text-white"}),(0,b.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100 dark:border-neutral-800 mt-2",children:[(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-full text-green-600",children:(0,b.jsx)(k,{size:18})})}),(0,b.jsx)("button",{onClick:()=>{e(f),g("")},disabled:!f.trim(),className:"px-4 py-1.5 bg-green-600 text-white text-sm font-semibold rounded-full hover:bg-green-700 disabled:opacity-50",children:"Post"})]})]})]})})};function v({post:a,user:d,onLike:e,onDelete:g,onComment:h,onDeleteComment:k,onEdit:l,isEditing:o,setEditingPostId:p}){let[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(a.content);return(0,b.jsx)("div",{className:"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"p-4 md:p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center font-bold text-gray-600 dark:text-gray-300",children:a.userName?.[0]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:a.userName}),"expert"===a.userRole&&(0,b.jsx)("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 text-[10px] rounded uppercase font-bold",children:"Expert"})]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:new Date(a.date).toLocaleDateString()})]})]}),d?.email===a.userEmail&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{onClick:()=>{p(a.id),y(a.content)},className:"p-1.5 text-gray-400 hover:text-green-600 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800",children:(0,b.jsx)(m.IconEdit,{size:16})}),(0,b.jsx)("button",{onClick:g,className:"p-1.5 text-gray-400 hover:text-red-500 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800",children:(0,b.jsx)(n.IconTrash,{size:16})})]})]}),o?(0,b.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,b.jsx)("textarea",{value:x,onChange:a=>y(a.target.value),className:"w-full bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-lg p-3 text-gray-900 dark:text-white",rows:3}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>p(null),className:"px-3 py-1 text-sm text-gray-500 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>l(a.id,x),className:"px-3 py-1 text-sm bg-green-600 text-white rounded-lg",children:"Save"})]})]}):(0,b.jsx)("p",{className:"text-gray-800 dark:text-gray-200 mb-4 whitespace-pre-wrap leading-relaxed text-base",children:a.content}),a.image&&(0,b.jsx)("div",{className:"mb-4 rounded-lg overflow-hidden border border-gray-100 dark:border-neutral-800 relative h-64 w-full",children:(0,b.jsx)(q.default,{src:a.image,alt:"Post",fill:!0,className:"object-cover"})}),(0,b.jsxs)("div",{className:"flex items-center gap-6 pt-3 border-t border-gray-100 dark:border-neutral-800",children:[(0,b.jsxs)("button",{onClick:e,className:`flex items-center gap-2 text-sm font-medium transition-colors ${a.likes.includes(d?.email||"")?"text-pink-500":"text-gray-500 hover:text-pink-500"}`,children:[(0,b.jsx)(f,{size:18,className:a.likes.includes(d?.email||"")?"fill-current":""})," ",(0,b.jsx)("span",{children:a.likes.length})]}),(0,b.jsxs)("button",{onClick:()=>u(!t),className:`flex items-center gap-2 text-sm font-medium transition-colors ${t?"text-green-600":"text-gray-500 hover:text-gray-900 dark:hover:text-white"}`,children:[(0,b.jsx)(i,{size:18})," ",(0,b.jsx)("span",{children:a.comments?.length||0})]})]}),(0,b.jsx)(s.AnimatePresence,{children:t&&(0,b.jsx)(r.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:(0,b.jsxs)("div",{className:"mt-4 space-y-3 pt-3 bg-gray-50 dark:bg-neutral-900/50 -mx-6 px-6 pb-4 border-t border-gray-100 dark:border-neutral-800",children:[a.comments?.map(c=>(0,b.jsxs)("div",{className:"flex gap-2.5",children:[(0,b.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center text-[10px] font-bold text-gray-600 dark:text-gray-300 shrink-0",children:c.userName[0]}),(0,b.jsxs)("div",{className:"flex-1 bg-white dark:bg-neutral-800 rounded-xl rounded-tl-none px-3 py-2 shadow-sm border border-gray-100 dark:border-neutral-700",children:[(0,b.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,b.jsx)("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:c.userName}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[10px] text-gray-400",children:new Date(c.date).toLocaleDateString()}),d?.email===c.userEmail&&(0,b.jsx)("button",{onClick:()=>k(a.id,c.id),className:"text-[10px] text-red-500 hover:text-red-700",children:(0,b.jsx)(n.IconTrash,{size:12})})]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-0.5",children:c.text})]})]},c.id)),(0,b.jsxs)("div",{className:"flex gap-2 mt-3 items-center",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-neutral-800 flex items-center justify-center text-xs font-bold text-green-700 dark:text-green-400 shrink-0",children:d?.name?.[0]||"U"}),(0,b.jsxs)("div",{className:"flex-1 flex gap-2 relative",children:[(0,b.jsx)("input",{value:v,onChange:a=>w(a.target.value),onKeyDown:b=>{"Enter"===b.key&&v.trim()&&(h(a.id,v),w(""))},placeholder:"Write a comment...",className:"w-full bg-gray-100 dark:bg-neutral-800 border-none rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-green-500 text-gray-900 dark:text-white"}),(0,b.jsx)("button",{onClick:()=>{v.trim()&&(h(a.id,v),w(""))},disabled:!v.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 text-green-600 hover:text-green-700 disabled:opacity-50 p-1",children:(0,b.jsx)(j,{size:16})})]})]})]})})})]})})}function w({user:a,onFollow:c,currentUser:d,onChat:e}){let f=a.followers.includes(d?.email||"");return(0,b.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-6 flex flex-col items-center gap-4 hover:shadow-lg transition-shadow",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center text-xl font-bold text-gray-600 dark:text-gray-300",children:a.name[0]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-widest mt-1",children:a.role})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{className:"text-gray-900 dark:text-white",children:a.followers.length})," Followers"]}),(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{className:"text-gray-900 dark:text-white",children:a.following.length})," Following"]})]}),(0,b.jsxs)("div",{className:"flex gap-2 w-full mt-2",children:[(0,b.jsx)("button",{onClick:c,className:`flex-1 py-1.5 rounded-lg text-sm font-medium transition-all ${f?"bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white hover:bg-gray-200":"bg-green-600 text-white hover:bg-green-700"}`,children:f?"Following":"Follow"}),(0,b.jsx)("button",{onClick:e,className:"p-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-600 dark:text-gray-300 hover:text-green-600 transition-colors",children:(0,b.jsx)(i,{size:18})})]})]})}function x({message:a,isMe:d,onReply:e,replyContent:f,onReact:g,onDelete:h,onEdit:i,isEditing:j,setEditingMsgId:k}){let[q,r]=(0,c.useState)(a.content);return(0,b.jsxs)("div",{className:`flex flex-col ${d?"items-end":"items-start"} relative group`,children:[f&&(0,b.jsxs)("div",{className:`text-xs text-gray-400 mb-1 px-2 border-l-2 ${d?"border-green-500/50 text-right pr-2":"border-gray-300 pl-2"}`,children:["Replying to: ",f.substring(0,30),"..."]}),(0,b.jsxs)("div",{className:"max-w-[80%] relative group/bubble w-full md:w-auto",children:[!j&&(0,b.jsxs)("div",{className:`absolute -top-8 ${d?"right-0":"left-0"} hidden group-hover/bubble:flex items-center gap-1 bg-white dark:bg-neutral-800 shadow-md border border-gray-200 dark:border-neutral-700 rounded-full px-2 py-1 z-10`,children:[(0,b.jsx)("button",{onClick:e,className:"p-1 text-gray-500 hover:text-green-600",title:"Reply",children:(0,b.jsx)(o,{size:14})}),(0,b.jsx)("div",{className:"flex items-center border-l border-r border-gray-200 dark:border-neutral-700 mx-1 px-1 gap-1",children:["ðŸ‘","â¤ï¸","ðŸ˜‚"].map(a=>(0,b.jsx)("button",{onClick:()=>g(a),className:"hover:scale-125 transition-transform",children:a},a))}),d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{k(a.id),r(a.content)},className:"p-1 text-gray-500 hover:text-blue-500",title:"Edit",children:(0,b.jsx)(m.IconEdit,{size:14})}),(0,b.jsx)("button",{onClick:h,className:"p-1 text-gray-500 hover:text-red-500",title:"Delete",children:(0,b.jsx)(n.IconTrash,{size:14})})]})]}),j?(0,b.jsxs)("div",{className:"flex gap-2 items-center bg-white dark:bg-neutral-800 p-2 rounded-xl border border-gray-200 dark:border-neutral-700 shadow-sm",children:[(0,b.jsx)("input",{value:q,onChange:a=>r(a.target.value),className:"bg-transparent border-none focus:outline-none text-sm w-full min-w-[200px]",autoFocus:!0,onKeyDown:a=>{"Enter"===a.key&&i(q)}}),(0,b.jsx)("button",{onClick:()=>k(null),className:"text-gray-400 hover:text-red-500",children:(0,b.jsx)(l.IconX,{size:14})}),(0,b.jsx)("button",{onClick:()=>i(q),className:"text-green-600 hover:text-green-700",children:(0,b.jsx)(p.IconCheck,{size:14})})]}):(0,b.jsxs)("div",{className:`px-4 py-2 rounded-2xl text-sm leading-relaxed shadow-sm border relative ${d?"bg-green-600 text-white border-green-600 rounded-br-none":"bg-white dark:bg-neutral-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-neutral-700 rounded-bl-none"}`,children:[a.content,(0,b.jsxs)("div",{className:`text-[10px] mt-1 text-right flex items-center justify-end gap-1 ${d?"text-green-100":"text-gray-400"}`,children:[a.edited&&(0,b.jsx)("span",{children:"(edited)"}),new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),a.reaction&&(0,b.jsx)("div",{className:`absolute -bottom-2 ${d?"left-0":"right-0"} bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-full w-5 h-5 flex items-center justify-center text-xs shadow-sm`,children:a.reaction})]})]})]})}a.s(["default",()=>t],35284)}];

//# sourceMappingURL=agronova_app_dashboard_community_page_tsx_3547e71e._.js.map