{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/app/api/news/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\n\r\nexport async function GET() {\r\n    try {\r\n        const response = await fetch('https://news.google.com/rss/search?q=agriculture+india&hl=en-IN&gl=IN&ceid=IN:en', { next: { revalidate: 3600 } });\r\n        const xml = await response.text();\r\n        \r\n        // Simple manual parsing to avoid external dependencies\r\n        const items = [];\r\n        const itemRegex = /<item>([\\s\\S]*?)<\\/item>/g;\r\n        let match;\r\n        \r\n        while ((match = itemRegex.exec(xml)) !== null) {\r\n            const itemContent = match[1];\r\n            const titleMatch = itemContent.match(/<title>(.*?)<\\/title>/);\r\n            const linkMatch = itemContent.match(/<link>(.*?)<\\/link>/);\r\n            const pubDateMatch = itemContent.match(/<pubDate>(.*?)<\\/pubDate>/);\r\n            const sourceMatch = itemContent.match(/<source.*?>([^<]+)<\\/source>/);\r\n            \r\n            // Clean title (Google News often puts \"- Source\" at the end)\r\n            let title = titleMatch ? titleMatch[1].replace(\"<![CDATA[\", \"\").replace(\"]]>\", \"\") : \"\";\r\n            const link = linkMatch ? linkMatch[1] : \"#\";\r\n            const pubDate = pubDateMatch ? new Date(pubDateMatch[1]).toLocaleDateString('en-IN', { day: 'numeric', month: 'short' }) : \"\";\r\n            const source = sourceMatch ? sourceMatch[1] : \"News\";\r\n\r\n            if (title) {\r\n                 // Try to split source from title if duplicate\r\n                 if (title.includes(\" - \")) {\r\n                     const parts = title.split(\" - \");\r\n                     // If the last part is the source, remove it to be clean\r\n                     if (parts.length > 1) {\r\n                         // title = parts.slice(0, -1).join(\" - \"); // optional: remove source from title\r\n                     }\r\n                 }\r\n                 \r\n                items.push({\r\n                    title,\r\n                    link,\r\n                    pubDate,\r\n                    source\r\n                });\r\n            }\r\n            if (items.length >= 6) break; // Limit to 6 items\r\n        }\r\n        \r\n        return NextResponse.json(items);\r\n    } catch (error) {\r\n        console.error(\"News fetch error:\", error);\r\n        // Fallback data\r\n        return NextResponse.json([\r\n            { title: \"Monsoon tracking: India expects normal rainfall\", source: \"IMD\", link: \"#\", pubDate: \"Today\" },\r\n            { title: \"New MSP rates announced for Kharif crops\", source: \"Govt of India\", link: \"#\", pubDate: \"Yesterday\" }\r\n        ]);\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,oFAAoF;YAAE,MAAM;gBAAE,YAAY;YAAK;QAAE;QAC9I,MAAM,MAAM,MAAM,SAAS,IAAI;QAE/B,uDAAuD;QACvD,MAAM,QAAQ,EAAE;QAChB,MAAM,YAAY;QAClB,IAAI;QAEJ,MAAO,CAAC,QAAQ,UAAU,IAAI,CAAC,IAAI,MAAM,KAAM;YAC3C,MAAM,cAAc,KAAK,CAAC,EAAE;YAC5B,MAAM,aAAa,YAAY,KAAK,CAAC;YACrC,MAAM,YAAY,YAAY,KAAK,CAAC;YACpC,MAAM,eAAe,YAAY,KAAK,CAAC;YACvC,MAAM,cAAc,YAAY,KAAK,CAAC;YAEtC,6DAA6D;YAC7D,IAAI,QAAQ,aAAa,UAAU,CAAC,EAAE,CAAC,OAAO,CAAC,aAAa,IAAI,OAAO,CAAC,OAAO,MAAM;YACrF,MAAM,OAAO,YAAY,SAAS,CAAC,EAAE,GAAG;YACxC,MAAM,UAAU,eAAe,IAAI,KAAK,YAAY,CAAC,EAAE,EAAE,kBAAkB,CAAC,SAAS;gBAAE,KAAK;gBAAW,OAAO;YAAQ,KAAK;YAC3H,MAAM,SAAS,cAAc,WAAW,CAAC,EAAE,GAAG;YAE9C,IAAI,OAAO;gBACN,8CAA8C;gBAC9C,IAAI,MAAM,QAAQ,CAAC,QAAQ;oBACvB,MAAM,QAAQ,MAAM,KAAK,CAAC;oBAC1B,wDAAwD;oBACxD,IAAI,MAAM,MAAM,GAAG,GAAG;oBAClB,gFAAgF;oBACpF;gBACJ;gBAED,MAAM,IAAI,CAAC;oBACP;oBACA;oBACA;oBACA;gBACJ;YACJ;YACA,IAAI,MAAM,MAAM,IAAI,GAAG,OAAO,mBAAmB;QACrD;QAEA,OAAO,4JAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,qBAAqB;QACnC,gBAAgB;QAChB,OAAO,4JAAY,CAAC,IAAI,CAAC;YACrB;gBAAE,OAAO;gBAAmD,QAAQ;gBAAO,MAAM;gBAAK,SAAS;YAAQ;YACvG;gBAAE,OAAO;gBAA4C,QAAQ;gBAAiB,MAAM;gBAAK,SAAS;YAAY;SACjH;IACL;AACJ"}}]
}