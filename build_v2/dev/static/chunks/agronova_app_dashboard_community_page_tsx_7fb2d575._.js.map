{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/app/dashboard/community/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n// Removed useTheme import as it's handled by ThemeToggle internally or not needed if only for toggle\r\nimport { ThemeToggle } from \"@/components/ui/theme-toggle\";\r\nimport { \r\n    IconHeart, IconMessageCircle, IconUsers, IconMessage, IconSend, \r\n    IconPhoto, IconX, IconEdit, IconTrash, IconDots, IconMoodSmile, IconArrowBackUp, IconSearch,\r\n    IconThumbUp, IconMoodHappy, IconMoodSad, IconMoodAngry, IconCheck, IconMoon, IconSun\r\n} from \"@tabler/icons-react\";\r\nimport Image from \"next/image\";\r\nimport { motion, AnimatePresence } from \"motion/react\";\r\n\r\n// --- Types ---\r\ninterface Comment { id: string; userEmail: string; userName: string; text: string; date: string; }\r\ninterface Post { \r\n    id: string; \r\n    userEmail: string; \r\n    userName: string; \r\n    userRole: string; \r\n    content: string; \r\n    image?: string; \r\n    likes: string[]; \r\n    comments: Comment[]; \r\n    date: string; \r\n}\r\ninterface Message { \r\n    id: string; \r\n    sender: string; \r\n    receiver: string; \r\n    content: string; \r\n    timestamp: string; \r\n    read?: boolean;\r\n    reaction?: string;\r\n    replyToId?: string;\r\n    edited?: boolean;\r\n}\r\ninterface SocialUser { name: string; email: string; role: string; followers: string[]; following: string[]; }\r\n\r\nexport default function CommunityPage() {\r\n  const { user } = useAuth();\r\n  const [activeTab, setActiveTab] = useState<\"feed\" | \"network\" | \"messages\">(\"feed\");\r\n  const [isClient, setIsClient] = useState(false);\r\n\r\n  // Feed State\r\n  const [posts, setPosts] = useState<Post[]>([]);\r\n  const [loadingPosts, setLoadingPosts] = useState(true);\r\n  const [editingPostId, setEditingPostId] = useState<string | null>(null);\r\n\r\n  // Network State\r\n  const [users, setUsers] = useState<SocialUser[]>([]);\r\n  const [networkFilter, setNetworkFilter] = useState<\"all\" | \"following\" | \"followers\">(\"all\");\r\n\r\n  // Messages State\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [selectedChatUser, setSelectedChatUser] = useState<string | null>(null);\r\n  const [msgInput, setMsgInput] = useState(\"\");\r\n  const [replyTo, setReplyTo] = useState<Message | null>(null);\r\n  const [editingMsgId, setEditingMsgId] = useState<string | null>(null); // New: Edit Message State\r\n\r\n  const pollingRef = useRef<NodeJS.Timeout | null>(null);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => { setIsClient(true); }, []);\r\n\r\n  useEffect(() => {\r\n    if(!isClient) return;\r\n    fetchPosts();\r\n    fetchUsers();\r\n    pollingRef.current = setInterval(() => {\r\n        if (user && activeTab === \"messages\") fetchMessages();\r\n    }, 3000); \r\n    return () => { if(pollingRef.current) clearInterval(pollingRef.current); };\r\n  }, [user, activeTab, isClient]);\r\n\r\n  useEffect(() => {\r\n      if(activeTab === 'messages' && isClient) scrollToBottom();\r\n  }, [messages.length, selectedChatUser, activeTab, isClient]);\r\n\r\n  const scrollToBottom = () => messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n\r\n  // --- API Calls ---\r\n  const fetchPosts = async () => {\r\n    setLoadingPosts(true);\r\n    try { const res = await fetch(\"/api/community/posts\"); setPosts(await res.json()); } \r\n    catch(e) {} finally { setLoadingPosts(false); }\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    try { const res = await fetch(\"/api/users\"); setUsers(await res.json()); } catch(e) {}\r\n  };\r\n\r\n  const fetchMessages = async () => {\r\n      if(!user) return;\r\n      try { const res = await fetch(`/api/messages?email=${user.email}`); setMessages(await res.json()); } catch(e) {}\r\n  };\r\n\r\n  // --- Actions ---\r\n  const handleFollow = async (targetEmail: string) => {\r\n      if(!user) return;\r\n      setUsers(prev => prev.map(u => {\r\n          if(u.email === targetEmail) {\r\n               const isFollowing = u.followers.includes(user.email);\r\n               return { ...u, followers: isFollowing ? u.followers.filter(e => e !== user.email) : [...u.followers, user.email] };\r\n          }\r\n          if(u.email === user.email) {\r\n              const followingTarget = u.following.includes(targetEmail);\r\n              return { ...u, following: followingTarget ? u.following.filter(e => e !== targetEmail) : [...u.following, targetEmail] };\r\n          }\r\n          return u;\r\n      }));\r\n      await fetch(\"/api/users/follow\", { \r\n          method: \"POST\", headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ userEmail: user.email, targetEmail })\r\n      });\r\n  };\r\n\r\n  const handleCreatePost = async (content: string, image?: string) => {\r\n      if(!user) return;\r\n      await fetch(\"/api/community/posts\", {\r\n          method: \"POST\", headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ userEmail: user.email, userName: user.name || \"Farmer\", userRole: \"farmer\", content, image })\r\n      });\r\n      fetchPosts();\r\n  };\r\n\r\n  const handleLike = async (postId: string) => {\r\n      if(!user) return;\r\n      setPosts(prev => prev.map(p => p.id === postId ? {\r\n          ...p, likes: p.likes.includes(user.email) ? p.likes.filter(e => e !== user.email) : [...p.likes, user.email]\r\n      } : p));\r\n      await fetch(\"/api/community/posts/like\", {\r\n          method: \"POST\", headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ postId, userEmail: user.email })\r\n      });\r\n  };\r\n\r\n  const handleDeletePost = async (postId: string) => {\r\n      if(!user || !confirm(\"Delete this post?\")) return;\r\n      setPosts(prev => prev.filter(p => p.id !== postId));\r\n      await fetch(`/api/community/posts?id=${postId}&userEmail=${user.email}`, { method: \"DELETE\" }); \r\n  };\r\n\r\n  const handleComment = async (postId: string, text: string) => {\r\n      if(!user) return;\r\n      const newComment: Comment = { id: Date.now().toString(), userEmail: user.email, userName: user.name || \"User\", text, date: new Date().toISOString() };\r\n      setPosts(prev => prev.map(p => p.id === postId ? { ...p, comments: [...p.comments, newComment] } : p));\r\n      await fetch(\"/api/community/posts/comment\", {\r\n          method: \"POST\", headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ postId, userEmail: user.email, userName: user.name, text })\r\n      });\r\n  };\r\n\r\n  const handleDeleteComment = async (postId: string, commentId: string) => {\r\n      if(!user || !confirm(\"Delete this comment?\")) return;\r\n      setPosts(prev => prev.map(p => p.id === postId ? { ...p, comments: p.comments.filter(c => c.id !== commentId) } : p));\r\n      await fetch(`/api/community/posts/comment?postId=${postId}&commentId=${commentId}&userEmail=${user.email}`, { method: \"DELETE\" });\r\n  };\r\n\r\n  const handleEditPost = async (postId: string, content: string) => {\r\n      if(!user) return;\r\n      setPosts(prev => prev.map(p => p.id === postId ? { ...p, content } : p));\r\n      setEditingPostId(null);\r\n      await fetch(`/api/community/posts`, {\r\n        method: \"PUT\", headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ postId, content, userEmail: user.email })\r\n      });\r\n  };\r\n\r\n  const handleJoinChat = (targetUserEmail: string) => {\r\n      setSelectedChatUser(targetUserEmail);\r\n      setActiveTab(\"messages\");\r\n      fetchMessages();\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n      if(!user || !selectedChatUser || !msgInput.trim()) return;\r\n      const optimisticMsg: Message = {\r\n          id: Date.now().toString(), sender: user.email, receiver: selectedChatUser, content: msgInput, timestamp: new Date().toISOString(), replyToId: replyTo?.id\r\n      };\r\n      setMessages(prev => [...prev, optimisticMsg]);\r\n      setMsgInput(\"\");\r\n      setReplyTo(null);\r\n      scrollToBottom();\r\n      await fetch(\"/api/messages\", {\r\n          method: \"POST\", headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ sender: user.email, receiver: selectedChatUser, content: optimisticMsg.content, replyToId: optimisticMsg.replyToId })\r\n      });\r\n      fetchMessages(); // Sync\r\n  };\r\n\r\n  const handleMessageReaction = async (msgId: string, reaction: string) => {\r\n      if(!user) return;\r\n      setMessages(prev => prev.map(m => m.id === msgId ? { ...m, reaction: m.reaction === reaction ? undefined : reaction } : m));\r\n      await fetch(`/api/messages/${msgId}`, {\r\n          method: \"PATCH\", headers: {\"Content-Type\": \"application/json\"},\r\n          body: JSON.stringify({ userEmail: user.email, reaction })\r\n      });\r\n  };\r\n\r\n  const handleDeleteMessage = async (msgId: string) => {\r\n      if(!user || !confirm(\"Delete this message?\")) return;\r\n      setMessages(prev => prev.filter(m => m.id !== msgId));\r\n      await fetch(`/api/messages/${msgId}?userEmail=${user.email}`, { method: \"DELETE\" });\r\n  };\r\n  \r\n  const handleEditMessage = async (msgId: string, content: string) => {\r\n      if(!user) return;\r\n      setMessages(prev => prev.map(m => m.id === msgId ? { ...m, content, edited: true } : m));\r\n      setEditingMsgId(null);\r\n      await fetch(`/api/messages/${msgId}`, {\r\n          method: \"PATCH\", headers: {\"Content-Type\": \"application/json\"},\r\n          body: JSON.stringify({ userEmail: user.email, content })\r\n      });\r\n  };\r\n\r\n  const handleDeleteChat = async () => {\r\n      if(!confirm(\"Are you sure you want to delete this entire conversation?\")) return;\r\n      setMessages(prev => prev.filter(m => !( (m.sender === user?.email && m.receiver === selectedChatUser) || (m.sender === selectedChatUser && m.receiver === user?.email) )));\r\n  };\r\n\r\n  // --- Network Filter Logic ---\r\n  const filteredUsers = users.filter(u => {\r\n      if(u.email === user?.email) return false;\r\n      if(networkFilter === \"following\") return u.followers.includes(user?.email || \"\");\r\n      if(networkFilter === \"followers\") return u.following.includes(user?.email || \"\");\r\n      return true;\r\n  });\r\n\r\n  if (!isClient) return <div className=\"min-h-screen bg-gray-50 dark:bg-neutral-900\" />;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-neutral-900 text-neutral-900 dark:text-gray-100 font-sans transition-colors duration-300\">\r\n        <header className=\"sticky top-0 z-40 bg-white dark:bg-neutral-900 border-b border-gray-200 dark:border-neutral-800 shadow-sm transition-colors duration-300\">\r\n            <div className=\"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-8 h-8 rounded-lg bg-green-600 flex items-center justify-center\">\r\n                        <IconUsers className=\"text-white w-5 h-5\" />\r\n                    </div>\r\n                    <span className=\"font-bold text-xl tracking-tight text-neutral-900 dark:text-white\">AgroNova Community</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                    <nav className=\"hidden md:flex space-x-1 bg-gray-100 dark:bg-neutral-800 p-1 rounded-lg\">\r\n                        {([\"feed\", \"network\", \"messages\"] as const).map(tab => (\r\n                            <button key={tab} \r\n                                onClick={() => setActiveTab(tab)}\r\n                                className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${activeTab === tab ? \"bg-white dark:bg-neutral-700 text-green-600 shadow-sm\" : \"text-gray-500 hover:text-gray-900 dark:hover:text-gray-200\"}`}\r\n                            >\r\n                                <span className=\"capitalize\">{tab}</span>\r\n                            </button>\r\n                        ))}\r\n                    </nav>\r\n                </div>\r\n            </div>\r\n            {/* Mobile Nav */}\r\n             <div className=\"md:hidden flex justify-center pb-2 px-2\">\r\n                 <nav className=\"flex space-x-1 bg-gray-100 dark:bg-neutral-800 p-1 rounded-lg w-full justify-between\">\r\n                    {([\"feed\", \"network\", \"messages\"] as const).map(tab => (\r\n                        <button key={tab} onClick={() => setActiveTab(tab)} className={`flex-1 py-1.5 rounded-md text-xs font-medium transition-all ${activeTab === tab ? \"bg-white dark:bg-neutral-700 text-green-600 shadow-sm\" : \"text-gray-500\"}`}>\r\n                            <span className=\"capitalize\">{tab}</span>\r\n                        </button>\r\n                    ))}\r\n                </nav>\r\n            </div>\r\n        </header>\r\n\r\n        <main className=\"max-w-7xl mx-auto p-4 md:p-6 lg:p-8\">\r\n            <AnimatePresence mode=\"wait\">\r\n                <motion.div \r\n                    key={activeTab}\r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: -10 }}\r\n                    transition={{ duration: 0.2 }}\r\n                >\r\n                    {activeTab === \"feed\" && (\r\n                        <div className=\"max-w-2xl mx-auto space-y-6\">\r\n                            <CreatePostWidget user={user} refresh={fetchPosts} onPost={handleCreatePost} />\r\n                            <div className=\"space-y-4\">\r\n                                {loadingPosts ? (\r\n                                    <div className=\"space-y-4\">\r\n                                        {[1,2,3].map(i => <div key={i} className=\"h-40 bg-gray-200 dark:bg-neutral-800 rounded-xl animate-pulse\"/>)}\r\n                                    </div>\r\n                                ) : posts.length === 0 ? (\r\n                                    <div className=\"text-center py-20 text-gray-500\">No posts yet. Be the first to share!</div>\r\n                                ) : (\r\n                                    posts.map(post => (\r\n                                        <PostCard \r\n                                            key={post.id} post={post} user={user} \r\n                                            onLike={() => handleLike(post.id)}\r\n                                            onDelete={() => handleDeletePost(post.id)}\r\n                                            onComment={handleComment}\r\n                                            onDeleteComment={handleDeleteComment}\r\n                                            onEdit={handleEditPost}\r\n                                            isEditing={editingPostId === post.id}\r\n                                            setEditingPostId={setEditingPostId}\r\n                                        />\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {activeTab === \"network\" && (\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"flex justify-center gap-2 mb-6\">\r\n                                {([\"all\", \"following\", \"followers\"] as const).map(f => (\r\n                                    <button \r\n                                        key={f} onClick={() => setNetworkFilter(f)}\r\n                                        className={`px-4 py-1.5 rounded-full text-sm font-semibold capitalize transition-colors ${networkFilter === f ? \"bg-green-600 text-white\" : \"bg-white dark:bg-neutral-800 text-gray-500 border border-gray-200 dark:border-neutral-700\"}`}\r\n                                    >\r\n                                        {f}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                                {filteredUsers.map(u => (\r\n                                    <UserCard key={u.email} user={u} currentUser={user} onFollow={() => handleFollow(u.email)} onChat={() => handleJoinChat(u.email)} />\r\n                                ))}\r\n                                {filteredUsers.length === 0 && (\r\n                                    <div className=\"col-span-full text-center py-20 text-gray-500\">No users found in this list.</div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {activeTab === \"messages\" && (\r\n                        <div className=\"h-[calc(100vh-140px)] bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-2xl overflow-hidden flex shadow-sm\">\r\n                            <div className={`w-full md:w-80 border-r border-gray-200 dark:border-neutral-800 flex flex-col bg-gray-50 dark:bg-neutral-900 ${selectedChatUser ? \"hidden md:flex\" : \"flex\"}`}>\r\n                                <div className=\"p-4 border-b border-gray-200 dark:border-neutral-800\">\r\n                                    <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Messages</h2>\r\n                                </div>\r\n                                <div className=\"flex-1 overflow-y-auto p-2 space-y-1\">\r\n                                    {users.filter(u => u.email !== user?.email).map(u => (\r\n                                        <button key={u.email} onClick={() => setSelectedChatUser(u.email)}\r\n                                            className={`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${selectedChatUser === u.email ? \"bg-green-100 dark:bg-neutral-800 text-green-900 dark:text-white\" : \"hover:bg-gray-100 dark:hover:bg-neutral-800\"}`}\r\n                                        >\r\n                                            <div className=\"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center text-sm font-bold text-gray-600 dark:text-gray-300\">\r\n                                                {u.name[0]}\r\n                                            </div>\r\n                                            <div className=\"flex-1 text-left\">\r\n                                                <div className=\"font-medium text-gray-900 dark:text-white\">{u.name}</div>\r\n                                                <div className=\"text-xs text-gray-500 capitalize\">{u.role}</div>\r\n                                            </div>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div className={`flex-1 flex flex-col bg-white dark:bg-neutral-900 ${!selectedChatUser ? \"hidden md:flex\" : \"flex\"}`}>\r\n                                {selectedChatUser ? (\r\n                                    <>\r\n                                        <div className=\"h-16 px-6 border-b border-gray-200 dark:border-neutral-800 flex items-center justify-between bg-white dark:bg-neutral-900\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <button onClick={() => setSelectedChatUser(null)} className=\"md:hidden p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-full\"><IconArrowBackUp size={20}/></button>\r\n                                                <div className=\"flex flex-col\">\r\n                                                    <span className=\"font-semibold text-gray-900 dark:text-white\">{users.find(u => u.email === selectedChatUser)?.name || selectedChatUser}</span>\r\n                                                    <span className=\"text-xs text-green-600 flex items-center gap-1\">Online</span>\r\n                                                </div>\r\n                                            </div>\r\n                                            <button onClick={handleDeleteChat} className=\"p-2 text-gray-400 hover:text-red-500 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800\" title=\"Delete Chat\">\r\n                                                <IconTrash size={20} />\r\n                                            </button>\r\n                                        </div>\r\n                                        <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\r\n                                            {messages.filter(m => (m.sender === user?.email && m.receiver === selectedChatUser) || (m.sender === selectedChatUser && m.receiver === user?.email))\r\n                                                .map(msg => (\r\n                                                    <MessageBubble \r\n                                                        key={msg.id} message={msg} isMe={msg.sender === user?.email} \r\n                                                        replyContent={msg.replyToId ? messages.find(m => m.id === msg.replyToId)?.content : undefined}\r\n                                                        onReply={() => setReplyTo(msg)}\r\n                                                        onReact={(r: string) => handleMessageReaction(msg.id, r)}\r\n                                                        onDelete={() => handleDeleteMessage(msg.id)}\r\n                                                        onEdit={(content: string) => handleEditMessage(msg.id, content)}\r\n                                                        isEditing={editingMsgId === msg.id}\r\n                                                        setEditingMsgId={setEditingMsgId}\r\n                                                    />\r\n                                                ))}\r\n                                            <div ref={messagesEndRef} />\r\n                                        </div>\r\n                                        <div className=\"p-4 border-t border-gray-200 dark:border-neutral-800 bg-gray-50 dark:bg-neutral-900\">\r\n                                            {replyTo && (\r\n                                                <div className=\"mb-2 p-2 bg-gray-200 dark:bg-neutral-800 border-l-2 border-green-500 rounded text-sm flex justify-between items-center text-gray-600 dark:text-gray-300\">\r\n                                                    <span className=\"truncate\">Replying to: {replyTo.content.substring(0, 50)}...</span>\r\n                                                    <button onClick={() => setReplyTo(null)}><IconX size={14}/></button>\r\n                                                </div>\r\n                                            )}\r\n                                            <div className=\"flex gap-2\">\r\n                                                <input \r\n                                                    value={msgInput} onChange={e => setMsgInput(e.target.value)} \r\n                                                    onKeyDown={e => e.key === \"Enter\" && handleSendMessage()}\r\n                                                    placeholder=\"Type your message...\" \r\n                                                    className=\"flex-1 bg-white dark:bg-neutral-800 border border-gray-300 dark:border-neutral-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 dark:text-white\"\r\n                                                />\r\n                                                <button onClick={handleSendMessage} className=\"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-transform active:scale-95 disabled:opacity-50\" disabled={!msgInput.trim()}>\r\n                                                    <IconSend size={20} />\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </>\r\n                                ) : (\r\n                                    <div className=\"flex-1 flex flex-col items-center justify-center text-gray-400 gap-4\">\r\n                                        <div className=\"w-16 h-16 bg-gray-100 dark:bg-neutral-800 rounded-full flex items-center justify-center\"><IconMessageCircle size={32}/></div>\r\n                                        <p>Select a user to chat</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </motion.div>\r\n            </AnimatePresence>\r\n        </main>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- Components ---\r\nconst CreatePostWidget = ({ user, refresh, onPost }: any) => {\r\n    const [content, setContent] = useState(\"\");\r\n    return (\r\n        <div className=\"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-4 shadow-sm\">\r\n            <div className=\"flex gap-4\">\r\n                 <div className=\"w-10 h-10 rounded-full bg-green-100 dark:bg-neutral-800 flex items-center justify-center text-green-700 dark:text-green-400 font-bold\">\r\n                     {user?.name?.[0] || \"U\"}\r\n                 </div>\r\n                 <div className=\"flex-1\">\r\n                     <textarea \r\n                         value={content} onChange={e => setContent(e.target.value)} \r\n                         placeholder=\"What's happening?\" \r\n                         className=\"w-full bg-transparent border-none focus:ring-0 resize-none outline-none text-base placeholder-gray-400 dark:placeholder-neutral-600 min-h-[80px] text-gray-900 dark:text-white\" \r\n                     />\r\n                     <div className=\"flex justify-between items-center pt-2 border-t border-gray-100 dark:border-neutral-800 mt-2\">\r\n                         <div className=\"flex gap-2\">\r\n                             <button className=\"p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-full text-green-600\"><IconPhoto size={18}/></button>\r\n                         </div>\r\n                         <button onClick={() => { onPost(content); setContent(\"\"); }} disabled={!content.trim()} className=\"px-4 py-1.5 bg-green-600 text-white text-sm font-semibold rounded-full hover:bg-green-700 disabled:opacity-50\">Post</button>\r\n                     </div>\r\n                 </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nfunction PostCard({ post, user, onLike, onDelete, onComment, onDeleteComment, onEdit, isEditing, setEditingPostId }: any) {\r\n    const [showComments, setShowComments] = useState(false);\r\n    const [commentText, setCommentText] = useState(\"\");\r\n    const [editContent, setEditContentState] = useState(post.content);\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow\">\r\n            <div className=\"p-4 md:p-6\">\r\n                <div className=\"flex justify-between items-start mb-3\">\r\n                    <div className=\"flex gap-3\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center font-bold text-gray-600 dark:text-gray-300\">\r\n                            {post.userName?.[0]}\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"font-semibold text-gray-900 dark:text-white\">{post.userName}</span>\r\n                                {post.userRole === \"expert\" && <span className=\"px-1.5 py-0.5 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 text-[10px] rounded uppercase font-bold\">Expert</span>}\r\n                            </div>\r\n                            <div className=\"text-xs text-gray-500\">{new Date(post.date).toLocaleDateString()}</div>\r\n                        </div>\r\n                    </div>\r\n                    {user?.email === post.userEmail && (\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <button onClick={() => { setEditingPostId(post.id); setEditContentState(post.content); }} className=\"p-1.5 text-gray-400 hover:text-green-600 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800\"><IconEdit size={16} /></button>\r\n                            <button onClick={onDelete} className=\"p-1.5 text-gray-400 hover:text-red-500 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800\"><IconTrash size={16} /></button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                \r\n                {isEditing ? (\r\n                    <div className=\"space-y-3 mb-4\">\r\n                        <textarea value={editContent} onChange={e => setEditContentState(e.target.value)} className=\"w-full bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-lg p-3 text-gray-900 dark:text-white\" rows={3}/>\r\n                        <div className=\"flex justify-end gap-2\">\r\n                            <button onClick={() => setEditingPostId(null)} className=\"px-3 py-1 text-sm text-gray-500 hover:text-gray-900 dark:hover:text-white\">Cancel</button>\r\n                            <button onClick={() => onEdit(post.id, editContent)} className=\"px-3 py-1 text-sm bg-green-600 text-white rounded-lg\">Save</button>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <p className=\"text-gray-800 dark:text-gray-200 mb-4 whitespace-pre-wrap leading-relaxed text-base\">{post.content}</p>\r\n                )}\r\n\r\n                {post.image && <div className=\"mb-4 rounded-lg overflow-hidden border border-gray-100 dark:border-neutral-800 relative h-64 w-full\"><Image src={post.image} alt=\"Post\" fill className=\"object-cover\" /></div>}\r\n                \r\n                <div className=\"flex items-center gap-6 pt-3 border-t border-gray-100 dark:border-neutral-800\">\r\n                    <button onClick={onLike} className={`flex items-center gap-2 text-sm font-medium transition-colors ${post.likes.includes(user?.email || \"\") ? \"text-pink-500\" : \"text-gray-500 hover:text-pink-500\"}`}>\r\n                        <IconHeart size={18} className={post.likes.includes(user?.email || \"\") ? \"fill-current\" : \"\"}/> <span>{post.likes.length}</span>\r\n                    </button>\r\n                    <button onClick={() => setShowComments(!showComments)} className={`flex items-center gap-2 text-sm font-medium transition-colors ${showComments ? \"text-green-600\" : \"text-gray-500 hover:text-gray-900 dark:hover:text-white\"}`}>\r\n                        <IconMessage size={18} /> <span>{post.comments?.length || 0}</span>\r\n                    </button>\r\n                </div>\r\n\r\n                <AnimatePresence>\r\n                    {showComments && (\r\n                        <motion.div initial={{ height: 0, opacity: 0 }} animate={{ height: \"auto\", opacity: 1 }} exit={{ height: 0, opacity: 0 }} className=\"overflow-hidden\">\r\n                            <div className=\"mt-4 space-y-3 pt-3 bg-gray-50 dark:bg-neutral-900/50 -mx-6 px-6 pb-4 border-t border-gray-100 dark:border-neutral-800\">\r\n                                {post.comments?.map((comment: any) => (\r\n                                    <div key={comment.id} className=\"flex gap-2.5\">\r\n                                        <div className=\"w-6 h-6 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center text-[10px] font-bold text-gray-600 dark:text-gray-300 shrink-0\">{comment.userName[0]}</div>\r\n                                        <div className=\"flex-1 bg-white dark:bg-neutral-800 rounded-xl rounded-tl-none px-3 py-2 shadow-sm border border-gray-100 dark:border-neutral-700\">\r\n                                             <div className=\"flex justify-between items-baseline\">\r\n                                                <span className=\"text-xs font-bold text-gray-900 dark:text-white\">{comment.userName}</span>\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <span className=\"text-[10px] text-gray-400\">{new Date(comment.date).toLocaleDateString()}</span>\r\n                                                    {user?.email === comment.userEmail && <button onClick={() => onDeleteComment(post.id, comment.id)} className=\"text-[10px] text-red-500 hover:text-red-700\"><IconTrash size={12}/></button>}\r\n                                                </div>\r\n                                            </div>\r\n                                            <p className=\"text-sm text-gray-700 dark:text-gray-300 mt-0.5\">{comment.text}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                <div className=\"flex gap-2 mt-3 items-center\">\r\n                                    <div className=\"w-8 h-8 rounded-full bg-green-100 dark:bg-neutral-800 flex items-center justify-center text-xs font-bold text-green-700 dark:text-green-400 shrink-0\">{user?.name?.[0] || \"U\"}</div>\r\n                                    <div className=\"flex-1 flex gap-2 relative\">\r\n                                        <input value={commentText} onChange={e => setCommentText(e.target.value)} onKeyDown={e => { if(e.key === \"Enter\" && commentText.trim()) { onComment(post.id, commentText); setCommentText(\"\"); } }} placeholder=\"Write a comment...\" className=\"w-full bg-gray-100 dark:bg-neutral-800 border-none rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-green-500 text-gray-900 dark:text-white\"/>\r\n                                        <button onClick={() => { if(commentText.trim()) { onComment(post.id, commentText); setCommentText(\"\"); } }} disabled={!commentText.trim()} className=\"absolute right-2 top-1/2 -translate-y-1/2 text-green-600 hover:text-green-700 disabled:opacity-50 p-1\"><IconSend size={16}/></button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction UserCard({ user, onFollow, currentUser, onChat }: any) {\r\n    const isFollowing = user.followers.includes(currentUser?.email || \"\");\r\n    return (\r\n        <div className=\"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-6 flex flex-col items-center gap-4 hover:shadow-lg transition-shadow\">\r\n            <div className=\"w-16 h-16 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center text-xl font-bold text-gray-600 dark:text-gray-300\">{user.name[0]}</div>\r\n            <div className=\"text-center\">\r\n                <h3 className=\"font-bold text-lg text-gray-900 dark:text-white\">{user.name}</h3>\r\n                <p className=\"text-xs text-gray-500 uppercase tracking-widest mt-1\">{user.role}</p>\r\n            </div>\r\n            <div className=\"flex items-center gap-4 text-sm text-gray-500\">\r\n                <span><strong className=\"text-gray-900 dark:text-white\">{user.followers.length}</strong> Followers</span>\r\n                <span><strong className=\"text-gray-900 dark:text-white\">{user.following.length}</strong> Following</span>\r\n            </div>\r\n            <div className=\"flex gap-2 w-full mt-2\">\r\n                <button onClick={onFollow} className={`flex-1 py-1.5 rounded-lg text-sm font-medium transition-all ${isFollowing ? \"bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white hover:bg-gray-200\" : \"bg-green-600 text-white hover:bg-green-700\"}`}>{isFollowing ? \"Following\" : \"Follow\"}</button>\r\n                <button onClick={onChat} className=\"p-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-600 dark:text-gray-300 hover:text-green-600 transition-colors\"><IconMessage size={18}/></button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction MessageBubble({ message, isMe, onReply, replyContent, onReact, onDelete, onEdit, isEditing, setEditingMsgId }: any) {\r\n    const [editContent, setEditContent] = useState(message.content);\r\n\r\n    return (\r\n        <div className={`flex flex-col ${isMe ? \"items-end\" : \"items-start\"} relative group`}>\r\n             {replyContent && <div className={`text-xs text-gray-400 mb-1 px-2 border-l-2 ${isMe ? \"border-green-500/50 text-right pr-2\" : \"border-gray-300 pl-2\"}`}>Replying to: {replyContent.substring(0, 30)}...</div>}\r\n            <div className={`max-w-[80%] relative group/bubble w-full md:w-auto`}>\r\n                {!isEditing && (\r\n                    <div className={`absolute -top-8 ${isMe ? \"right-0\" : \"left-0\"} hidden group-hover/bubble:flex items-center gap-1 bg-white dark:bg-neutral-800 shadow-md border border-gray-200 dark:border-neutral-700 rounded-full px-2 py-1 z-10`}>\r\n                        <button onClick={onReply} className=\"p-1 text-gray-500 hover:text-green-600\" title=\"Reply\"><IconArrowBackUp size={14}/></button>\r\n                        <div className=\"flex items-center border-l border-r border-gray-200 dark:border-neutral-700 mx-1 px-1 gap-1\">\r\n                            {[\"ðŸ‘\",\"â¤ï¸\",\"ðŸ˜‚\"].map(r => <button key={r} onClick={() => onReact(r)} className=\"hover:scale-125 transition-transform\">{r}</button>)}\r\n                        </div>\r\n                        {isMe && (\r\n                            <>\r\n                                <button onClick={() => { setEditingMsgId(message.id); setEditContent(message.content); }} className=\"p-1 text-gray-500 hover:text-blue-500\" title=\"Edit\"><IconEdit size={14}/></button>\r\n                                <button onClick={onDelete} className=\"p-1 text-gray-500 hover:text-red-500\" title=\"Delete\"><IconTrash size={14}/></button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                \r\n                {isEditing ? (\r\n                    <div className=\"flex gap-2 items-center bg-white dark:bg-neutral-800 p-2 rounded-xl border border-gray-200 dark:border-neutral-700 shadow-sm\">\r\n                        <input value={editContent} onChange={e => setEditContent(e.target.value)} className=\"bg-transparent border-none focus:outline-none text-sm w-full min-w-[200px]\" autoFocus onKeyDown={e => { if(e.key === \"Enter\") onEdit(editContent); }}/>\r\n                        <button onClick={() => setEditingMsgId(null)} className=\"text-gray-400 hover:text-red-500\"><IconX size={14}/></button>\r\n                        <button onClick={() => onEdit(editContent)} className=\"text-green-600 hover:text-green-700\"><IconCheck size={14}/></button>\r\n                    </div>\r\n                ) : (\r\n                    <div className={`px-4 py-2 rounded-2xl text-sm leading-relaxed shadow-sm border relative ${isMe ? \"bg-green-600 text-white border-green-600 rounded-br-none\" : \"bg-white dark:bg-neutral-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-neutral-700 rounded-bl-none\"}`}>\r\n                        {message.content}\r\n                        <div className={`text-[10px] mt-1 text-right flex items-center justify-end gap-1 ${isMe ? \"text-green-100\" : \"text-gray-400\"}`}>\r\n                            {message.edited && <span>(edited)</span>}\r\n                            {new Date(message.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}\r\n                        </div>\r\n                        {message.reaction && <div className={`absolute -bottom-2 ${isMe ? \"left-0\" : \"right-0\"} bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-full w-5 h-5 flex items-center justify-center text-xs shadow-sm`}>{message.reaction}</div>}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;;;AAXA;;;;;;AAuCe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,iJAAO;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qLAAQ,EAAkC;IAC5E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qLAAQ,EAAC;IAEzC,aAAa;IACb,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qLAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAC;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,qLAAQ,EAAgB;IAElE,gBAAgB;IAChB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qLAAQ,EAAe,EAAE;IACnD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,qLAAQ,EAAoC;IAEtF,iBAAiB;IACjB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qLAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,qLAAQ,EAAgB;IACxE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qLAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qLAAQ,EAAiB;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAgB,OAAO,0BAA0B;IAEjG,MAAM,aAAa,IAAA,mLAAM,EAAwB;IACjD,MAAM,iBAAiB,IAAA,mLAAM,EAAiB;IAE9C,IAAA,sLAAS;mCAAC;YAAQ,YAAY;QAAO;kCAAG,EAAE;IAE1C,IAAA,sLAAS;mCAAC;YACR,IAAG,CAAC,UAAU;YACd;YACA;YACA,WAAW,OAAO,GAAG;2CAAY;oBAC7B,IAAI,QAAQ,cAAc,YAAY;gBAC1C;0CAAG;YACH;2CAAO;oBAAQ,IAAG,WAAW,OAAO,EAAE,cAAc,WAAW,OAAO;gBAAG;;QAC3E;kCAAG;QAAC;QAAM;QAAW;KAAS;IAE9B,IAAA,sLAAS;mCAAC;YACN,IAAG,cAAc,cAAc,UAAU;QAC7C;kCAAG;QAAC,SAAS,MAAM;QAAE;QAAkB;QAAW;KAAS;IAE3D,MAAM,iBAAiB,IAAM,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAEzF,oBAAoB;IACpB,MAAM,aAAa;QACjB,gBAAgB;QAChB,IAAI;YAAE,MAAM,MAAM,MAAM,MAAM;YAAyB,SAAS,MAAM,IAAI,IAAI;QAAK,EACnF,OAAM,GAAG,CAAC,SAAU;YAAE,gBAAgB;QAAQ;IAChD;IAEA,MAAM,aAAa;QACjB,IAAI;YAAE,MAAM,MAAM,MAAM,MAAM;YAAe,SAAS,MAAM,IAAI,IAAI;QAAK,EAAE,OAAM,GAAG,CAAC;IACvF;IAEA,MAAM,gBAAgB;QAClB,IAAG,CAAC,MAAM;QACV,IAAI;YAAE,MAAM,MAAM,MAAM,MAAM,CAAC,oBAAoB,EAAE,KAAK,KAAK,EAAE;YAAG,YAAY,MAAM,IAAI,IAAI;QAAK,EAAE,OAAM,GAAG,CAAC;IACnH;IAEA,kBAAkB;IAClB,MAAM,eAAe,OAAO;QACxB,IAAG,CAAC,MAAM;QACV,SAAS,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA;gBACtB,IAAG,EAAE,KAAK,KAAK,aAAa;oBACvB,MAAM,cAAc,EAAE,SAAS,CAAC,QAAQ,CAAC,KAAK,KAAK;oBACnD,OAAO;wBAAE,GAAG,CAAC;wBAAE,WAAW,cAAc,EAAE,SAAS,CAAC,MAAM,CAAC,CAAA,IAAK,MAAM,KAAK,KAAK,IAAI;+BAAI,EAAE,SAAS;4BAAE,KAAK,KAAK;yBAAC;oBAAC;gBACtH;gBACA,IAAG,EAAE,KAAK,KAAK,KAAK,KAAK,EAAE;oBACvB,MAAM,kBAAkB,EAAE,SAAS,CAAC,QAAQ,CAAC;oBAC7C,OAAO;wBAAE,GAAG,CAAC;wBAAE,WAAW,kBAAkB,EAAE,SAAS,CAAC,MAAM,CAAC,CAAA,IAAK,MAAM,eAAe;+BAAI,EAAE,SAAS;4BAAE;yBAAY;oBAAC;gBAC3H;gBACA,OAAO;YACX;QACA,MAAM,MAAM,qBAAqB;YAC7B,QAAQ;YAAQ,SAAS;gBAAE,gBAAgB;YAAmB;YAC9D,MAAM,KAAK,SAAS,CAAC;gBAAE,WAAW,KAAK,KAAK;gBAAE;YAAY;QAC9D;IACJ;IAEA,MAAM,mBAAmB,OAAO,SAAiB;QAC7C,IAAG,CAAC,MAAM;QACV,MAAM,MAAM,wBAAwB;YAChC,QAAQ;YAAQ,SAAS;gBAAE,gBAAgB;YAAmB;YAC9D,MAAM,KAAK,SAAS,CAAC;gBAAE,WAAW,KAAK,KAAK;gBAAE,UAAU,KAAK,IAAI,IAAI;gBAAU,UAAU;gBAAU;gBAAS;YAAM;QACtH;QACA;IACJ;IAEA,MAAM,aAAa,OAAO;QACtB,IAAG,CAAC,MAAM;QACV,SAAS,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS;oBAC7C,GAAG,CAAC;oBAAE,OAAO,EAAE,KAAK,CAAC,QAAQ,CAAC,KAAK,KAAK,IAAI,EAAE,KAAK,CAAC,MAAM,CAAC,CAAA,IAAK,MAAM,KAAK,KAAK,IAAI;2BAAI,EAAE,KAAK;wBAAE,KAAK,KAAK;qBAAC;gBAChH,IAAI;QACJ,MAAM,MAAM,6BAA6B;YACrC,QAAQ;YAAQ,SAAS;gBAAE,gBAAgB;YAAmB;YAC9D,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAQ,WAAW,KAAK,KAAK;YAAC;QACzD;IACJ;IAEA,MAAM,mBAAmB,OAAO;QAC5B,IAAG,CAAC,QAAQ,CAAC,QAAQ,sBAAsB;QAC3C,SAAS,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAC3C,MAAM,MAAM,CAAC,wBAAwB,EAAE,OAAO,WAAW,EAAE,KAAK,KAAK,EAAE,EAAE;YAAE,QAAQ;QAAS;IAChG;IAEA,MAAM,gBAAgB,OAAO,QAAgB;QACzC,IAAG,CAAC,MAAM;QACV,MAAM,aAAsB;YAAE,IAAI,KAAK,GAAG,GAAG,QAAQ;YAAI,WAAW,KAAK,KAAK;YAAE,UAAU,KAAK,IAAI,IAAI;YAAQ;YAAM,MAAM,IAAI,OAAO,WAAW;QAAG;QACpJ,SAAS,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS;oBAAE,GAAG,CAAC;oBAAE,UAAU;2BAAI,EAAE,QAAQ;wBAAE;qBAAW;gBAAC,IAAI;QACnG,MAAM,MAAM,gCAAgC;YACxC,QAAQ;YAAQ,SAAS;gBAAE,gBAAgB;YAAmB;YAC9D,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAQ,WAAW,KAAK,KAAK;gBAAE,UAAU,KAAK,IAAI;gBAAE;YAAK;QACpF;IACJ;IAEA,MAAM,sBAAsB,OAAO,QAAgB;QAC/C,IAAG,CAAC,QAAQ,CAAC,QAAQ,yBAAyB;QAC9C,SAAS,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS;oBAAE,GAAG,CAAC;oBAAE,UAAU,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;gBAAW,IAAI;QAClH,MAAM,MAAM,CAAC,oCAAoC,EAAE,OAAO,WAAW,EAAE,UAAU,WAAW,EAAE,KAAK,KAAK,EAAE,EAAE;YAAE,QAAQ;QAAS;IACnI;IAEA,MAAM,iBAAiB,OAAO,QAAgB;QAC1C,IAAG,CAAC,MAAM;QACV,SAAS,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS;oBAAE,GAAG,CAAC;oBAAE;gBAAQ,IAAI;QACrE,iBAAiB;QACjB,MAAM,MAAM,CAAC,oBAAoB,CAAC,EAAE;YAClC,QAAQ;YAAO,SAAS;gBAAE,gBAAgB;YAAmB;YAC7D,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAQ;gBAAS,WAAW,KAAK,KAAK;YAAC;QAChE;IACJ;IAEA,MAAM,iBAAiB,CAAC;QACpB,oBAAoB;QACpB,aAAa;QACb;IACJ;IAEA,MAAM,oBAAoB;QACtB,IAAG,CAAC,QAAQ,CAAC,oBAAoB,CAAC,SAAS,IAAI,IAAI;QACnD,MAAM,gBAAyB;YAC3B,IAAI,KAAK,GAAG,GAAG,QAAQ;YAAI,QAAQ,KAAK,KAAK;YAAE,UAAU;YAAkB,SAAS;YAAU,WAAW,IAAI,OAAO,WAAW;YAAI,WAAW,SAAS;QAC3J;QACA,YAAY,CAAA,OAAQ;mBAAI;gBAAM;aAAc;QAC5C,YAAY;QACZ,WAAW;QACX;QACA,MAAM,MAAM,iBAAiB;YACzB,QAAQ;YAAQ,SAAS;gBAAE,gBAAgB;YAAmB;YAC9D,MAAM,KAAK,SAAS,CAAC;gBAAE,QAAQ,KAAK,KAAK;gBAAE,UAAU;gBAAkB,SAAS,cAAc,OAAO;gBAAE,WAAW,cAAc,SAAS;YAAC;QAC9I;QACA,iBAAiB,OAAO;IAC5B;IAEA,MAAM,wBAAwB,OAAO,OAAe;QAChD,IAAG,CAAC,MAAM;QACV,YAAY,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,QAAQ;oBAAE,GAAG,CAAC;oBAAE,UAAU,EAAE,QAAQ,KAAK,WAAW,YAAY;gBAAS,IAAI;QACxH,MAAM,MAAM,CAAC,cAAc,EAAE,OAAO,EAAE;YAClC,QAAQ;YAAS,SAAS;gBAAC,gBAAgB;YAAkB;YAC7D,MAAM,KAAK,SAAS,CAAC;gBAAE,WAAW,KAAK,KAAK;gBAAE;YAAS;QAC3D;IACJ;IAEA,MAAM,sBAAsB,OAAO;QAC/B,IAAG,CAAC,QAAQ,CAAC,QAAQ,yBAAyB;QAC9C,YAAY,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAC9C,MAAM,MAAM,CAAC,cAAc,EAAE,MAAM,WAAW,EAAE,KAAK,KAAK,EAAE,EAAE;YAAE,QAAQ;QAAS;IACrF;IAEA,MAAM,oBAAoB,OAAO,OAAe;QAC5C,IAAG,CAAC,MAAM;QACV,YAAY,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,QAAQ;oBAAE,GAAG,CAAC;oBAAE;oBAAS,QAAQ;gBAAK,IAAI;QACrF,gBAAgB;QAChB,MAAM,MAAM,CAAC,cAAc,EAAE,OAAO,EAAE;YAClC,QAAQ;YAAS,SAAS;gBAAC,gBAAgB;YAAkB;YAC7D,MAAM,KAAK,SAAS,CAAC;gBAAE,WAAW,KAAK,KAAK;gBAAE;YAAQ;QAC1D;IACJ;IAEA,MAAM,mBAAmB;QACrB,IAAG,CAAC,QAAQ,8DAA8D;QAC1E,YAAY,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,CAAC,CAAE,AAAC,EAAE,MAAM,KAAK,MAAM,SAAS,EAAE,QAAQ,KAAK,oBAAsB,EAAE,MAAM,KAAK,oBAAoB,EAAE,QAAQ,KAAK,MAAM,KAAO;IAC3K;IAEA,+BAA+B;IAC/B,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAA;QAC/B,IAAG,EAAE,KAAK,KAAK,MAAM,OAAO,OAAO;QACnC,IAAG,kBAAkB,aAAa,OAAO,EAAE,SAAS,CAAC,QAAQ,CAAC,MAAM,SAAS;QAC7E,IAAG,kBAAkB,aAAa,OAAO,EAAE,SAAS,CAAC,QAAQ,CAAC,MAAM,SAAS;QAC7E,OAAO;IACX;IAEA,IAAI,CAAC,UAAU,qBAAO,yMAAC;QAAI,WAAU;;;;;;IAErC,qBACE,yMAAC;QAAI,WAAU;;0BACX,yMAAC;gBAAO,WAAU;;kCACd,yMAAC;wBAAI,WAAU;;0CACX,yMAAC;gCAAI,WAAU;;kDACX,yMAAC;wCAAI,WAAU;kDACX,cAAA,yMAAC,oPAAS;4CAAC,WAAU;;;;;;;;;;;kDAEzB,yMAAC;wCAAK,WAAU;kDAAoE;;;;;;;;;;;;0CAExF,yMAAC;gCAAI,WAAU;0CACX,cAAA,yMAAC;oCAAI,WAAU;8CACV,AAAC;wCAAC;wCAAQ;wCAAW;qCAAW,CAAW,GAAG,CAAC,CAAA,oBAC5C,yMAAC;4CACG,SAAS,IAAM,aAAa;4CAC5B,WAAW,CAAC,wDAAwD,EAAE,cAAc,MAAM,0DAA0D,8DAA8D;sDAElN,cAAA,yMAAC;gDAAK,WAAU;0DAAc;;;;;;2CAJrB;;;;;;;;;;;;;;;;;;;;;kCAW5B,yMAAC;wBAAI,WAAU;kCACX,cAAA,yMAAC;4BAAI,WAAU;sCACX,AAAC;gCAAC;gCAAQ;gCAAW;6BAAW,CAAW,GAAG,CAAC,CAAA,oBAC5C,yMAAC;oCAAiB,SAAS,IAAM,aAAa;oCAAM,WAAW,CAAC,4DAA4D,EAAE,cAAc,MAAM,0DAA0D,iBAAiB;8CACzN,cAAA,yMAAC;wCAAK,WAAU;kDAAc;;;;;;mCADrB;;;;;;;;;;;;;;;;;;;;;0BAQ7B,yMAAC;gBAAK,WAAU;0BACZ,cAAA,yMAAC,2NAAe;oBAAC,MAAK;8BAClB,cAAA,yMAAC,mNAAM,CAAC,GAAG;wBAEP,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAG;wBAC7B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,MAAM;4BAAE,SAAS;4BAAG,GAAG,CAAC;wBAAG;wBAC3B,YAAY;4BAAE,UAAU;wBAAI;;4BAE3B,cAAc,wBACX,yMAAC;gCAAI,WAAU;;kDACX,yMAAC;wCAAiB,MAAM;wCAAM,SAAS;wCAAY,QAAQ;;;;;;kDAC3D,yMAAC;wCAAI,WAAU;kDACV,6BACG,yMAAC;4CAAI,WAAU;sDACV;gDAAC;gDAAE;gDAAE;6CAAE,CAAC,GAAG,CAAC,CAAA,kBAAK,yMAAC;oDAAY,WAAU;mDAAb;;;;;;;;;mDAEhC,MAAM,MAAM,KAAK,kBACjB,yMAAC;4CAAI,WAAU;sDAAkC;;;;;mDAEjD,MAAM,GAAG,CAAC,CAAA,qBACN,yMAAC;gDACiB,MAAM;gDAAM,MAAM;gDAChC,QAAQ,IAAM,WAAW,KAAK,EAAE;gDAChC,UAAU,IAAM,iBAAiB,KAAK,EAAE;gDACxC,WAAW;gDACX,iBAAiB;gDACjB,QAAQ;gDACR,WAAW,kBAAkB,KAAK,EAAE;gDACpC,kBAAkB;+CAPb,KAAK,EAAE;;;;;;;;;;;;;;;;4BAenC,cAAc,2BACX,yMAAC;gCAAI,WAAU;;kDACX,yMAAC;wCAAI,WAAU;kDACV,AAAC;4CAAC;4CAAO;4CAAa;yCAAY,CAAW,GAAG,CAAC,CAAA,kBAC9C,yMAAC;gDACW,SAAS,IAAM,iBAAiB;gDACxC,WAAW,CAAC,4EAA4E,EAAE,kBAAkB,IAAI,4BAA4B,6FAA6F;0DAExO;+CAHI;;;;;;;;;;kDAOjB,yMAAC;wCAAI,WAAU;;4CACV,cAAc,GAAG,CAAC,CAAA,kBACf,yMAAC;oDAAuB,MAAM;oDAAG,aAAa;oDAAM,UAAU,IAAM,aAAa,EAAE,KAAK;oDAAG,QAAQ,IAAM,eAAe,EAAE,KAAK;mDAAhH,EAAE,KAAK;;;;;4CAEzB,cAAc,MAAM,KAAK,mBACtB,yMAAC;gDAAI,WAAU;0DAAgD;;;;;;;;;;;;;;;;;;4BAM9E,cAAc,4BACX,yMAAC;gCAAI,WAAU;;kDACX,yMAAC;wCAAI,WAAW,CAAC,6GAA6G,EAAE,mBAAmB,mBAAmB,QAAQ;;0DAC1K,yMAAC;gDAAI,WAAU;0DACX,cAAA,yMAAC;oDAAG,WAAU;8DAAsD;;;;;;;;;;;0DAExE,yMAAC;gDAAI,WAAU;0DACV,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,MAAM,OAAO,GAAG,CAAC,CAAA,kBAC5C,yMAAC;wDAAqB,SAAS,IAAM,oBAAoB,EAAE,KAAK;wDAC5D,WAAW,CAAC,6DAA6D,EAAE,qBAAqB,EAAE,KAAK,GAAG,oEAAoE,+CAA+C;;0EAE7N,yMAAC;gEAAI,WAAU;0EACV,EAAE,IAAI,CAAC,EAAE;;;;;;0EAEd,yMAAC;gEAAI,WAAU;;kFACX,yMAAC;wEAAI,WAAU;kFAA6C,EAAE,IAAI;;;;;;kFAClE,yMAAC;wEAAI,WAAU;kFAAoC,EAAE,IAAI;;;;;;;;;;;;;uDARpD,EAAE,KAAK;;;;;;;;;;;;;;;;kDAehC,yMAAC;wCAAI,WAAW,CAAC,kDAAkD,EAAE,CAAC,mBAAmB,mBAAmB,QAAQ;kDAC/G,iCACG;;8DACI,yMAAC;oDAAI,WAAU;;sEACX,yMAAC;4DAAI,WAAU;;8EACX,yMAAC;oEAAO,SAAS,IAAM,oBAAoB;oEAAO,WAAU;8EAAyE,cAAA,yMAAC,sQAAe;wEAAC,MAAM;;;;;;;;;;;8EAC5J,yMAAC;oEAAI,WAAU;;sFACX,yMAAC;4EAAK,WAAU;sFAA+C,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,mBAAmB,QAAQ;;;;;;sFACtH,yMAAC;4EAAK,WAAU;sFAAiD;;;;;;;;;;;;;;;;;;sEAGzE,yMAAC;4DAAO,SAAS;4DAAkB,WAAU;4DAAgG,OAAM;sEAC/I,cAAA,yMAAC,oPAAS;gEAAC,MAAM;;;;;;;;;;;;;;;;;8DAGzB,yMAAC;oDAAI,WAAU;;wDACV,SAAS,MAAM,CAAC,CAAA,IAAK,AAAC,EAAE,MAAM,KAAK,MAAM,SAAS,EAAE,QAAQ,KAAK,oBAAsB,EAAE,MAAM,KAAK,oBAAoB,EAAE,QAAQ,KAAK,MAAM,OACzI,GAAG,CAAC,CAAA,oBACD,yMAAC;gEACgB,SAAS;gEAAK,MAAM,IAAI,MAAM,KAAK,MAAM;gEACtD,cAAc,IAAI,SAAS,GAAG,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,SAAS,GAAG,UAAU;gEACpF,SAAS,IAAM,WAAW;gEAC1B,SAAS,CAAC,IAAc,sBAAsB,IAAI,EAAE,EAAE;gEACtD,UAAU,IAAM,oBAAoB,IAAI,EAAE;gEAC1C,QAAQ,CAAC,UAAoB,kBAAkB,IAAI,EAAE,EAAE;gEACvD,WAAW,iBAAiB,IAAI,EAAE;gEAClC,iBAAiB;+DAPZ,IAAI,EAAE;;;;;sEAUvB,yMAAC;4DAAI,KAAK;;;;;;;;;;;;8DAEd,yMAAC;oDAAI,WAAU;;wDACV,yBACG,yMAAC;4DAAI,WAAU;;8EACX,yMAAC;oEAAK,WAAU;;wEAAW;wEAAc,QAAQ,OAAO,CAAC,SAAS,CAAC,GAAG;wEAAI;;;;;;;8EAC1E,yMAAC;oEAAO,SAAS,IAAM,WAAW;8EAAO,cAAA,yMAAC,wOAAK;wEAAC,MAAM;;;;;;;;;;;;;;;;;sEAG9D,yMAAC;4DAAI,WAAU;;8EACX,yMAAC;oEACG,OAAO;oEAAU,UAAU,CAAA,IAAK,YAAY,EAAE,MAAM,CAAC,KAAK;oEAC1D,WAAW,CAAA,IAAK,EAAE,GAAG,KAAK,WAAW;oEACrC,aAAY;oEACZ,WAAU;;;;;;8EAEd,yMAAC;oEAAO,SAAS;oEAAmB,WAAU;oEAAqH,UAAU,CAAC,SAAS,IAAI;8EACvL,cAAA,yMAAC,iPAAQ;wEAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;yEAMhC,yMAAC;4CAAI,WAAU;;8DACX,yMAAC;oDAAI,WAAU;8DAA0F,cAAA,yMAAC,4QAAiB;wDAAC,MAAM;;;;;;;;;;;8DAClI,yMAAC;8DAAE;;;;;;;;;;;;;;;;;;;;;;;;uBAtIlB;;;;;;;;;;;;;;;;;;;;;AAiJzB;GAvXwB;;QACL,iJAAO;;;KADF;AAyXxB,qBAAqB;AACrB,MAAM,mBAAmB,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAO;;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qLAAQ,EAAC;IACvC,qBACI,yMAAC;QAAI,WAAU;kBACX,cAAA,yMAAC;YAAI,WAAU;;8BACV,yMAAC;oBAAI,WAAU;8BACV,MAAM,MAAM,CAAC,EAAE,IAAI;;;;;;8BAExB,yMAAC;oBAAI,WAAU;;sCACX,yMAAC;4BACG,OAAO;4BAAS,UAAU,CAAA,IAAK,WAAW,EAAE,MAAM,CAAC,KAAK;4BACxD,aAAY;4BACZ,WAAU;;;;;;sCAEd,yMAAC;4BAAI,WAAU;;8CACX,yMAAC;oCAAI,WAAU;8CACX,cAAA,yMAAC;wCAAO,WAAU;kDAA8E,cAAA,yMAAC,oPAAS;4CAAC,MAAM;;;;;;;;;;;;;;;;8CAErH,yMAAC;oCAAO,SAAS;wCAAQ,OAAO;wCAAU,WAAW;oCAAK;oCAAG,UAAU,CAAC,QAAQ,IAAI;oCAAI,WAAU;8CAAgH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3O;IAxBM;MAAA;AA0BN,SAAS,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,eAAe,EAAE,MAAM,EAAE,SAAS,EAAE,gBAAgB,EAAO;;IACpH,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAC;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,qLAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,oBAAoB,GAAG,IAAA,qLAAQ,EAAC,KAAK,OAAO;IAEhE,qBACI,yMAAC;QAAI,WAAU;kBACX,cAAA,yMAAC;YAAI,WAAU;;8BACX,yMAAC;oBAAI,WAAU;;sCACX,yMAAC;4BAAI,WAAU;;8CACX,yMAAC;oCAAI,WAAU;8CACV,KAAK,QAAQ,EAAE,CAAC,EAAE;;;;;;8CAEvB,yMAAC;;sDACG,yMAAC;4CAAI,WAAU;;8DACX,yMAAC;oDAAK,WAAU;8DAA+C,KAAK,QAAQ;;;;;;gDAC3E,KAAK,QAAQ,KAAK,0BAAY,yMAAC;oDAAK,WAAU;8DAAsH;;;;;;;;;;;;sDAEzK,yMAAC;4CAAI,WAAU;sDAAyB,IAAI,KAAK,KAAK,IAAI,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;wBAGrF,MAAM,UAAU,KAAK,SAAS,kBAC3B,yMAAC;4BAAI,WAAU;;8CACX,yMAAC;oCAAO,SAAS;wCAAQ,iBAAiB,KAAK,EAAE;wCAAG,oBAAoB,KAAK,OAAO;oCAAG;oCAAG,WAAU;8CAAoG,cAAA,yMAAC,iPAAQ;wCAAC,MAAM;;;;;;;;;;;8CACxN,yMAAC;oCAAO,SAAS;oCAAU,WAAU;8CAAkG,cAAA,yMAAC,oPAAS;wCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;gBAKnK,0BACG,yMAAC;oBAAI,WAAU;;sCACX,yMAAC;4BAAS,OAAO;4BAAa,UAAU,CAAA,IAAK,oBAAoB,EAAE,MAAM,CAAC,KAAK;4BAAG,WAAU;4BAAoI,MAAM;;;;;;sCACtO,yMAAC;4BAAI,WAAU;;8CACX,yMAAC;oCAAO,SAAS,IAAM,iBAAiB;oCAAO,WAAU;8CAA4E;;;;;;8CACrI,yMAAC;oCAAO,SAAS,IAAM,OAAO,KAAK,EAAE,EAAE;oCAAc,WAAU;8CAAuD;;;;;;;;;;;;;;;;;yCAI9H,yMAAC;oBAAE,WAAU;8BAAuF,KAAK,OAAO;;;;;;gBAGnH,KAAK,KAAK,kBAAI,yMAAC;oBAAI,WAAU;8BAAsG,cAAA,yMAAC,uJAAK;wBAAC,KAAK,KAAK,KAAK;wBAAE,KAAI;wBAAO,IAAI;wBAAC,WAAU;;;;;;;;;;;8BAEtL,yMAAC;oBAAI,WAAU;;sCACX,yMAAC;4BAAO,SAAS;4BAAQ,WAAW,CAAC,8DAA8D,EAAE,KAAK,KAAK,CAAC,QAAQ,CAAC,MAAM,SAAS,MAAM,kBAAkB,qCAAqC;;8CACjM,yMAAC,oPAAS;oCAAC,MAAM;oCAAI,WAAW,KAAK,KAAK,CAAC,QAAQ,CAAC,MAAM,SAAS,MAAM,iBAAiB;;;;;;gCAAK;8CAAC,yMAAC;8CAAM,KAAK,KAAK,CAAC,MAAM;;;;;;;;;;;;sCAE5H,yMAAC;4BAAO,SAAS,IAAM,gBAAgB,CAAC;4BAAe,WAAW,CAAC,8DAA8D,EAAE,eAAe,mBAAmB,2DAA2D;;8CAC5N,yMAAC,0PAAW;oCAAC,MAAM;;;;;;gCAAM;8CAAC,yMAAC;8CAAM,KAAK,QAAQ,EAAE,UAAU;;;;;;;;;;;;;;;;;;8BAIlE,yMAAC,2NAAe;8BACX,8BACG,yMAAC,mNAAM,CAAC,GAAG;wBAAC,SAAS;4BAAE,QAAQ;4BAAG,SAAS;wBAAE;wBAAG,SAAS;4BAAE,QAAQ;4BAAQ,SAAS;wBAAE;wBAAG,MAAM;4BAAE,QAAQ;4BAAG,SAAS;wBAAE;wBAAG,WAAU;kCAChI,cAAA,yMAAC;4BAAI,WAAU;;gCACV,KAAK,QAAQ,EAAE,IAAI,CAAC,wBACjB,yMAAC;wCAAqB,WAAU;;0DAC5B,yMAAC;gDAAI,WAAU;0DAAyJ,QAAQ,QAAQ,CAAC,EAAE;;;;;;0DAC3L,yMAAC;gDAAI,WAAU;;kEACV,yMAAC;wDAAI,WAAU;;0EACZ,yMAAC;gEAAK,WAAU;0EAAmD,QAAQ,QAAQ;;;;;;0EACnF,yMAAC;gEAAI,WAAU;;kFACX,yMAAC;wEAAK,WAAU;kFAA6B,IAAI,KAAK,QAAQ,IAAI,EAAE,kBAAkB;;;;;;oEACrF,MAAM,UAAU,QAAQ,SAAS,kBAAI,yMAAC;wEAAO,SAAS,IAAM,gBAAgB,KAAK,EAAE,EAAE,QAAQ,EAAE;wEAAG,WAAU;kFAA8C,cAAA,yMAAC,oPAAS;4EAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;kEAGpL,yMAAC;wDAAE,WAAU;kEAAmD,QAAQ,IAAI;;;;;;;;;;;;;uCAV1E,QAAQ,EAAE;;;;;8CAcxB,yMAAC;oCAAI,WAAU;;sDACX,yMAAC;4CAAI,WAAU;sDAAwJ,MAAM,MAAM,CAAC,EAAE,IAAI;;;;;;sDAC1L,yMAAC;4CAAI,WAAU;;8DACX,yMAAC;oDAAM,OAAO;oDAAa,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;oDAAG,WAAW,CAAA;wDAAO,IAAG,EAAE,GAAG,KAAK,WAAW,YAAY,IAAI,IAAI;4DAAE,UAAU,KAAK,EAAE,EAAE;4DAAc,eAAe;wDAAK;oDAAE;oDAAG,aAAY;oDAAqB,WAAU;;;;;;8DAC/O,yMAAC;oDAAO,SAAS;wDAAQ,IAAG,YAAY,IAAI,IAAI;4DAAE,UAAU,KAAK,EAAE,EAAE;4DAAc,eAAe;wDAAK;oDAAE;oDAAG,UAAU,CAAC,YAAY,IAAI;oDAAI,WAAU;8DAAwG,cAAA,yMAAC,iPAAQ;wDAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUrT;IArFS;MAAA;AAuFT,SAAS,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAO;IAC1D,MAAM,cAAc,KAAK,SAAS,CAAC,QAAQ,CAAC,aAAa,SAAS;IAClE,qBACI,yMAAC;QAAI,WAAU;;0BACX,yMAAC;gBAAI,WAAU;0BAA8I,KAAK,IAAI,CAAC,EAAE;;;;;;0BACzK,yMAAC;gBAAI,WAAU;;kCACX,yMAAC;wBAAG,WAAU;kCAAmD,KAAK,IAAI;;;;;;kCAC1E,yMAAC;wBAAE,WAAU;kCAAwD,KAAK,IAAI;;;;;;;;;;;;0BAElF,yMAAC;gBAAI,WAAU;;kCACX,yMAAC;;0CAAK,yMAAC;gCAAO,WAAU;0CAAiC,KAAK,SAAS,CAAC,MAAM;;;;;;4BAAU;;;;;;;kCACxF,yMAAC;;0CAAK,yMAAC;gCAAO,WAAU;0CAAiC,KAAK,SAAS,CAAC,MAAM;;;;;;4BAAU;;;;;;;;;;;;;0BAE5F,yMAAC;gBAAI,WAAU;;kCACX,yMAAC;wBAAO,SAAS;wBAAU,WAAW,CAAC,4DAA4D,EAAE,cAAc,oFAAoF,8CAA8C;kCAAG,cAAc,cAAc;;;;;;kCACpR,yMAAC;wBAAO,SAAS;wBAAQ,WAAU;kCAAyH,cAAA,yMAAC,0PAAW;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;AAI/L;MAnBS;AAqBT,SAAS,cAAc,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,YAAY,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAE,eAAe,EAAO;;IACvH,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,qLAAQ,EAAC,QAAQ,OAAO;IAE9D,qBACI,yMAAC;QAAI,WAAW,CAAC,cAAc,EAAE,OAAO,cAAc,cAAc,eAAe,CAAC;;YAC9E,8BAAgB,yMAAC;gBAAI,WAAW,CAAC,2CAA2C,EAAE,OAAO,wCAAwC,wBAAwB;;oBAAE;oBAAc,aAAa,SAAS,CAAC,GAAG;oBAAI;;;;;;;0BACrM,yMAAC;gBAAI,WAAW,CAAC,kDAAkD,CAAC;;oBAC/D,CAAC,2BACE,yMAAC;wBAAI,WAAW,CAAC,gBAAgB,EAAE,OAAO,YAAY,SAAS,oKAAoK,CAAC;;0CAChO,yMAAC;gCAAO,SAAS;gCAAS,WAAU;gCAAyC,OAAM;0CAAQ,cAAA,yMAAC,sQAAe;oCAAC,MAAM;;;;;;;;;;;0CAClH,yMAAC;gCAAI,WAAU;0CACV;oCAAC;oCAAK;oCAAK;iCAAK,CAAC,GAAG,CAAC,CAAA,kBAAK,yMAAC;wCAAe,SAAS,IAAM,QAAQ;wCAAI,WAAU;kDAAwC;uCAAhF;;;;;;;;;;4BAE3C,sBACG;;kDACI,yMAAC;wCAAO,SAAS;4CAAQ,gBAAgB,QAAQ,EAAE;4CAAG,eAAe,QAAQ,OAAO;wCAAG;wCAAG,WAAU;wCAAwC,OAAM;kDAAO,cAAA,yMAAC,iPAAQ;4CAAC,MAAM;;;;;;;;;;;kDACzK,yMAAC;wCAAO,SAAS;wCAAU,WAAU;wCAAuC,OAAM;kDAAS,cAAA,yMAAC,oPAAS;4CAAC,MAAM;;;;;;;;;;;;;;;;;;;oBAM3H,0BACG,yMAAC;wBAAI,WAAU;;0CACX,yMAAC;gCAAM,OAAO;gCAAa,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;gCAAG,WAAU;gCAA6E,SAAS;gCAAC,WAAW,CAAA;oCAAO,IAAG,EAAE,GAAG,KAAK,SAAS,OAAO;gCAAc;;;;;;0CACxO,yMAAC;gCAAO,SAAS,IAAM,gBAAgB;gCAAO,WAAU;0CAAmC,cAAA,yMAAC,wOAAK;oCAAC,MAAM;;;;;;;;;;;0CACxG,yMAAC;gCAAO,SAAS,IAAM,OAAO;gCAAc,WAAU;0CAAsC,cAAA,yMAAC,oPAAS;oCAAC,MAAM;;;;;;;;;;;;;;;;6CAGjH,yMAAC;wBAAI,WAAW,CAAC,wEAAwE,EAAE,OAAO,6DAA6D,yHAAyH;;4BACnR,QAAQ,OAAO;0CAChB,yMAAC;gCAAI,WAAW,CAAC,gEAAgE,EAAE,OAAO,mBAAmB,iBAAiB;;oCACzH,QAAQ,MAAM,kBAAI,yMAAC;kDAAK;;;;;;oCACxB,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB,CAAC,EAAE,EAAE;wCAAC,MAAM;wCAAW,QAAO;oCAAS;;;;;;;4BAEzF,QAAQ,QAAQ,kBAAI,yMAAC;gCAAI,WAAW,CAAC,mBAAmB,EAAE,OAAO,WAAW,UAAU,oJAAoJ,CAAC;0CAAG,QAAQ,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;AAMvR;IAzCS;MAAA"}}]
}