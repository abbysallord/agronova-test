{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/components/ui/placeholders-and-vanish-input.tsx"],"sourcesContent":["\"use client\";\n\nimport { AnimatePresence, motion } from \"motion/react\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nexport function PlaceholdersAndVanishInput({\n  placeholders,\n  onChange,\n  onSubmit,\n}: {\n  placeholders: string[];\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  onSubmit: (e: React.FormEvent<HTMLFormElement>) => void;\n}) {\n  const [currentPlaceholder, setCurrentPlaceholder] = useState(0);\n\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\n  const startAnimation = () => {\n    intervalRef.current = setInterval(() => {\n      setCurrentPlaceholder((prev) => (prev + 1) % placeholders.length);\n    }, 3000);\n  };\n  const handleVisibilityChange = () => {\n    if (document.visibilityState !== \"visible\" && intervalRef.current) {\n      clearInterval(intervalRef.current); // Clear the interval when the tab is not visible\n      intervalRef.current = null;\n    } else if (document.visibilityState === \"visible\") {\n      startAnimation(); // Restart the interval when the tab becomes visible\n    }\n  };\n\n  useEffect(() => {\n    startAnimation();\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, [placeholders]);\n\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const newDataRef = useRef<any[]>([]);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [value, setValue] = useState(\"\");\n  const [animating, setAnimating] = useState(false);\n\n  const draw = useCallback(() => {\n    if (!inputRef.current) return;\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    canvas.width = 800;\n    canvas.height = 800;\n    ctx.clearRect(0, 0, 800, 800);\n    const computedStyles = getComputedStyle(inputRef.current);\n\n    const fontSize = parseFloat(computedStyles.getPropertyValue(\"font-size\"));\n    ctx.font = `${fontSize * 2}px ${computedStyles.fontFamily}`;\n    ctx.fillStyle = \"#FFF\";\n    ctx.fillText(value, 16, 40);\n\n    const imageData = ctx.getImageData(0, 0, 800, 800);\n    const pixelData = imageData.data;\n    const newData: any[] = [];\n\n    for (let t = 0; t < 800; t++) {\n      let i = 4 * t * 800;\n      for (let n = 0; n < 800; n++) {\n        let e = i + 4 * n;\n        if (\n          pixelData[e] !== 0 &&\n          pixelData[e + 1] !== 0 &&\n          pixelData[e + 2] !== 0\n        ) {\n          newData.push({\n            x: n,\n            y: t,\n            color: [\n              pixelData[e],\n              pixelData[e + 1],\n              pixelData[e + 2],\n              pixelData[e + 3],\n            ],\n          });\n        }\n      }\n    }\n\n    newDataRef.current = newData.map(({ x, y, color }) => ({\n      x,\n      y,\n      r: 1,\n      color: `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${color[3]})`,\n    }));\n  }, [value]);\n\n  useEffect(() => {\n    draw();\n  }, [value, draw]);\n\n  const animate = (start: number) => {\n    const animateFrame = (pos: number = 0) => {\n      requestAnimationFrame(() => {\n        const newArr = [];\n        for (let i = 0; i < newDataRef.current.length; i++) {\n          const current = newDataRef.current[i];\n          if (current.x < pos) {\n            newArr.push(current);\n          } else {\n            if (current.r <= 0) {\n              current.r = 0;\n              continue;\n            }\n            current.x += Math.random() > 0.5 ? 1 : -1;\n            current.y += Math.random() > 0.5 ? 1 : -1;\n            current.r -= 0.05 * Math.random();\n            newArr.push(current);\n          }\n        }\n        newDataRef.current = newArr;\n        const ctx = canvasRef.current?.getContext(\"2d\");\n        if (ctx) {\n          ctx.clearRect(pos, 0, 800, 800);\n          newDataRef.current.forEach((t) => {\n            const { x: n, y: i, r: s, color: color } = t;\n            if (n > pos) {\n              ctx.beginPath();\n              ctx.rect(n, i, s, s);\n              ctx.fillStyle = color;\n              ctx.strokeStyle = color;\n              ctx.stroke();\n            }\n          });\n        }\n        if (newDataRef.current.length > 0) {\n          animateFrame(pos - 8);\n        } else {\n          setValue(\"\");\n          setAnimating(false);\n        }\n      });\n    };\n    animateFrame(start);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\" && !animating) {\n      vanishAndSubmit();\n    }\n  };\n\n  const vanishAndSubmit = () => {\n    setAnimating(true);\n    draw();\n\n    const value = inputRef.current?.value || \"\";\n    if (value && inputRef.current) {\n      const maxX = newDataRef.current.reduce(\n        (prev, current) => (current.x > prev ? current.x : prev),\n        0\n      );\n      animate(maxX);\n    }\n  };\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    vanishAndSubmit();\n    onSubmit && onSubmit(e);\n  };\n  return (\n    <form\n      className={cn(\n        \"w-full relative max-w-xl mx-auto bg-white dark:bg-zinc-800 h-12 rounded-full overflow-hidden shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),_0px_1px_0px_0px_rgba(25,28,33,0.02),_0px_0px_0px_1px_rgba(25,28,33,0.08)] transition duration-200\",\n        value && \"bg-gray-50\"\n      )}\n      onSubmit={handleSubmit}\n    >\n      <canvas\n        className={cn(\n          \"absolute pointer-events-none  text-base transform scale-50 top-[20%] left-2 sm:left-8 origin-top-left filter invert dark:invert-0 pr-20\",\n          !animating ? \"opacity-0\" : \"opacity-100\"\n        )}\n        ref={canvasRef}\n      />\n      <input\n        onChange={(e) => {\n          if (!animating) {\n            setValue(e.target.value);\n            onChange && onChange(e);\n          }\n        }}\n        onKeyDown={handleKeyDown}\n        ref={inputRef}\n        value={value}\n        type=\"text\"\n        className={cn(\n          \"w-full relative text-sm sm:text-base z-50 border-none dark:text-white bg-transparent text-black h-full rounded-full focus:outline-none focus:ring-0 pl-4 sm:pl-10 pr-20\",\n          animating && \"text-transparent dark:text-transparent\"\n        )}\n      />\n\n      <button\n        disabled={!value}\n        type=\"submit\"\n        className=\"absolute right-2 top-1/2 z-50 -translate-y-1/2 h-8 w-8 rounded-full disabled:bg-gray-100 bg-black dark:bg-zinc-900 dark:disabled:bg-zinc-800 transition duration-200 flex items-center justify-center\"\n      >\n        <motion.svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"24\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          className=\"text-gray-300 h-4 w-4\"\n        >\n          <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n          <motion.path\n            d=\"M5 12l14 0\"\n            initial={{\n              strokeDasharray: \"50%\",\n              strokeDashoffset: \"50%\",\n            }}\n            animate={{\n              strokeDashoffset: value ? 0 : \"50%\",\n            }}\n            transition={{\n              duration: 0.3,\n              ease: \"linear\",\n            }}\n          />\n          <path d=\"M13 18l6 -6\" />\n          <path d=\"M13 6l6 6\" />\n        </motion.svg>\n      </button>\n\n      <div className=\"absolute inset-0 flex items-center rounded-full pointer-events-none\">\n        <AnimatePresence mode=\"wait\">\n          {!value && (\n            <motion.p\n              initial={{\n                y: 5,\n                opacity: 0,\n              }}\n              key={`current-placeholder-${currentPlaceholder}`}\n              animate={{\n                y: 0,\n                opacity: 1,\n              }}\n              exit={{\n                y: -15,\n                opacity: 0,\n              }}\n              transition={{\n                duration: 0.3,\n                ease: \"linear\",\n              }}\n              className=\"dark:text-zinc-500 text-sm sm:text-base font-normal text-neutral-500 pl-4 sm:pl-12 text-left w-[calc(100%-2rem)] truncate\"\n            >\n              {placeholders[currentPlaceholder]}\n            </motion.p>\n          )}\n        </AnimatePresence>\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/components/ui/input.tsx"],"sourcesContent":["\"use client\";\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { useMotionTemplate, useMotionValue, motion } from \"motion/react\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    const radius = 100; // change this to increase the rdaius of the hover effect\n    const [visible, setVisible] = React.useState(false);\n\n    let mouseX = useMotionValue(0);\n    let mouseY = useMotionValue(0);\n\n    function handleMouseMove({ currentTarget, clientX, clientY }: any) {\n      let { left, top } = currentTarget.getBoundingClientRect();\n\n      mouseX.set(clientX - left);\n      mouseY.set(clientY - top);\n    }\n    return (\n      <motion.div\n        style={{\n          background: useMotionTemplate`\n        radial-gradient(\n          ${visible ? radius + \"px\" : \"0px\"} circle at ${mouseX}px ${mouseY}px,\n          #3b82f6,\n          transparent 80%\n        )\n      `,\n        }}\n        onMouseMove={handleMouseMove}\n        onMouseEnter={() => setVisible(true)}\n        onMouseLeave={() => setVisible(false)}\n        className=\"group/input rounded-lg p-[2px] transition duration-300\"\n      >\n        <input\n          type={type}\n          className={cn(\n            `shadow-input dark:placeholder-text-neutral-600 flex h-10 w-full rounded-md border-none bg-gray-50 px-3 py-2 text-sm text-black transition duration-400 group-hover/input:shadow-none file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-400 focus-visible:ring-[2px] focus-visible:ring-neutral-400 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800 dark:text-white dark:shadow-[0px_0px_1px_1px_#404040] dark:focus-visible:ring-neutral-600`,\n            className,\n          )}\n          ref={ref}\n          {...props}\n        />\n      </motion.div>\n    );\n  },\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AAAA;;;AAHA;;;;AAQA,MAAM,sBAAQ,GAAA,uLAAgB,SAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;;IAC9B,MAAM,SAAS,KAAK,yDAAyD;IAC7E,MAAM,CAAC,SAAS,WAAW,GAAG,qLAAc,CAAC;IAE7C,IAAI,SAAS,IAAA,mNAAc,EAAC;IAC5B,IAAI,SAAS,IAAA,mNAAc,EAAC;IAE5B,SAAS,gBAAgB,EAAE,aAAa,EAAE,OAAO,EAAE,OAAO,EAAO;QAC/D,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,cAAc,qBAAqB;QAEvD,OAAO,GAAG,CAAC,UAAU;QACrB,OAAO,GAAG,CAAC,UAAU;IACvB;IACA,qBACE,yMAAC,mNAAM,CAAC,GAAG;QACT,OAAO;YACL,YAAY,yNAAiB,CAAC;;UAE9B,EAAE,UAAU,SAAS,OAAO,MAAM,WAAW,EAAE,OAAO,GAAG,EAAE,OAAO;;;;MAItE,CAAC;QACC;QACA,aAAa;QACb,cAAc,IAAM,WAAW;QAC/B,cAAc,IAAM,WAAW;QAC/B,WAAU;kBAEV,cAAA,yMAAC;YACC,MAAM;YACN,WAAW,IAAA,iIAAE,EACX,CAAC,+fAA+f,CAAC,EACjgB;YAEF,KAAK;YACJ,GAAG,KAAK;;;;;;;;;;;AAIjB;;QApCe,mNAAc;QACd,mNAAc;;;;QADd,mNAAc;QACd,mNAAc;;;;AAqC/B,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/components/store/SellerVerifyModal.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { IconBuildingStore, IconId, IconLoader, IconCheck, IconExclamationCircle } from \"@tabler/icons-react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport QRCode from \"react-qr-code\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface SellerVerifyModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onVerified: (data: { upiId: string; name: string; email: string }) => void;\r\n    initialData?: { upiId: string; name: string; email?: string };\r\n}\r\n\r\nexport const SellerVerifyModal = ({ isOpen, onClose, onVerified, initialData }: SellerVerifyModalProps) => {\r\n    const [step, setStep] = useState(1);\r\n    const [secretCode, setSecretCode] = useState(\"\");\r\n    const [userEnteredCode, setUserEnteredCode] = useState(\"\");\r\n    const [sellerName, setSellerName] = useState(\"\");\r\n    const [upiId, setUpiId] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [isExpired, setIsExpired] = useState(false);\r\n    const [timeLeft, setTimeLeft] = useState(180);\r\n\r\n    // Reset/Initialize state on Open\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            if (initialData) {\r\n                setStep(2);\r\n                setSellerName(initialData.name);\r\n                setUpiId(initialData.upiId);\r\n                setEmail(initialData.email || \"\");\r\n            } else {\r\n                setStep(1);\r\n                setSellerName(\"\");\r\n                setUpiId(\"\");\r\n                setEmail(\"\");\r\n                setUserEnteredCode(\"\");\r\n                setIsExpired(false);\r\n                \r\n                // Generate code for Step 1\r\n                const code = Math.floor(100000 + Math.random() * 900000).toString();\r\n                setSecretCode(code);\r\n                setTimeLeft(180);\r\n            }\r\n        }\r\n    }, [isOpen, initialData]);\r\n\r\n    // Timer Logic for Step 1\r\n    useEffect(() => {\r\n        if (isOpen && step === 1 && !initialData) {\r\n            const interval = setInterval(() => {\r\n                setTimeLeft((prev) => {\r\n                    if (prev <= 1) {\r\n                        clearInterval(interval);\r\n                        setIsExpired(true);\r\n                        return 0;\r\n                    }\r\n                    return prev - 1;\r\n                });\r\n            }, 1000);\r\n            return () => clearInterval(interval);\r\n        }\r\n    }, [isOpen, step, initialData, secretCode]);\r\n\r\n    const formatTime = (seconds: number) => {\r\n        const mins = Math.floor(seconds / 60);\r\n        const secs = seconds % 60;\r\n        return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleVerifyCode = () => {\r\n        if (isExpired) return;\r\n        if (userEnteredCode !== secretCode) return;\r\n        setLoading(true);\r\n        setTimeout(() => {\r\n            setLoading(false);\r\n            setStep(2);\r\n        }, 1000);\r\n    };\r\n\r\n    const handleFinalize = () => {\r\n        if (!upiId.includes(\"@\") || !email.includes(\"@\")) return;\r\n        setLoading(true);\r\n        setTimeout(() => {\r\n            setLoading(false);\r\n            setStep(3);\r\n        }, 1500);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n            <div className=\"absolute inset-0 bg-black/60 backdrop-blur-md\" onClick={onClose} />\r\n            <div className=\"relative w-full max-w-md bg-white dark:bg-neutral-950 rounded-3xl p-8 shadow-2xl animate-in zoom-in-95 overflow-hidden\">\r\n                \r\n                {isExpired && step === 1 && (\r\n                    <div className=\"absolute inset-0 z-20 bg-white/95 dark:bg-neutral-950/95 flex flex-col items-center justify-center text-center p-6 animate-in fade-in\">\r\n                        <div className=\"w-20 h-20 bg-red-100 text-red-600 rounded-full flex items-center justify-center mb-4\">\r\n                            <IconExclamationCircle size={40} />\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-bold text-red-600\">Code Expired</h3>\r\n                        <p className=\"text-neutral-500 mt-2 mb-6 text-sm\">The verification code is valid for only 3 minutes. Please request a new one.</p>\r\n                        <button \r\n                            onClick={() => { onClose(); }} \r\n                            className=\"px-8 py-3 bg-neutral-900 dark:bg-white text-white dark:text-black font-bold rounded-xl hover:scale-105 transition-transform\"\r\n                        >\r\n                            Close & Try Again\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {step === 1 && (\r\n                    <div className=\"space-y-6 text-center\">\r\n                        <div>\r\n                            <div className=\"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                <IconId size={32} />\r\n                            </div>\r\n                            <h2 className=\"text-2xl font-bold\">Seller Verification</h2>\r\n                            <p className=\"text-sm text-neutral-500 mt-2\">Scan the QR code to get your unique verification code.</p>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex justify-center my-6\">\r\n                            <div className=\"p-4 bg-white border border-neutral-200 rounded-xl shadow-sm\">\r\n                                {/* Using imported QRCode component */}\r\n                                <QRCode value={secretCode} size={160} />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"text-xs font-bold uppercase text-neutral-500 mb-1 block\">Enter 6-Digit Code</label>\r\n                                <Input \r\n                                    className=\"text-center text-2xl tracking-widest font-bold\"\r\n                                    placeholder=\"0 0 0 0 0 0\" \r\n                                    maxLength={6}\r\n                                    value={userEnteredCode}\r\n                                    onChange={(e) => setUserEnteredCode(e.target.value)}\r\n                                    disabled={isExpired}\r\n                                />\r\n                            </div>\r\n                            <button \r\n                                onClick={handleVerifyCode}\r\n                                disabled={userEnteredCode.length !== 6 || loading || isExpired}\r\n                                className=\"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50 flex justify-center\"\r\n                            >\r\n                                {loading ? <IconLoader className=\"animate-spin\" /> : \"Verify Identity\"}\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"text-[10px] text-neutral-400 mt-2 flex items-center justify-center gap-1 font-mono\">\r\n                             Code expires in <span className={cn(\"font-bold\", timeLeft < 60 ? \"text-red-500\" : \"text-neutral-600\")}>{formatTime(timeLeft)}</span>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {step === 2 && (\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"text-center\">\r\n                            <h2 className=\"text-xl font-bold\">{initialData ? \"Update Details\" : \"Setup Payments\"}</h2>\r\n                            <p className=\"text-sm text-neutral-500 mt-1\">\r\n                                {initialData ? \"Update your seller profile.\" : \"Enter details to receive verified payments.\"}\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"text-xs font-bold uppercase text-neutral-500 mb-1 block\">Display Name (Shop Name)</label>\r\n                                <Input value={sellerName} onChange={e => setSellerName(e.target.value)} placeholder=\"e.g. Patil Farms\" />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"text-xs font-bold uppercase text-neutral-500 mb-1 block\">UPI ID (VPA)</label>\r\n                                <Input value={upiId} onChange={e => setUpiId(e.target.value)} placeholder=\"username@upi\" />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"text-xs font-bold uppercase text-neutral-500 mb-1 block\">Seller Email (For Verification)</label>\r\n                                <Input value={email} onChange={e => setEmail(e.target.value)} placeholder=\"seller@example.com\" />\r\n                            </div>\r\n                             <button \r\n                                onClick={handleFinalize}\r\n                                disabled={!upiId || !sellerName || !email.includes('@') || loading}\r\n                                className=\"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl shadow-lg shadow-green-500/30 transition-all flex justify-center\"\r\n                             >\r\n                                {loading ? <IconLoader className=\"animate-spin\" /> : (initialData ? \"Update Profile\" : \"Complete Setup\")}\r\n                             </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                 {step === 3 && (\r\n                       <div className=\"text-center py-6\">\r\n                           <div className=\"w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-in zoom-in\">\r\n                               <IconCheck size={40} stroke={4} />\r\n                           </div>\r\n                           <h2 className=\"text-2xl font-bold text-neutral-900 dark:text-white\">{initialData ? \"Profile Updated!\" : \"You are Verified!\"}</h2>\r\n                           <p className=\"text-neutral-500 mt-2 text-sm\">{initialData ? \"Your details have been successfully saved.\" : \"You can now list verified products on Agri Store Pro.\"}</p>\r\n                           <button \r\n                                onClick={() => { onVerified({ upiId, name: sellerName, email }); onClose(); }}\r\n                                className=\"mt-6 w-full py-3 bg-green-600 text-white font-bold rounded-xl\"\r\n                           >\r\n                               {initialData ? \"Back to Dashboard\" : \"Start Selling\"}\r\n                           </button>\r\n                       </div>\r\n                   )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 938, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/components/ui/file-upload.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\";\nimport React, { useRef, useState } from \"react\";\nimport { motion } from \"motion/react\";\nimport { IconUpload, IconX } from \"@tabler/icons-react\";\nimport { useDropzone } from \"react-dropzone\";\n\nconst mainVariant = {\n  initial: {\n    x: 0,\n    y: 0,\n  },\n  animate: {\n    x: 20,\n    y: -20,\n    opacity: 0.9,\n  },\n};\n\nconst secondaryVariant = {\n  initial: {\n    opacity: 0,\n  },\n  animate: {\n    opacity: 1,\n  },\n};\n\nexport const FileUpload = ({\n  onChange,\n}: {\n  onChange?: (files: File[]) => void;\n}) => {\n  const [files, setFiles] = useState<File[]>([]);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileChange = (newFiles: File[]) => {\n    setFiles((prevFiles) => [...prevFiles, ...newFiles]);\n    onChange && onChange(newFiles);\n  };\n\n  const handleRemoveFile = (index: number) => {\n    const newFiles = files.filter((_, i) => i !== index);\n    setFiles(newFiles);\n    onChange && onChange(newFiles);\n  };\n\n  const handleClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const { getRootProps, isDragActive } = useDropzone({\n    multiple: false,\n    noClick: true,\n    onDrop: handleFileChange,\n    onDropRejected: (error) => {\n      console.log(error);\n    },\n  });\n\n  return (\n    <div className=\"w-full\" {...getRootProps()}>\n      <motion.div\n        onClick={handleClick}\n        whileHover=\"animate\"\n        className=\"p-10 group/file block rounded-lg cursor-pointer w-full relative overflow-hidden\"\n      >\n        <input\n          ref={fileInputRef}\n          id=\"file-upload-handle\"\n          type=\"file\"\n          onChange={(e) => handleFileChange(Array.from(e.target.files || []))}\n          className=\"hidden\"\n        />\n        <div className=\"absolute inset-0 [mask-image:radial-gradient(ellipse_at_center,white,transparent)]\">\n          <GridPattern />\n        </div>\n        <div className=\"flex flex-col items-center justify-center\">\n          <p className=\"relative z-20 font-sans font-bold text-neutral-700 dark:text-neutral-300 text-base\">\n            Upload file\n          </p>\n          <p className=\"relative z-20 font-sans font-normal text-neutral-400 dark:text-neutral-400 text-base mt-2\">\n            Drag or drop your files here or click to upload\n          </p>\n          <div className=\"relative w-full mt-10 max-w-xl mx-auto\">\n            {files.length > 0 &&\n              files.map((file, idx) => (\n                <motion.div\n                  key={\"file\" + idx}\n                  layoutId={idx === 0 ? \"file-upload\" : \"file-upload-\" + idx}\n                  className={cn(\n                    \"relative overflow-hidden z-40 bg-white dark:bg-neutral-900 flex flex-col items-start justify-start md:h-24 p-4 mt-4 w-full mx-auto rounded-md\",\n                    \"shadow-sm\"\n                  )}\n                >\n                  <div className=\"absolute top-2 right-2 z-50\">\n                      <button \n                        onClick={(e) => { e.stopPropagation(); handleRemoveFile(idx); }} \n                        className=\"p-1 bg-neutral-100 dark:bg-neutral-800 hover:bg-red-100 hover:text-red-500 rounded-full text-neutral-500 transition-colors\"\n                      >\n                          <IconX size={14} />\n                      </button>\n                  </div>\n                  <div className=\"flex justify-between w-full items-center gap-4\">\n                    <motion.p\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      layout\n                      className=\"text-base text-neutral-700 dark:text-neutral-300 truncate max-w-xs\"\n                    >\n                      {file.name}\n                    </motion.p>\n                    <motion.p\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      layout\n                      className=\"rounded-lg px-2 py-1 w-fit shrink-0 text-sm text-neutral-600 dark:bg-neutral-800 dark:text-white shadow-input\"\n                    >\n                      {(file.size / (1024 * 1024)).toFixed(2)} MB\n                    </motion.p>\n                  </div>\n\n                  <div className=\"flex text-sm md:flex-row flex-col items-start md:items-center w-full mt-2 justify-between text-neutral-600 dark:text-neutral-400\">\n                    <motion.p\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      layout\n                      className=\"px-1 py-0.5 rounded-md bg-gray-100 dark:bg-neutral-800 \"\n                    >\n                      {file.type}\n                    </motion.p>\n\n                    <motion.p\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      layout\n                    >\n                      modified{\" \"}\n                      {new Date(file.lastModified).toLocaleDateString()}\n                    </motion.p>\n                  </div>\n                </motion.div>\n              ))}\n            {!files.length && (\n              <motion.div\n                layoutId=\"file-upload\"\n                variants={mainVariant}\n                transition={{\n                  type: \"spring\",\n                  stiffness: 300,\n                  damping: 20,\n                }}\n                className={cn(\n                  \"relative group-hover/file:shadow-2xl z-40 bg-white dark:bg-neutral-900 flex items-center justify-center h-32 mt-4 w-full max-w-[8rem] mx-auto rounded-md\",\n                  \"shadow-[0px_10px_50px_rgba(0,0,0,0.1)]\"\n                )}\n              >\n                {isDragActive ? (\n                  <motion.p\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    className=\"text-neutral-600 flex flex-col items-center\"\n                  >\n                    Drop it\n                    <IconUpload className=\"h-4 w-4 text-neutral-600 dark:text-neutral-400\" />\n                  </motion.p>\n                ) : (\n                  <IconUpload className=\"h-4 w-4 text-neutral-600 dark:text-neutral-300\" />\n                )}\n              </motion.div>\n            )}\n\n            {!files.length && (\n              <motion.div\n                variants={secondaryVariant}\n                className=\"absolute opacity-0 border border-dashed border-sky-400 inset-0 z-30 bg-transparent flex items-center justify-center h-32 mt-4 w-full max-w-[8rem] mx-auto rounded-md\"\n              ></motion.div>\n            )}\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nexport function GridPattern() {\n  const columns = 41;\n  const rows = 11;\n  return (\n    <div className=\"flex bg-gray-100 dark:bg-neutral-900 shrink-0 flex-wrap justify-center items-center gap-x-px gap-y-px  scale-105\">\n      {Array.from({ length: rows }).map((_, row) =>\n        Array.from({ length: columns }).map((_, col) => {\n          const index = row * columns + col;\n          return (\n            <div\n              key={`${col}-${row}`}\n              className={`w-10 h-10 flex shrink-0 rounded-[2px] ${\n                index % 2 === 0\n                  ? \"bg-gray-50 dark:bg-neutral-950\"\n                  : \"bg-gray-50 dark:bg-neutral-950 shadow-[0px_0px_1px_3px_rgba(255,255,255,1)_inset] dark:shadow-[0px_0px_1px_3px_rgba(0,0,0,1)_inset]\"\n              }`}\n            />\n          );\n        })\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1295, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/components/store/SellProductModal.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { IconX, IconExclamationCircle, IconLoader } from \"@tabler/icons-react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { FileUpload } from \"@/components/ui/file-upload\";\r\n\r\ninterface SellProductModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onListProduct: (product: any) => void;\r\n    sellerProfile: { name: string; upiId: string } | null;\r\n}\r\n\r\nexport const SellProductModal = ({ isOpen, onClose, onListProduct, sellerProfile }: SellProductModalProps) => {\r\n    const [newProduct, setNewProduct] = useState({ \r\n        name: \"\", \r\n        price: \"\", \r\n        category: \"Seeds\", \r\n        description: \"\", \r\n        stock: \"\",\r\n        unit: \"kg\",\r\n        imageFile: null as File | null \r\n    });\r\n    const [listingError, setListingError] = useState(\"\");\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleSubmit = async () => {\r\n         if(!newProduct.name || !newProduct.price || !newProduct.description || !newProduct.stock) {\r\n            setListingError(\"Please fill all required fields.\");\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n        setListingError(\"\");\r\n\r\n        try {\r\n            // Convert Image to Base64 for Persistence\r\n            let imageUrl = \"https://images.unsplash.com/photo-1530836369250-ef72a3f5cda8?q=80&w=300&h=300&auto=format&fit=crop\";\r\n            \r\n            if (newProduct.imageFile) {\r\n                imageUrl = await new Promise((resolve) => {\r\n                    const reader = new FileReader();\r\n                    reader.onloadend = () => resolve(reader.result as string);\r\n                    reader.readAsDataURL(newProduct.imageFile!);\r\n                });\r\n            }\r\n\r\n            const payload = {\r\n                name: newProduct.name,\r\n                price: newProduct.price,\r\n                category: newProduct.category,\r\n                image: imageUrl,\r\n                seller: sellerProfile ? sellerProfile.name : \"Verified Seller\",\r\n                sellerVpa: sellerProfile ? sellerProfile.upiId : \"\",\r\n                description: newProduct.description,\r\n                stock: newProduct.stock,\r\n                unit: newProduct.unit,\r\n                verifiedSeller: true\r\n            };\r\n\r\n            // Call API to persist\r\n            const response = await fetch('/api/store/products', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(payload)\r\n            });\r\n\r\n            if (!response.ok) throw new Error(\"Failed to save product\");\r\n\r\n            const savedProduct = await response.json();\r\n            \r\n            // Pass the SAVED product back to parent to update local list immediately\r\n            onListProduct(savedProduct);\r\n            \r\n            // Reset form\r\n            setNewProduct({ name: \"\", price: \"\", category: \"Seeds\", description: \"\", stock: \"\", unit: \"kg\", imageFile: null });\r\n            \r\n        } catch (err) {\r\n            console.error(err);\r\n            setListingError(\"Failed to list product. Please try again.\");\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n               <div className=\"absolute inset-0 bg-black/60 backdrop-blur-md\" onClick={onClose} />\r\n               <div className=\"relative w-full max-w-2xl bg-white dark:bg-neutral-950 rounded-3xl p-8 shadow-2xl animate-in zoom-in-95 max-h-[90vh] overflow-y-auto\">\r\n                   <div className=\"flex justify-between items-start mb-6\">\r\n                       <div>\r\n                           <h2 className=\"text-2xl font-bold\">List New Product</h2>\r\n                           <p className=\"text-sm text-neutral-500\">Add detailed information to attract buyers.</p>\r\n                       </div>\r\n                       <button onClick={onClose}><IconX /></button>\r\n                   </div>\r\n\r\n                   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                       <div className=\"space-y-4\">\r\n                           <div>\r\n                               <label className=\"text-xs font-bold uppercase text-neutral-500 mb-1 block\">Product Name *</label>\r\n                               <Input value={newProduct.name} onChange={e => setNewProduct({...newProduct, name: e.target.value})} placeholder=\"e.g. Fresh Potatoes\" />\r\n                           </div>\r\n                           <div className=\"grid grid-cols-2 gap-4\">\r\n                               <div>\r\n                                    <label className=\"text-xs font-bold uppercase text-neutral-500 mb-1 block\">Price (â‚¹) *</label>\r\n                                    <Input type=\"number\" value={newProduct.price} onChange={e => setNewProduct({...newProduct, price: e.target.value})} placeholder=\"00\" />\r\n                               </div>\r\n                               <div>\r\n                                    <label className=\"text-xs font-bold uppercase text-neutral-500 mb-1 block\">Per Unit</label>\r\n                                    <select \r\n                                        className=\"w-full h-10 px-3 rounded-md border border-neutral-200 dark:border-neutral-800 bg-transparent text-sm\"\r\n                                        value={newProduct.unit} \r\n                                        onChange={e => setNewProduct({...newProduct, unit: e.target.value})}\r\n                                    >\r\n                                        {[\"kg\", \"ton\", \"quintal\", \"piece\", \"packet\", \"liter\", \"acre\"].map(u => <option key={u} value={u}>{u}</option>)}\r\n                                    </select>\r\n                               </div>\r\n                           </div>\r\n                           \r\n                           <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold uppercase text-neutral-500 mb-1 block\">Stock Available *</label>\r\n                                    <Input type=\"number\" value={newProduct.stock} onChange={e => setNewProduct({...newProduct, stock: e.target.value})} placeholder=\"e.g. 50\" />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold uppercase text-neutral-500 mb-1 block\">Category</label>\r\n                                    <select \r\n                                        className=\"w-full h-10 px-3 rounded-md border border-neutral-200 dark:border-neutral-800 bg-transparent text-sm\"\r\n                                        value={newProduct.category} \r\n                                        onChange={e => setNewProduct({...newProduct, category: e.target.value})}\r\n                                    >\r\n                                        {[\"Seeds\", \"Fertilizers\", \"Tools\", \"Equipment\", \"Harvest\"].map(c => <option key={c} value={c}>{c}</option>)}\r\n                                    </select>\r\n                                </div>\r\n                           </div>\r\n\r\n                           <div>\r\n                               <label className=\"text-xs font-bold uppercase text-neutral-500 mb-1 block\">Description *</label>\r\n                               <textarea \r\n                                    className=\"w-full h-24 px-3 py-2 rounded-lg border border-neutral-200 dark:border-neutral-800 bg-transparent text-sm resize-none focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                                    placeholder=\"Describe quality, origin, uses...\"\r\n                                    value={newProduct.description}\r\n                                    onChange={e => setNewProduct({...newProduct, description: e.target.value})}\r\n                               />\r\n                           </div>\r\n                       </div>\r\n                       \r\n                       <div className=\"space-y-4\">\r\n                           <label className=\"text-xs font-bold uppercase text-neutral-500 block\">Product Image *</label>\r\n                           <FileUpload onChange={(files) => setNewProduct({...newProduct, imageFile: files[0]})}/>\r\n                           <p className=\"text-[10px] text-neutral-400 text-center\">Supported: JPG, PNG (Max 5MB)</p>\r\n                       </div>\r\n                   </div>\r\n                   \r\n                   {listingError && (\r\n                       <div className=\"mt-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center gap-2\">\r\n                           <IconExclamationCircle size={16} /> {listingError}\r\n                       </div>\r\n                   )}\r\n\r\n                   <div className=\"mt-8 pt-4 border-t border-neutral-100 dark:border-neutral-800 flex justify-end gap-3\">\r\n                       <button onClick={onClose} disabled={isSubmitting} className=\"px-6 py-2 rounded-lg font-semibold hover:bg-neutral-100 disabled:opacity-50\">Cancel</button>\r\n                       <button \r\n                            onClick={handleSubmit}\r\n                            disabled={isSubmitting}\r\n                            className=\"px-8 py-2 rounded-lg bg-green-600 text-white font-bold hover:bg-green-700 shadow-lg shadow-green-500/20 disabled:opacity-50 flex items-center gap-2\"\r\n                        >\r\n                            {isSubmitting && <IconLoader className=\"animate-spin\" size={16} />}\r\n                            Publish Listing\r\n                       </button>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AACA;AACA;;;AAJA;;;;;AAaO,MAAM,mBAAmB,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,aAAa,EAAE,aAAa,EAAyB;;IACrG,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,qLAAQ,EAAC;QACzC,MAAM;QACN,OAAO;QACP,UAAU;QACV,aAAa;QACb,OAAO;QACP,MAAM;QACN,WAAW;IACf;IACA,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAC;IAEjD,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,eAAe;QAChB,IAAG,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,WAAW,WAAW,IAAI,CAAC,WAAW,KAAK,EAAE;YACvF,gBAAgB;YAChB;QACJ;QAEA,gBAAgB;QAChB,gBAAgB;QAEhB,IAAI;YACA,0CAA0C;YAC1C,IAAI,WAAW;YAEf,IAAI,WAAW,SAAS,EAAE;gBACtB,WAAW,MAAM,IAAI,QAAQ,CAAC;oBAC1B,MAAM,SAAS,IAAI;oBACnB,OAAO,SAAS,GAAG,IAAM,QAAQ,OAAO,MAAM;oBAC9C,OAAO,aAAa,CAAC,WAAW,SAAS;gBAC7C;YACJ;YAEA,MAAM,UAAU;gBACZ,MAAM,WAAW,IAAI;gBACrB,OAAO,WAAW,KAAK;gBACvB,UAAU,WAAW,QAAQ;gBAC7B,OAAO;gBACP,QAAQ,gBAAgB,cAAc,IAAI,GAAG;gBAC7C,WAAW,gBAAgB,cAAc,KAAK,GAAG;gBACjD,aAAa,WAAW,WAAW;gBACnC,OAAO,WAAW,KAAK;gBACvB,MAAM,WAAW,IAAI;gBACrB,gBAAgB;YACpB;YAEA,sBAAsB;YACtB,MAAM,WAAW,MAAM,MAAM,uBAAuB;gBAChD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACzB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;YAElC,MAAM,eAAe,MAAM,SAAS,IAAI;YAExC,yEAAyE;YACzE,cAAc;YAEd,aAAa;YACb,cAAc;gBAAE,MAAM;gBAAI,OAAO;gBAAI,UAAU;gBAAS,aAAa;gBAAI,OAAO;gBAAI,MAAM;gBAAM,WAAW;YAAK;QAEpH,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC;YACd,gBAAgB;QACpB,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,yMAAC;QAAI,WAAU;;0BACR,yMAAC;gBAAI,WAAU;gBAAgD,SAAS;;;;;;0BACxE,yMAAC;gBAAI,WAAU;;kCACX,yMAAC;wBAAI,WAAU;;0CACX,yMAAC;;kDACG,yMAAC;wCAAG,WAAU;kDAAqB;;;;;;kDACnC,yMAAC;wCAAE,WAAU;kDAA2B;;;;;;;;;;;;0CAE5C,yMAAC;gCAAO,SAAS;0CAAS,cAAA,yMAAC,wOAAK;;;;;;;;;;;;;;;;kCAGpC,yMAAC;wBAAI,WAAU;;0CACX,yMAAC;gCAAI,WAAU;;kDACX,yMAAC;;0DACG,yMAAC;gDAAM,WAAU;0DAA0D;;;;;;0DAC3E,yMAAC,kJAAK;gDAAC,OAAO,WAAW,IAAI;gDAAE,UAAU,CAAA,IAAK,cAAc;wDAAC,GAAG,UAAU;wDAAE,MAAM,EAAE,MAAM,CAAC,KAAK;oDAAA;gDAAI,aAAY;;;;;;;;;;;;kDAEpH,yMAAC;wCAAI,WAAU;;0DACX,yMAAC;;kEACI,yMAAC;wDAAM,WAAU;kEAA0D;;;;;;kEAC3E,yMAAC,kJAAK;wDAAC,MAAK;wDAAS,OAAO,WAAW,KAAK;wDAAE,UAAU,CAAA,IAAK,cAAc;gEAAC,GAAG,UAAU;gEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAA;wDAAI,aAAY;;;;;;;;;;;;0DAErI,yMAAC;;kEACI,yMAAC;wDAAM,WAAU;kEAA0D;;;;;;kEAC3E,yMAAC;wDACG,WAAU;wDACV,OAAO,WAAW,IAAI;wDACtB,UAAU,CAAA,IAAK,cAAc;gEAAC,GAAG,UAAU;gEAAE,MAAM,EAAE,MAAM,CAAC,KAAK;4DAAA;kEAEhE;4DAAC;4DAAM;4DAAO;4DAAW;4DAAS;4DAAU;4DAAS;yDAAO,CAAC,GAAG,CAAC,CAAA,kBAAK,yMAAC;gEAAe,OAAO;0EAAI;+DAAd;;;;;;;;;;;;;;;;;;;;;;kDAKjG,yMAAC;wCAAI,WAAU;;0DACV,yMAAC;;kEACG,yMAAC;wDAAM,WAAU;kEAA0D;;;;;;kEAC3E,yMAAC,kJAAK;wDAAC,MAAK;wDAAS,OAAO,WAAW,KAAK;wDAAE,UAAU,CAAA,IAAK,cAAc;gEAAC,GAAG,UAAU;gEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAA;wDAAI,aAAY;;;;;;;;;;;;0DAEpI,yMAAC;;kEACG,yMAAC;wDAAM,WAAU;kEAA0D;;;;;;kEAC3E,yMAAC;wDACG,WAAU;wDACV,OAAO,WAAW,QAAQ;wDAC1B,UAAU,CAAA,IAAK,cAAc;gEAAC,GAAG,UAAU;gEAAE,UAAU,EAAE,MAAM,CAAC,KAAK;4DAAA;kEAEpE;4DAAC;4DAAS;4DAAe;4DAAS;4DAAa;yDAAU,CAAC,GAAG,CAAC,CAAA,kBAAK,yMAAC;gEAAe,OAAO;0EAAI;+DAAd;;;;;;;;;;;;;;;;;;;;;;kDAK9F,yMAAC;;0DACG,yMAAC;gDAAM,WAAU;0DAA0D;;;;;;0DAC3E,yMAAC;gDACI,WAAU;gDACV,aAAY;gDACZ,OAAO,WAAW,WAAW;gDAC7B,UAAU,CAAA,IAAK,cAAc;wDAAC,GAAG,UAAU;wDAAE,aAAa,EAAE,MAAM,CAAC,KAAK;oDAAA;;;;;;;;;;;;;;;;;;0CAKrF,yMAAC;gCAAI,WAAU;;kDACX,yMAAC;wCAAM,WAAU;kDAAqD;;;;;;kDACtE,yMAAC,gKAAU;wCAAC,UAAU,CAAC,QAAU,cAAc;gDAAC,GAAG,UAAU;gDAAE,WAAW,KAAK,CAAC,EAAE;4CAAA;;;;;;kDAClF,yMAAC;wCAAE,WAAU;kDAA2C;;;;;;;;;;;;;;;;;;oBAI/D,8BACG,yMAAC;wBAAI,WAAU;;0CACX,yMAAC,wRAAqB;gCAAC,MAAM;;;;;;4BAAM;4BAAE;;;;;;;kCAI7C,yMAAC;wBAAI,WAAU;;0CACX,yMAAC;gCAAO,SAAS;gCAAS,UAAU;gCAAc,WAAU;0CAA8E;;;;;;0CAC1I,yMAAC;gCACI,SAAS;gCACT,UAAU;gCACV,WAAU;;oCAET,8BAAgB,yMAAC,uPAAU;wCAAC,WAAU;wCAAe,MAAM;;;;;;oCAAO;;;;;;;;;;;;;;;;;;;;;;;;;AAO/F;GApKa;KAAA"}},
    {"offset": {"line": 1797, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/components/store/ProductDetailsModal.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { IconX, IconShoppingCart, IconQrcode, IconLoader, IconCheck, IconBuildingStore } from \"@tabler/icons-react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport Image from \"next/image\";\r\nimport QRCode from \"react-qr-code\";\r\n\r\ninterface ProductDetailsModalProps {\r\n    product: any | null;\r\n    onClose: () => void;\r\n    onAddToCart: (product: any) => void;\r\n    onBuyNow: (e: React.MouseEvent, product: any) => void; // New prop\r\n}\r\n\r\nexport const ProductDetailsModal = ({ product, onClose, onAddToCart, onBuyNow }: ProductDetailsModalProps) => {\r\n    \r\n    if (!product) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\">\r\n              <div className=\"absolute inset-0 bg-black/60 backdrop-blur-md\" onClick={onClose} />\r\n              <div className=\"relative w-full max-w-4xl bg-white dark:bg-neutral-900 rounded-3xl overflow-hidden shadow-2xl flex flex-col md:flex-row animate-in zoom-in-95 max-h-[90vh]\">\r\n                  \r\n                  {/* Left: Image */}\r\n                  <div className=\"hidden md:block w-1/2 bg-neutral-100 relative min-h-[400px]\">\r\n                      <Image \r\n                        src={product.image} \r\n                        alt={product.name}\r\n                        fill\r\n                        className=\"object-cover\"\r\n                      />\r\n                      <div className=\"absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded-full text-xs font-bold shadow-md\">\r\n                          {product.category}\r\n                      </div>\r\n                  </div>\r\n\r\n                  {/* Right: Info */}\r\n                  <div className=\"w-full md:w-1/2 p-6 md:p-8 flex flex-col bg-white dark:bg-neutral-900 overflow-y-auto\">\r\n                      <div className=\"flex justify-between items-start mb-4\">\r\n                          <h2 className=\"text-2xl font-bold text-neutral-900 dark:text-white leading-tight pr-4\">{product.name}</h2>\r\n                          <button onClick={onClose} className=\"p-1 hover:bg-neutral-100 rounded-full shrink-0\"><IconX /></button>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center gap-2 mb-6\">\r\n                            <span className=\"px-2 py-0.5 bg-blue-50 text-blue-700 text-[10px] font-bold uppercase rounded border border-blue-200\">\r\n                                Verified Seller\r\n                            </span>\r\n                            <span className=\"text-sm text-neutral-500 font-medium flex items-center gap-1\"><IconBuildingStore size={14}/> {product.seller}</span>\r\n                      </div>\r\n\r\n                        <div className=\"prose pro-sm dark:prose-invert text-neutral-600 dark:text-neutral-300 mb-8 flex-1\">\r\n                            <p>{product.description}</p>\r\n                            <ul className=\"list-disc pl-4 text-xs mt-4 space-y-1 text-neutral-500\">\r\n                                <li>Quality Checked</li>\r\n                                <li>In Stock: {product.stock} units</li>\r\n                                <li>Ships in 2-3 days</li>\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <div className=\"mt-auto border-t border-neutral-100 dark:border-neutral-800 pt-6\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div>\r\n                                    <span className=\"text-xs text-neutral-400 block font-bold uppercase\">Total Price</span>\r\n                                    <span className=\"text-3xl font-black text-neutral-900 dark:text-white\">â‚¹{product.price}<span className=\"text-sm font-normal text-neutral-500\">/{product.unit || 'unit'}</span></span>\r\n                                </div>\r\n                                <div className=\"flex gap-2\">\r\n                                        <button \r\n                                        onClick={() => onAddToCart(product)}\r\n                                        className=\"px-4 py-3 bg-neutral-100 hover:bg-neutral-200 text-neutral-800 font-bold rounded-xl transition-all\"\r\n                                        >\r\n                                        <IconShoppingCart size={20} />\r\n                                        </button>\r\n                                        <button \r\n                                        onClick={(e) => {\r\n                                            onClose(); // Close details\r\n                                            onBuyNow(e, product); // Trigger global checkout\r\n                                        }}\r\n                                        className=\"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl shadow-lg shadow-green-500/30 transition-all flex items-center gap-2\"\r\n                                        >\r\n                                        Buy Now\r\n                                        </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                  </div>\r\n              </div>\r\n           </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAEA;AAJA;;;;AAcO,MAAM,sBAAsB,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,QAAQ,EAA4B;IAErG,IAAI,CAAC,SAAS,OAAO;IAErB,qBACI,yMAAC;QAAI,WAAU;;0BACT,yMAAC;gBAAI,WAAU;gBAAgD,SAAS;;;;;;0BACxE,yMAAC;gBAAI,WAAU;;kCAGX,yMAAC;wBAAI,WAAU;;0CACX,yMAAC,uJAAK;gCACJ,KAAK,QAAQ,KAAK;gCAClB,KAAK,QAAQ,IAAI;gCACjB,IAAI;gCACJ,WAAU;;;;;;0CAEZ,yMAAC;gCAAI,WAAU;0CACV,QAAQ,QAAQ;;;;;;;;;;;;kCAKzB,yMAAC;wBAAI,WAAU;;0CACX,yMAAC;gCAAI,WAAU;;kDACX,yMAAC;wCAAG,WAAU;kDAA0E,QAAQ,IAAI;;;;;;kDACpG,yMAAC;wCAAO,SAAS;wCAAS,WAAU;kDAAiD,cAAA,yMAAC,wOAAK;;;;;;;;;;;;;;;;0CAG/F,yMAAC;gCAAI,WAAU;;kDACT,yMAAC;wCAAK,WAAU;kDAAsG;;;;;;kDAGtH,yMAAC;wCAAK,WAAU;;0DAA+D,yMAAC,4QAAiB;gDAAC,MAAM;;;;;;4CAAK;4CAAE,QAAQ,MAAM;;;;;;;;;;;;;0CAGjI,yMAAC;gCAAI,WAAU;;kDACX,yMAAC;kDAAG,QAAQ,WAAW;;;;;;kDACvB,yMAAC;wCAAG,WAAU;;0DACV,yMAAC;0DAAG;;;;;;0DACJ,yMAAC;;oDAAG;oDAAW,QAAQ,KAAK;oDAAC;;;;;;;0DAC7B,yMAAC;0DAAG;;;;;;;;;;;;;;;;;;0CAIZ,yMAAC;gCAAI,WAAU;0CACX,cAAA,yMAAC;oCAAI,WAAU;;sDACX,yMAAC;;8DACG,yMAAC;oDAAK,WAAU;8DAAqD;;;;;;8DACrE,yMAAC;oDAAK,WAAU;;wDAAuD;wDAAE,QAAQ,KAAK;sEAAC,yMAAC;4DAAK,WAAU;;gEAAuC;gEAAE,QAAQ,IAAI,IAAI;;;;;;;;;;;;;;;;;;;sDAEpK,yMAAC;4CAAI,WAAU;;8DACP,yMAAC;oDACD,SAAS,IAAM,YAAY;oDAC3B,WAAU;8DAEV,cAAA,yMAAC,yQAAgB;wDAAC,MAAM;;;;;;;;;;;8DAExB,yMAAC;oDACD,SAAS,CAAC;wDACN,WAAW,gBAAgB;wDAC3B,SAAS,GAAG,UAAU,0BAA0B;oDACpD;oDACA,WAAU;8DACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUzC;KA1Ea"}},
    {"offset": {"line": 2090, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/components/store/CartDrawer.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { IconShoppingCart, IconX, IconTrash, IconLock } from \"@tabler/icons-react\";\r\nimport Image from \"next/image\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface CartDrawerProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    cart: any[];\r\n    onRemove: (id: number) => void;\r\n    onCheckout: () => void;\r\n}\r\n\r\nexport const CartDrawer = ({ isOpen, onClose, cart, onRemove, onCheckout }: CartDrawerProps) => {\r\n    if (!isOpen) return null;\r\n\r\n    const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex justify-end\">\r\n               {/* Backdrop - High Z-index */}\r\n               <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\" onClick={onClose} />\r\n               \r\n               {/* Drawer - Top Z-index */}\r\n               <div className=\"relative w-full max-w-md bg-white dark:bg-neutral-950 h-full shadow-2xl p-6 flex flex-col animate-in slide-in-from-right duration-300 z-[110]\">\r\n                   <div className=\"flex justify-between items-center mb-6\">\r\n                       <h2 className=\"text-2xl font-bold flex items-center gap-2\"><IconShoppingCart /> Your Cart</h2>\r\n                       <button onClick={onClose} className=\"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-full\"><IconX /></button>\r\n                   </div>\r\n                   \r\n                   <div className=\"flex-1 overflow-y-auto space-y-4\">\r\n                       {cart.length === 0 ? (\r\n                           <div className=\"text-center text-neutral-400 mt-20\">\r\n                               <IconShoppingCart size={48} className=\"mx-auto mb-4 opacity-50\" />\r\n                               <p>Your cart is empty.</p>\r\n                           </div>\r\n                       ) : (\r\n                           cart.map(item => (\r\n                               <div key={item.id} className=\"flex gap-4 p-4 bg-neutral-50 dark:bg-neutral-900 rounded-xl border border-neutral-100 dark:border-neutral-800\">\r\n                                   <div className=\"relative h-16 w-16 bg-neutral-200 rounded-lg overflow-hidden shrink-0\">\r\n                                       <Image src={item.image} alt={item.name} fill className=\"object-cover\" />\r\n                                   </div>\r\n                                   <div className=\"flex-1\">\r\n                                       <h4 className=\"font-bold text-sm line-clamp-1\">{item.name}</h4>\r\n                                       <p className=\"text-neutral-500 text-xs mt-1\">Qty: {item.quantity}</p>\r\n                                       <div className=\"flex justify-between items-center mt-2\">\r\n                                            <span className=\"font-bold text-green-600\">â‚¹{item.price * item.quantity}</span>\r\n                                            <button onClick={() => onRemove(item.id)} className=\"text-red-500 hover:bg-red-50 p-1 rounded\"><IconTrash size={16} /></button>\r\n                                       </div>\r\n                                   </div>\r\n                               </div>\r\n                           ))\r\n                       )}\r\n                   </div>\r\n\r\n                   {cart.length > 0 && (\r\n                       <div className=\"mt-6 pt-6 border-t border-neutral-200 dark:border-neutral-800\">\r\n                           <div className=\"flex justify-between items-center mb-4\">\r\n                               <span className=\"text-neutral-500\">Total Amount</span>\r\n                               <span className=\"text-2xl font-black\">â‚¹{totalAmount}</span>\r\n                           </div>\r\n                           <button \r\n                                onClick={onCheckout}\r\n                                className=\"w-full py-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl flex items-center justify-center gap-2 shadow-lg shadow-green-500/30 transition-all\"\r\n                            >\r\n                               <IconLock size={20} /> Checkout to Pay\r\n                           </button>\r\n                           <p className=\"text-center text-[10px] text-neutral-400 mt-3 flex items-center justify-center gap-1\">\r\n                               <IconLock size={10} /> Secure P2P UPI Payment\r\n                           </p>\r\n                       </div>\r\n                   )}\r\n               </div>\r\n           </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAcO,MAAM,aAAa,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,UAAU,EAAmB;IACvF,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,cAAc,KAAK,MAAM,CAAC,CAAC,KAAK,OAAS,MAAO,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAG;IAEnF,qBACI,yMAAC;QAAI,WAAU;;0BAER,yMAAC;gBAAI,WAAU;gBAAgD,SAAS;;;;;;0BAGxE,yMAAC;gBAAI,WAAU;;kCACX,yMAAC;wBAAI,WAAU;;0CACX,yMAAC;gCAAG,WAAU;;kDAA6C,yMAAC,yQAAgB;;;;;oCAAG;;;;;;;0CAC/E,yMAAC;gCAAO,SAAS;gCAAS,WAAU;0CAAkE,cAAA,yMAAC,wOAAK;;;;;;;;;;;;;;;;kCAGhH,yMAAC;wBAAI,WAAU;kCACV,KAAK,MAAM,KAAK,kBACb,yMAAC;4BAAI,WAAU;;8CACX,yMAAC,yQAAgB;oCAAC,MAAM;oCAAI,WAAU;;;;;;8CACtC,yMAAC;8CAAE;;;;;;;;;;;uEAGP,KAAK,GAAG,CAAC,CAAA,qBACL,yMAAC;gCAAkB,WAAU;;kDACzB,yMAAC;wCAAI,WAAU;kDACX,cAAA,yMAAC,uJAAK;4CAAC,KAAK,KAAK,KAAK;4CAAE,KAAK,KAAK,IAAI;4CAAE,IAAI;4CAAC,WAAU;;;;;;;;;;;kDAE3D,yMAAC;wCAAI,WAAU;;0DACX,yMAAC;gDAAG,WAAU;0DAAkC,KAAK,IAAI;;;;;;0DACzD,yMAAC;gDAAE,WAAU;;oDAAgC;oDAAM,KAAK,QAAQ;;;;;;;0DAChE,yMAAC;gDAAI,WAAU;;kEACV,yMAAC;wDAAK,WAAU;;4DAA2B;4DAAE,KAAK,KAAK,GAAG,KAAK,QAAQ;;;;;;;kEACvE,yMAAC;wDAAO,SAAS,IAAM,SAAS,KAAK,EAAE;wDAAG,WAAU;kEAA2C,cAAA,yMAAC,oPAAS;4DAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;+BATnH,KAAK,EAAE;;;;;;;;;;oBAiB5B,KAAK,MAAM,GAAG,mBACX,yMAAC;wBAAI,WAAU;;0CACX,yMAAC;gCAAI,WAAU;;kDACX,yMAAC;wCAAK,WAAU;kDAAmB;;;;;;kDACnC,yMAAC;wCAAK,WAAU;;4CAAsB;4CAAE;;;;;;;;;;;;;0CAE5C,yMAAC;gCACI,SAAS;gCACT,WAAU;;kDAEX,yMAAC,iPAAQ;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAE1B,yMAAC;gCAAE,WAAU;;kDACT,yMAAC,iPAAQ;wCAAC,MAAM;;;;;;oCAAM;;;;;;;;;;;;;;;;;;;;;;;;;AAOrD;KA9Da"}},
    {"offset": {"line": 2372, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/components/store/CheckoutModal.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { IconX, IconMapPin, IconBuildingStore, IconCurrencyRupee, IconQrcode, IconArrowRight, IconCheck, IconLoader, IconCurrentLocation, IconEdit } from \"@tabler/icons-react\";\r\nimport Image from \"next/image\";\r\n\r\ninterface CartItem {\r\n    id: number;\r\n    name: string;\r\n    price: number;\r\n    quantity: number;\r\n    seller: string;\r\n    sellerVpa?: string;\r\n    sellerEmail?: string; \r\n    image: string;\r\n}\r\n\r\ninterface CheckoutModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    cart: CartItem[]; // Reverted to cart\r\n    onClearCart: () => void;\r\n    directBuyItem?: CartItem | null; \r\n}\r\n\r\nexport function CheckoutModal({ isOpen, onClose, cart, onClearCart, directBuyItem }: CheckoutModalProps) {\r\n    const [step, setStep] = useState<'address' | 'payment'>('address');\r\n    const [address, setAddress] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\"); \r\n    const [isAddressConfirmed, setIsAddressConfirmed] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    \r\n    // Determine which items to checkout\r\n    const itemsToCheckout = directBuyItem ? [directBuyItem] : cart;\r\n    const totalAmount = itemsToCheckout.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n\r\n    // ... (rest of imports/state same)\r\n\r\n    const handleFetchLocation = () => {\r\n         if (!navigator.geolocation) return alert(\"Geolocation not supported\");\r\n         navigator.geolocation.getCurrentPosition(\r\n             (pos) => {\r\n                 const { latitude, longitude } = pos.coords;\r\n                 const gpsString = `\\n[GPS: ${latitude.toFixed(5)}, ${longitude.toFixed(5)}]`;\r\n                 if(!address.includes(\"GPS:\")) setAddress(prev => prev + gpsString);\r\n             },\r\n             () => alert(\"Permission denied or unable to fetch location.\")\r\n         );\r\n    };\r\n \r\n    const handleConfirmAddress = (e: any) => {\r\n         e.preventDefault();\r\n         if (address.length < 10) return alert(\"Please enter a valid, complete address.\");\r\n         setIsAddressConfirmed(true);\r\n         localStorage.setItem(\"agronova_address\", address);\r\n    };\r\n\r\n    // ...\r\n    // Inside render:\r\n    // State for Verification\r\n    const [orderIds, setOrderIds] = useState<Record<string, string>>({});\r\n    const [userInputs, setUserInputs] = useState<Record<string, string>>({});\r\n    const [verifiedGroups, setVerifiedGroups] = useState<Record<string, boolean>>({});\r\n\r\n    useEffect(() => {\r\n        if(isOpen) {\r\n             setStep('address'); // Reset step on open\r\n             setUserInputs({});\r\n             setVerifiedGroups({});\r\n             const savedAddr = localStorage.getItem(\"agronova_address\");\r\n             const savedEmail = localStorage.getItem(\"agronova_email\");\r\n             if (savedAddr) {\r\n                 setAddress(savedAddr);\r\n                 setIsAddressConfirmed(true);\r\n             }\r\n             if (savedEmail) setEmail(savedEmail);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    const handleAddressSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        \r\n        // Validation: Prevent Self-Purchase\r\n        const isSelfPurchase = itemsToCheckout.some(item => \r\n            item.sellerEmail && item.sellerEmail.trim().toLowerCase() === email.trim().toLowerCase()\r\n        );\r\n\r\n        if (isSelfPurchase) {\r\n             alert(\"Restriction: You cannot buy items from yourself (Buyer Email matches Seller Email). Please use a different email.\");\r\n             return;\r\n        }\r\n\r\n        if(address.length > 5 && email.includes('@')) {\r\n            localStorage.setItem(\"agronova_address\", address);\r\n            localStorage.setItem(\"agronova_email\", email);\r\n            setIsAddressConfirmed(true);\r\n            setStep('payment');\r\n        } else {\r\n             alert(\"Please enter a valid address and email.\");\r\n        }\r\n    };\r\n\r\n    // Group items by seller\r\n    const sellerGroups = itemsToCheckout.reduce((groups, item) => {\r\n        const vpa = item.sellerVpa || \"unknown@upi\";\r\n        if (!groups[vpa]) {\r\n            groups[vpa] = {\r\n                sellerName: item.seller,\r\n                vpa: vpa,\r\n                items: [],\r\n                total: 0\r\n            };\r\n        }\r\n        groups[vpa].items.push(item);\r\n        groups[vpa].total += item.price * item.quantity;\r\n        return groups;\r\n    }, {} as Record<string, { sellerName: string; vpa: string; items: CartItem[]; total: number }>);\r\n\r\n    // Generate Order IDs when groups change\r\n    useEffect(() => {\r\n        const newOrderIds: Record<string, string> = {};\r\n        Object.keys(sellerGroups).forEach(vpa => {\r\n             // Generate a simple 4-digit numeric code for easier entry\r\n             // Prefix ORD to make it look official\r\n            newOrderIds[vpa] = \"ORD-\" + Math.floor(1000 + Math.random() * 9000).toString();\r\n        });\r\n        setOrderIds(newOrderIds);\r\n    }, [itemsToCheckout.length]);\r\n\r\n\r\n    \r\n    // Construct UPI URL helper\r\n    // Construct UPI URL helper\r\n    const getUpiUrl = (vpa: string, name: string, amount: number, orderId: string) => {\r\n        // Standard Format: upi://pay?pa=...&pn=...&am=...&cu=INR&tn=...\r\n        const params = new URLSearchParams();\r\n        params.append(\"pa\", vpa);\r\n        params.append(\"pn\", name); // Payee Name\r\n        params.append(\"am\", amount.toFixed(2)); // Strict Decimal\r\n        params.append(\"cu\", \"INR\");\r\n        params.append(\"tn\", `Order ${orderId}`); // Note: Visible to user for verification\r\n        params.append(\"tr\", orderId); // Ref ID\r\n        \r\n        return `upi://pay?${params.toString()}`;\r\n    };\r\n\r\n    const allVerified = Object.keys(sellerGroups).every(vpa => verifiedGroups[vpa]);\r\n\r\n    const handleVerifyParams = (vpa: string, input: string) => {\r\n        setUserInputs(prev => ({...prev, [vpa]: input}));\r\n        \r\n        // Validation: Just check if it looks like a VPA (contains @) and length > 3\r\n        if (input.includes(\"@\") && input.length > 5) {\r\n            setVerifiedGroups(prev => ({...prev, [vpa]: true}));\r\n        } else {\r\n            setVerifiedGroups(prev => ({...prev, [vpa]: false}));\r\n        }\r\n    };\r\n\r\n    const handleCompleteOrder = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // Call Real API\r\n            const res = await fetch('/api/store/order/create', {\r\n                method: 'POST',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    orderId: \"ORD-\" + Math.floor(Math.random() * 10000), // Main ID\r\n                    cart: itemsToCheckout,\r\n                    total: totalAmount,\r\n                    address: address,\r\n                    sellerGroups: sellerGroups,\r\n                    userInputs: userInputs, \r\n                    buyerEmail: email \r\n                })\r\n            });\r\n            \r\n            const data = await res.json();\r\n            \r\n            if(data.success) {\r\n                alert(\"Order Placed! Please check your email for the invoice. The seller will verify your payment shortly.\");\r\n                if (directBuyItem) {\r\n                    onClose();\r\n                } else {\r\n                    onClearCart(); \r\n                }\r\n            } else {\r\n                alert(\"Failed to place order. \" + (data.error || \"\"));\r\n            }\r\n        } catch(e) {\r\n            alert(\"Network error.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[120] flex items-center justify-center p-4\">\r\n            <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose} />\r\n            \r\n            <div className=\"relative bg-white dark:bg-neutral-900 w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\">\r\n                \r\n                {/* Header */}\r\n                <div className=\"p-6 border-b border-neutral-100 dark:border-neutral-800 flex justify-between items-center bg-neutral-50/50 dark:bg-neutral-900/50\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-black text-neutral-800 dark:text-white\">\r\n                            {directBuyItem ? \"Buy Now\" : \"Checkout\"}\r\n                        </h2>\r\n                        <p className=\"text-sm text-neutral-500\">Complete your purchase directly with farmers.</p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-white dark:hover:bg-neutral-800 rounded-full transition-colors\">\r\n                        <IconX size={24} />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-6\">\r\n                    {step === 'address' ? (\r\n                        <div className=\"space-y-6\">\r\n                            {/* ... Address Form ... */}\r\n                            <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-2xl border border-blue-100 dark:border-blue-900/30 flex gap-3 text-blue-700 dark:text-blue-300\">\r\n                                <IconMapPin className=\"shrink-0\" />\r\n                                <div>\r\n                                    <h3 className=\"font-bold\">Delivery Address</h3>\r\n                                    <p className=\"text-sm opacity-80\">Please provide your full delivery address where the farmers will ship your produce.</p>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <form onSubmit={handleAddressSubmit} className=\"space-y-4\">\r\n                                <div>\r\n                                    <div className=\"flex justify-between items-center mb-2\">\r\n                                        <label className=\"block text-sm font-bold text-neutral-700 dark:text-neutral-300\">Full Address</label>\r\n                                        <button type=\"button\" onClick={handleFetchLocation} className=\"text-[10px] bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded flex items-center gap-1 font-bold hover:bg-blue-200 transition-colors\">\r\n                                            <IconCurrentLocation size={12} /> Use GPS\r\n                                        </button>\r\n                                   </div>\r\n                                   <textarea \r\n                                       value={address}\r\n                                       onChange={(e) => setAddress(e.target.value)}\r\n                                       disabled={isAddressConfirmed}\r\n                                       placeholder=\"House No, Street, Village/City, Pincode...\"\r\n                                       className={`w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-800 border-none focus:ring-2 focus:ring-green-500 min-h-[120px] resize-none ${isAddressConfirmed ? \"opacity-60 cursor-not-allowed\" : \"\"}`}\r\n                                       required\r\n                                   />\r\n                                   <div className=\"flex justify-end mt-2\">\r\n                                        {!isAddressConfirmed ? (\r\n                                            <button type=\"button\" onClick={handleConfirmAddress} className=\"text-xs bg-neutral-800 dark:bg-neutral-700 text-white px-4 py-2 rounded-lg font-bold hover:bg-black transition-colors\">\r\n                                                Confirm & Save\r\n                                            </button>\r\n                                        ) : (\r\n                                            <button type=\"button\" onClick={() => setIsAddressConfirmed(false)} className=\"text-xs text-neutral-500 hover:text-green-600 font-bold flex items-center gap-1\">\r\n                                                <IconEdit size={12} /> Edit Address\r\n                                            </button>\r\n                                        )}\r\n                                   </div>\r\n                                    <p className=\"text-xs text-neutral-400 mt-1\">We will send your invoice and order updates here.</p>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-bold mb-2 text-neutral-700 dark:text-neutral-300\">Your Email Address</label>\r\n                                    <input \r\n                                        type=\"email\"\r\n                                        value={email}\r\n                                        onChange={(e) => setEmail(e.target.value)}\r\n                                        placeholder=\"buyer@example.com\"\r\n                                        className=\"w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-800 border-none focus:ring-2 focus:ring-green-500\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <button \r\n                                    type=\"submit\"\r\n                                    disabled={!isAddressConfirmed}\r\n                                    className={`w-full font-bold py-4 rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg ${isAddressConfirmed ? \"bg-green-600 hover:bg-green-700 text-white shadow-green-600/20\" : \"bg-neutral-300 text-neutral-500 cursor-not-allowed\"}`}\r\n                                >\r\n                                    Proceed to Payment <IconArrowRight size={20} />\r\n                                </button>\r\n                            </form>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-8\">\r\n                            {/* Address Summary */}\r\n                            <div className=\"flex justify-between items-start bg-neutral-50 dark:bg-neutral-800 p-4 rounded-xl\">\r\n                                <div>\r\n                                    <p className=\"text-xs font-bold text-neutral-400 uppercase tracking-wider mb-1\">Delivering To</p>\r\n                                    <p className=\"text-neutral-700 dark:text-neutral-300 font-medium\">{address}</p>\r\n                                </div>\r\n                                <button onClick={() => setStep('address')} className=\"text-sm text-green-600 font-bold hover:underline\">Change</button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                <h3 className=\"font-bold text-lg text-neutral-900 dark:text-white flex items-center gap-2\"><IconCurrencyRupee className=\"text-green-600\" /> Payments</h3>\r\n                                <div className=\"bg-amber-50 dark:bg-amber-900/20 p-3 rounded-lg border border-amber-100 dark:border-amber-800 text-sm text-amber-800 dark:text-amber-200\">\r\n                                    <strong>Step 1:</strong> Scan QR & Pay via UPI. <br/>\r\n                                    <strong>Step 2:</strong> Find your <strong>UPI ID</strong> in your Payment App (e.g. user@oksbi). <br/>\r\n                                    <strong>Step 3:</strong> Enter your <strong>FULL UPI ID</strong> below for verification.\r\n                                </div>\r\n                                \r\n                                {Object.values(sellerGroups).map((group, idx) => {\r\n                                    const currentId = orderIds[group.vpa] || \"Generating...\";\r\n                                    const isVerified = verifiedGroups[group.vpa];\r\n                                    const qrUrl = getUpiUrl(group.vpa, group.sellerName, group.total, currentId);\r\n\r\n                                    return (\r\n                                    <div key={idx} className={`border rounded-2xl overflow-hidden transition-all ${isVerified ? \"border-green-500 bg-green-50/10\" : \"border-neutral-200 dark:border-neutral-800\"}`}>\r\n                                        <div className=\"bg-neutral-50 dark:bg-neutral-900 p-4 border-b border-neutral-200 dark:border-neutral-800 flex justify-between items-center\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div className=\"h-10 w-10 bg-white dark:bg-neutral-800 rounded-full flex items-center justify-center border border-neutral-200 dark:border-neutral-700\">\r\n                                                    <IconBuildingStore size={20} className=\"text-neutral-600 dark:text-neutral-400\" />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h4 className=\"font-bold text-neutral-800 dark:text-white\">{group.sellerName}</h4>\r\n                                                    <p className=\"text-xs text-neutral-500\">{group.items.length} items â€¢ Total: â‚¹{group.total}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            {isVerified ? (\r\n                                                <div className=\"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1\">\r\n                                                    <IconCheck size={12} /> Verified\r\n                                                </div>\r\n                                            ) : (\r\n                                                <div className=\"bg-neutral-200 text-neutral-600 px-3 py-1 rounded-full text-xs font-bold\">\r\n                                                    Pending\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        \r\n                                        <div className=\"p-4 flex flex-col md:flex-row gap-6\">\r\n                                            {/* QR Code Section */}\r\n                                            <div className=\"flex-1 flex flex-col items-center justify-center p-4 bg-white dark:bg-neutral-950 rounded-xl border border-dashed border-neutral-300 dark:border-neutral-700 relative\">\r\n                                                <div className=\"relative h-40 w-40 mb-3\">\r\n                                                    <Image \r\n                                                        src={`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(qrUrl)}`}\r\n                                                        alt=\"Payment QR\"\r\n                                                        fill\r\n                                                        className={`object-contain transition-opacity ${isVerified ? \"opacity-20\" : \"opacity-100\"}`}\r\n                                                        unoptimized\r\n                                                    />\r\n                                                    {isVerified && (\r\n                                                        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                                            <IconCheck size={60} className=\"text-green-500\" />\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                                <p className=\"text-xs text-center text-neutral-400\">Scan to pay <strong>â‚¹{group.total}</strong></p>\r\n                                            </div>\r\n\r\n                                            {/* Verification Input */}\r\n                                            <div className=\"flex-1 flex flex-col justify-center space-y-3\">\r\n                                                <div className=\"space-y-1\">\r\n                                                     <label className=\"text-xs font-bold text-neutral-500 uppercase\">Your UPI ID (Payment Source)</label>\r\n                                                     <p className=\"text-[10px] text-neutral-400\">Enter the <strong>UPI ID</strong> you used to pay (e.g. user@oksbi).</p>\r\n                                                </div>\r\n                                                \r\n                                                <div className=\"flex gap-2\">\r\n                                                    <input \r\n                                                        type=\"text\" \r\n                                                        placeholder=\"e.g. user@oksbi\"\r\n                                                        className={`flex-1 bg-neutral-100 dark:bg-neutral-800 border-none rounded-lg px-3 py-2 text-sm font-bold focus:ring-2 ${isVerified ? \"text-green-600 ring-green-500\" : \"focus:ring-blue-500\"}`}\r\n                                                        value={userInputs[group.vpa] || \"\"}\r\n                                                        onChange={(e) => handleVerifyParams(group.vpa, e.target.value)}\r\n                                                    />\r\n                                                </div>\r\n                                                {isVerified && <p className=\"text-xs text-green-600 font-bold\">Valid format</p>}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    )\r\n                                })}\r\n                            </div>\r\n                            \r\n                            <div className=\"pt-4\">\r\n                                <button \r\n                                    onClick={handleCompleteOrder}\r\n                                    disabled={!allVerified || loading}\r\n                                    className={`w-full py-4 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${\r\n                                        allVerified \r\n                                        ? \"bg-green-600 text-white shadow-lg shadow-green-600/30 hover:bg-green-700 hover:scale-[1.02]\" \r\n                                        : \"bg-neutral-200 text-neutral-400 cursor-not-allowed\"\r\n                                    }`}\r\n                                >\r\n                                    {loading ? <IconLoader className=\"animate-spin\" /> : <IconCheck size={20} />}\r\n                                    {loading ? \"Processing...\" : \"Complete Order\"}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3269, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dhanush/agronova/app/dashboard/store/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { IconShoppingCart, IconPlus, IconBuildingStore, IconCheck, IconLoader, IconTrash, IconShieldCheck, IconEdit } from \"@tabler/icons-react\";\r\nimport Image from \"next/image\";\r\nimport { PlaceholdersAndVanishInput } from \"@/components/ui/placeholders-and-vanish-input\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n// Components\r\nimport { SellerVerifyModal } from \"@/components/store/SellerVerifyModal\";\r\nimport { SellProductModal } from \"@/components/store/SellProductModal\";\r\nimport { ProductDetailsModal } from \"@/components/store/ProductDetailsModal\";\r\nimport { CartDrawer } from \"@/components/store/CartDrawer\";\r\nimport { CheckoutModal } from \"@/components/store/CheckoutModal\";\r\n\r\ninterface Product {\r\n    id: number;\r\n    name: string;\r\n    category: string;\r\n    price: number;\r\n    image: string;\r\n    seller: string;\r\n    sellerVpa?: string; \r\n    description: string;\r\n    stock: number;\r\n    verifiedSeller: boolean;\r\n    unit?: string;\r\n}\r\n\r\ninterface CartItem extends Product {\r\n    quantity: number;\r\n}\r\n\r\ninterface SellerProfile {\r\n    name: string;\r\n    upiId: string;\r\n    email: string;\r\n}\r\n\r\nexport default function AgriStorePage() {\r\n    // --- Data State ---\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Fetch products on mount\r\n    useEffect(() => {\r\n        fetchProducts();\r\n    }, []);\r\n\r\n    const fetchProducts = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch('/api/store/products');\r\n            if(res.ok) {\r\n                const data = await res.json();\r\n                setProducts(data);\r\n                setFilteredProducts(data);\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Failed to fetch products\", e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const [cart, setCart] = useState<CartItem[]>([]);\r\n    \r\n    // --- UI State ---\r\n    const [isCartOpen, setIsCartOpen] = useState(false);\r\n    const [selectedCategory, setSelectedCategory] = useState(\"All\");\r\n    const [filteredProducts, setFilteredProducts] = useState<Product[]>([]);\r\n\r\n    // Filter Logic\r\n    const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        filterData(e.target.value, selectedCategory);\r\n    };\r\n    const handleCategoryChange = (cat: string) => {\r\n        setSelectedCategory(cat);\r\n        filterData(\"\", cat); \r\n    };\r\n    const filterData = (search: string, category: string) => {\r\n        const lowerSearch = search.toLowerCase();\r\n        setFilteredProducts(products.filter(p => \r\n            (category === \"All\" || p.category === category) &&\r\n            (p.name.toLowerCase().includes(lowerSearch) || p.seller.toLowerCase().includes(lowerSearch))\r\n        ));\r\n    };\r\n\r\n    // --- Seller Logic ---\r\n    const [isSellerVerified, setIsSellerVerified] = useState(false);\r\n    const [isVerifyModalOpen, setIsVerifyModalOpen] = useState(false);\r\n    const [sellerProfile, setSellerProfile] = useState<SellerProfile | null>(null);\r\n    const ADMIN_UPIS = [\"admin@agronova\", \"dhanush@agronova\"]; // Example admin list\r\n    const isAdmin = sellerProfile && ADMIN_UPIS.includes(sellerProfile.upiId);\r\n\r\n    // Seller Persistence\r\n    useEffect(() => {\r\n        const savedProfile = localStorage.getItem(\"seller_profile\"); // Changed key\r\n        if (savedProfile) {\r\n            try {\r\n                const parsed = JSON.parse(savedProfile);\r\n                setSellerProfile(parsed);\r\n                setIsSellerVerified(true);\r\n            } catch (e) {\r\n                console.error(\"Failed to parse seller profile\", e);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    const handleVerified = (data: { upiId: string; name: string; email: string }) => { // Added email to data type\r\n        setIsSellerVerified(true);\r\n        setSellerProfile(data);\r\n        localStorage.setItem(\"seller_profile\", JSON.stringify(data)); // Changed key\r\n        alert(\"Welcome, \" + data.name + \"! You can now sell products.\"); // Added alert\r\n    };\r\n\r\n    const handleDeleteProduct = async (e: React.MouseEvent, productId: number) => {\r\n        e.stopPropagation();\r\n        if (!confirm(\"Are you sure you want to delete this product?\")) return;\r\n\r\n        try {\r\n            const res = await fetch(`/api/store/products?id=${productId}`, {\r\n                method: \"DELETE\",\r\n            });\r\n\r\n            if (res.ok) {\r\n                setProducts(prev => prev.filter(p => p.id !== productId));\r\n                setFilteredProducts(prev => prev.filter(p => p.id !== productId));\r\n            } else {\r\n                alert(\"Failed to delete product\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error deleting product:\", error);\r\n            alert(\"Error deleting product\");\r\n        }\r\n    };\r\n    \r\n    \r\n    // --- Sell Item Logic ---\r\n    const [isSellModalOpen, setIsSellModalOpen] = useState(false);\r\n\r\n    const handleListProduct = (newProduct: Product) => {\r\n        // The modal returns the Saved Product.\r\n        // We just need to attach the correct Seller VPA to it locally for display immediately\r\n        // (Though technically the API saved it, we might want to update the DB entry with proper seller name/VPA if we auth properly later)\r\n        // For now, since we have no Auth on backend, we update the local object display properties\r\n        // actually the modal already posted it.\r\n        \r\n        // But wait, the API 'POST' just saves whatever we sent. \r\n        // We should probably rely on re-fetching or optimistic update.\r\n        // Let's attach the profile data to the object returned by DB for local consistency\r\n        \r\n        const productWithProfile = {\r\n            ...newProduct,\r\n            seller: sellerProfile ? sellerProfile.name : newProduct.seller,\r\n            sellerVpa: sellerProfile ? sellerProfile.upiId : \"seller@upi\",\r\n            sellerEmail: sellerProfile ? sellerProfile.email : \"seller@agronova.com\" \r\n        };\r\n\r\n        // Note: Ideally we want to UPDATE the backend with this profile info too, \r\n        // but for this MVP \"Pre-Auth\" flow, we just display it correctly locally.\r\n        // A robust solution passes seller info to the API in the POST itself.\r\n        // Let's assumes the Modal POST included what it could, and we override here for display.\r\n        \r\n        // Actually, to make it persistent properly, the Modal SHOULD have sent the right Seller Name/VPA.\r\n        // But the Modal doesn't know the SellerProfile (it's in parent state).\r\n        // REF: I need to pass sellerProfile TO the modal so it sends correct data to API.\r\n        \r\n        // RE-PLAN: In this render cycle, I can't easily change the Modal props without editing it again.\r\n        // Hack: I will treat the received product as \"semi-authentic\" and just add it to list.\r\n        // Better: I will update the Modal to accept `sellerProfile` prop in next step if needed, \r\n        // BUT actually, the user just wants persistence. \r\n        // Let's stick to: Modal adds product -> We add to list. \r\n        // The persistent JSON won't have the VPA unless I pass it. \r\n        // IMPORTANT: I will update `SellProductModal` usage below to include `sellerProfile` if I can, but I can't easily.\r\n        // Actually, let's just refresh the list.\r\n        \r\n        setProducts([productWithProfile, ...products]);\r\n        setFilteredProducts([productWithProfile, ...filteredProducts]);\r\n        setIsSellModalOpen(false);\r\n    };\r\n\r\n    // --- Product Details & Checkout ---\r\n    const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\r\n\r\n    // --- Cart Logic ---\r\n    const addToCart = (product: Product) => {\r\n        setCart(prev => {\r\n            const existing = prev.find(p => p.id === product.id);\r\n            if (existing) return prev.map(p => p.id === product.id ? { ...p, quantity: p.quantity + 1 } : p);\r\n            return [...prev, { ...product, quantity: 1 }];\r\n        });\r\n        // Removed auto-open: setIsCartOpen(true);\r\n        alert(\"Item added to cart!\");\r\n    };\r\n\r\n    const removeFromCart = (id: number) => {\r\n        setCart(prev => prev.filter(p => p.id !== id));\r\n    };\r\n\r\n    const [isCheckoutOpen, setIsCheckoutOpen] = useState(false);\r\n    const [directBuyItem, setDirectBuyItem] = useState<CartItem | null>(null);\r\n\r\n    const handleBuyNow = (e: React.MouseEvent, product: Product) => {\r\n        e.stopPropagation();\r\n        setDirectBuyItem({ ...product, quantity: 1 });\r\n        setIsCheckoutOpen(true);\r\n    };\r\n\r\n    // Close checkout handler safely\r\n    const handleCloseCheckout = () => {\r\n        setIsCheckoutOpen(false);\r\n        setDirectBuyItem(null); // Reset direct buy item\r\n    };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto space-y-8 relative min-h-screen pb-20\">\r\n      {/* --- Header Section (Zen Search) --- */}\r\n      <div className=\"flex flex-col gap-6\">\r\n        <div className=\"flex justify-between items-end\">\r\n             <div>\r\n                <h1 className=\"text-4xl font-black text-neutral-900 dark:text-white tracking-tight\">Agri Store <span className=\"text-green-600\">Pro</span></h1>\r\n                <p className=\"text-neutral-500 font-medium mt-1\">India's most trusted marketplace for farmers.</p>\r\n             </div>\r\n             <div className=\"flex items-center gap-3\">\r\n                 {/* Seller Status */}\r\n                 {isSellerVerified ? (\r\n                     <div className=\"flex gap-2\">\r\n                        <button \r\n                           onClick={() => setIsSellModalOpen(true)}\r\n                           className=\"bg-neutral-900 dark:bg-white text-white dark:text-black px-5 py-2.5 rounded-xl font-bold hover:shadow-xl transition-all flex items-center gap-2\"\r\n                        >\r\n                           <IconPlus stroke={3} size={18} /> Sell Product\r\n                        </button>\r\n                        <button \r\n                           onClick={() => setIsVerifyModalOpen(true)}\r\n                           className=\"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 px-3 py-2.5 rounded-xl font-bold hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-all\"\r\n                           title=\"Edit Seller Profile\"\r\n                        >\r\n                           <IconEdit size={20} />\r\n                        </button>\r\n                     </div>\r\n                 ) : (\r\n                     <button \r\n                        onClick={() => setIsVerifyModalOpen(true)}\r\n                        className=\"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-xl font-bold shadow-lg shadow-blue-500/30 transition-all flex items-center gap-2\"\r\n                     >\r\n                         <IconBuildingStore size={20} /> Become a Seller\r\n                     </button>\r\n                 )}\r\n\r\n\r\n\r\n                 <button \r\n                    onClick={() => setIsCartOpen(true)}\r\n                    className=\"relative p-3 bg-white dark:bg-neutral-800 rounded-xl border border-neutral-200 dark:border-neutral-700 hover:bg-gray-50 transition-colors\"\r\n                 >\r\n                    <IconShoppingCart size={24} className=\"text-neutral-700 dark:text-neutral-200\" />\r\n                    {cart.length > 0 && <span className=\"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center\">{cart.length}</span>}\r\n                 </button>\r\n             </div>\r\n        </div>\r\n\r\n        {/* Zen Input */}\r\n        <div className=\"w-full max-w-2xl mx-auto\">\r\n            <PlaceholdersAndVanishInput \r\n                placeholders={[\"Search for 'Urea 50kg'...\", \"Find 'Tractor Rentals'...\", \"Buy 'Organic Seeds'...\", \"Search 'Pesticide Sprayers'...\"]}\r\n                onChange={handleSearch}\r\n                onSubmit={(e) => e.preventDefault()}\r\n            />\r\n        </div>\r\n      </div>\r\n\r\n       {/* --- Categories --- */}\r\n       <div className=\"flex gap-3 overflow-x-auto pb-4 pt-2 no-scrollbar justify-center\">\r\n           {[\"All\", \"Seeds\", \"Fertilizers\", \"Tools\", \"Equipment\", \"Harvest\"].map((cat) => (\r\n               <button \r\n                key={cat}\r\n                onClick={() => handleCategoryChange(cat)}\r\n                className={cn(\r\n                    \"px-6 py-2.5 rounded-full text-sm font-bold whitespace-nowrap transition-all border\",\r\n                    selectedCategory === cat \r\n                        ? \"bg-green-600 text-white border-green-600 shadow-lg shadow-green-600/20\" \r\n                        : \"bg-white dark:bg-neutral-900 text-neutral-600 dark:text-neutral-400 border-neutral-200 dark:border-neutral-800 hover:bg-neutral-50\"\r\n                )}\r\n               >\r\n                   {cat}\r\n               </button>\r\n           ))}\r\n       </div>\r\n\r\n       {/* --- Product Grid --- */}\r\n       {loading ? (\r\n             <div className=\"flex flex-col items-center justify-center h-64 text-neutral-400\">\r\n                 <IconLoader className=\"animate-spin mb-4\" size={40} />\r\n                 <p>Loading market...</p>\r\n             </div>\r\n       ) : filteredProducts.length === 0 ? (\r\n             <div className=\"flex flex-col items-center justify-center h-64 text-center border-2 border-dashed border-neutral-200 rounded-3xl\">\r\n                 <div className=\"bg-neutral-100 p-4 rounded-full mb-4\">\r\n                     <IconBuildingStore size={40} className=\"text-neutral-400\" />\r\n                 </div>\r\n                 <h3 className=\"text-xl font-bold text-neutral-600\">No Products Listed Yet</h3>\r\n                 <p className=\"text-neutral-400 max-w-sm mt-2\">Be the first to list your produce and start selling directly to buyers!</p>\r\n             </div>\r\n       ) : (\r\n           <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n               {filteredProducts.map((product) => (\r\n                   <div key={product.id} className=\"group bg-white dark:bg-neutral-900 rounded-3xl border border-neutral-200 dark:border-neutral-800 overflow-hidden hover:shadow-2xl transition-all duration-500 flex flex-col cursor-pointer\" onClick={() => setSelectedProduct(product)}>\r\n                       <div className=\"relative h-56 w-full overflow-hidden\">\r\n                           <Image \r\n                                src={product.image} \r\n                                alt={product.name}\r\n                                fill\r\n                                className=\"object-cover group-hover:scale-110 transition-transform duration-700\"\r\n                           />\r\n                           {(isAdmin || (sellerProfile && product.sellerVpa === sellerProfile.upiId)) && (\r\n                                <button\r\n                                    onClick={(e) => handleDeleteProduct(e, product.id)}\r\n                                    className=\"absolute top-3 left-3 bg-red-500 text-white p-1.5 rounded-lg shadow-md hover:bg-red-600 z-10 transition-colors\"\r\n                                    title=\"Delete Product\"\r\n                                >\r\n                                    <IconTrash size={14} />\r\n                                </button>\r\n                           )}\r\n                           {product.verifiedSeller && (\r\n                               <div className=\"absolute top-3 right-3 bg-white/90 backdrop-blur-md px-2 py-1 rounded-lg text-[10px] font-bold text-blue-700 flex items-center gap-1 shadow-sm\">\r\n                                   <IconCheck size={12} stroke={4} /> VERIFIED\r\n                               </div>\r\n                           )}\r\n                           <div className=\"absolute bottom-3 left-3 bg-black/60 backdrop-blur-md px-3 py-1 rounded-full text-xs font-medium text-white\">\r\n                               {product.category}\r\n                           </div>\r\n                       </div>\r\n                       \r\n                       <div className=\"p-5 flex-1 flex flex-col\">\r\n                           <div className=\"flex justify-between items-start mb-2\">\r\n                                <h3 className=\"font-bold text-lg text-neutral-800 dark:text-white leading-tight group-hover:text-green-600 transition-colors\">{product.name}</h3>\r\n                                <div className=\"text-right\">\r\n                                     <span className=\"block text-xl font-black text-neutral-900 dark:text-white\">â‚¹{product.price}</span>\r\n                                     <span className=\"text-[10px] text-neutral-400 font-medium lowercase\">/{product.unit || 'unit'}</span>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <p className=\"text-xs text-neutral-500 mb-4 font-medium flex items-center gap-1\">\r\n                                <IconBuildingStore size={12} /> {product.seller}\r\n                            </p>\r\n                           \r\n                           <div className=\"mt-auto flex items-center gap-2\">\r\n                               <button \r\n                                    onClick={(e) => { e.stopPropagation(); addToCart(product); }}\r\n                                    className=\"h-10 w-10 flex items-center justify-center bg-neutral-100 dark:bg-neutral-800 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors\"\r\n                               >\r\n                                   <IconShoppingCart size={18} />\r\n                               </button>\r\n                               <button \r\n                                    onClick={(e) => handleBuyNow(e, product)}\r\n                                    className=\"flex-1 h-10 bg-green-600 text-white rounded-full font-bold text-sm hover:bg-green-700 transition-all flex items-center justify-center shadow-lg shadow-green-600/20\"\r\n                               >\r\n                                   Buy Now\r\n                               </button>\r\n                           </div>\r\n                       </div>\r\n                   </div>\r\n               ))}\r\n           </div>\r\n       )}\r\n\r\n       {/* --- Modals --- */}\r\n       <SellerVerifyModal \r\n            isOpen={isVerifyModalOpen} \r\n            onClose={() => setIsVerifyModalOpen(false)}\r\n            onVerified={handleVerified}\r\n            initialData={sellerProfile || undefined}\r\n       />\r\n       \r\n       <SellProductModal \r\n            isOpen={isSellModalOpen}\r\n            onClose={() => setIsSellModalOpen(false)}\r\n            onListProduct={handleListProduct}\r\n            sellerProfile={sellerProfile}\r\n       />\r\n\r\n       <ProductDetailsModal \r\n            product={selectedProduct}\r\n            onClose={() => setSelectedProduct(null)}\r\n            onAddToCart={addToCart}\r\n            onBuyNow={handleBuyNow}\r\n       />\r\n\r\n       <CartDrawer \r\n            isOpen={isCartOpen}\r\n            onClose={() => setIsCartOpen(false)}\r\n            cart={cart}\r\n            onRemove={removeFromCart}\r\n            onCheckout={() => {\r\n                setIsCartOpen(false);\r\n                setDirectBuyItem(null);\r\n                setIsCheckoutOpen(true);\r\n            }}\r\n       />\r\n       <CheckoutModal\r\n            isOpen={isCheckoutOpen}\r\n            onClose={handleCloseCheckout}\r\n            cart={cart}\r\n            onClearCart={() => setCart([])}\r\n            directBuyItem={directBuyItem}\r\n       />\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA,aAAa;AACb;AACA;AACA;AACA;AACA;;;AAZA;;;;;;;;;;;AAsCe,SAAS;;IACpB,qBAAqB;IACrB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qLAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qLAAQ,EAAC;IAEvC,0BAA0B;IAC1B,IAAA,sLAAS;mCAAC;YACN;QACJ;kCAAG,EAAE;IAEL,MAAM,gBAAgB;QAClB,WAAW;QACX,IAAI;YACA,MAAM,MAAM,MAAM,MAAM;YACxB,IAAG,IAAI,EAAE,EAAE;gBACP,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,YAAY;gBACZ,oBAAoB;YACxB;QACJ,EAAE,OAAO,GAAG;YACR,QAAQ,KAAK,CAAC,4BAA4B;QAC9C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qLAAQ,EAAa,EAAE;IAE/C,mBAAmB;IACnB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,qLAAQ,EAAC;IAC7C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,qLAAQ,EAAC;IACzD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,qLAAQ,EAAY,EAAE;IAEtE,eAAe;IACf,MAAM,eAAe,CAAC;QAClB,WAAW,EAAE,MAAM,CAAC,KAAK,EAAE;IAC/B;IACA,MAAM,uBAAuB,CAAC;QAC1B,oBAAoB;QACpB,WAAW,IAAI;IACnB;IACA,MAAM,aAAa,CAAC,QAAgB;QAChC,MAAM,cAAc,OAAO,WAAW;QACtC,oBAAoB,SAAS,MAAM,CAAC,CAAA,IAChC,CAAC,aAAa,SAAS,EAAE,QAAQ,KAAK,QAAQ,KAC9C,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,gBAAgB,EAAE,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY;IAEnG;IAEA,uBAAuB;IACvB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,qLAAQ,EAAC;IACzD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,qLAAQ,EAAC;IAC3D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,qLAAQ,EAAuB;IACzE,MAAM,aAAa;QAAC;QAAkB;KAAmB,EAAE,qBAAqB;IAChF,MAAM,UAAU,iBAAiB,WAAW,QAAQ,CAAC,cAAc,KAAK;IAExE,qBAAqB;IACrB,IAAA,sLAAS;mCAAC;YACN,MAAM,eAAe,aAAa,OAAO,CAAC,mBAAmB,cAAc;YAC3E,IAAI,cAAc;gBACd,IAAI;oBACA,MAAM,SAAS,KAAK,KAAK,CAAC;oBAC1B,iBAAiB;oBACjB,oBAAoB;gBACxB,EAAE,OAAO,GAAG;oBACR,QAAQ,KAAK,CAAC,kCAAkC;gBACpD;YACJ;QACJ;kCAAG,EAAE;IAEL,MAAM,iBAAiB,CAAC;QACpB,oBAAoB;QACpB,iBAAiB;QACjB,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC,QAAQ,cAAc;QAC5E,MAAM,cAAc,KAAK,IAAI,GAAG,iCAAiC,cAAc;IACnF;IAEA,MAAM,sBAAsB,OAAO,GAAqB;QACpD,EAAE,eAAe;QACjB,IAAI,CAAC,QAAQ,kDAAkD;QAE/D,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,CAAC,uBAAuB,EAAE,WAAW,EAAE;gBAC3D,QAAQ;YACZ;YAEA,IAAI,IAAI,EAAE,EAAE;gBACR,YAAY,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;gBAC9C,oBAAoB,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YAC1D,OAAO;gBACH,MAAM;YACV;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,MAAM;QACV;IACJ;IAGA,0BAA0B;IAC1B,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,qLAAQ,EAAC;IAEvD,MAAM,oBAAoB,CAAC;QACvB,uCAAuC;QACvC,sFAAsF;QACtF,oIAAoI;QACpI,2FAA2F;QAC3F,wCAAwC;QAExC,yDAAyD;QACzD,+DAA+D;QAC/D,mFAAmF;QAEnF,MAAM,qBAAqB;YACvB,GAAG,UAAU;YACb,QAAQ,gBAAgB,cAAc,IAAI,GAAG,WAAW,MAAM;YAC9D,WAAW,gBAAgB,cAAc,KAAK,GAAG;YACjD,aAAa,gBAAgB,cAAc,KAAK,GAAG;QACvD;QAEA,2EAA2E;QAC3E,0EAA0E;QAC1E,sEAAsE;QACtE,yFAAyF;QAEzF,kGAAkG;QAClG,uEAAuE;QACvE,kFAAkF;QAElF,iGAAiG;QACjG,uFAAuF;QACvF,0FAA0F;QAC1F,kDAAkD;QAClD,yDAAyD;QACzD,4DAA4D;QAC5D,mHAAmH;QACnH,yCAAyC;QAEzC,YAAY;YAAC;eAAuB;SAAS;QAC7C,oBAAoB;YAAC;eAAuB;SAAiB;QAC7D,mBAAmB;IACvB;IAEA,qCAAqC;IACrC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,qLAAQ,EAAiB;IAEvE,qBAAqB;IACrB,MAAM,YAAY,CAAC;QACf,QAAQ,CAAA;YACJ,MAAM,WAAW,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,QAAQ,EAAE;YACnD,IAAI,UAAU,OAAO,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,QAAQ,EAAE,GAAG;oBAAE,GAAG,CAAC;oBAAE,UAAU,EAAE,QAAQ,GAAG;gBAAE,IAAI;YAC9F,OAAO;mBAAI;gBAAM;oBAAE,GAAG,OAAO;oBAAE,UAAU;gBAAE;aAAE;QACjD;QACA,0CAA0C;QAC1C,MAAM;IACV;IAEA,MAAM,iBAAiB,CAAC;QACpB,QAAQ,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC9C;IAEA,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,qLAAQ,EAAC;IACrD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,qLAAQ,EAAkB;IAEpE,MAAM,eAAe,CAAC,GAAqB;QACvC,EAAE,eAAe;QACjB,iBAAiB;YAAE,GAAG,OAAO;YAAE,UAAU;QAAE;QAC3C,kBAAkB;IACtB;IAEA,gCAAgC;IAChC,MAAM,sBAAsB;QACxB,kBAAkB;QAClB,iBAAiB,OAAO,wBAAwB;IACpD;IAEF,qBACE,yMAAC;QAAI,WAAU;;0BAEb,yMAAC;gBAAI,WAAU;;kCACb,yMAAC;wBAAI,WAAU;;0CACV,yMAAC;;kDACE,yMAAC;wCAAG,WAAU;;4CAAsE;0DAAW,yMAAC;gDAAK,WAAU;0DAAiB;;;;;;;;;;;;kDAChI,yMAAC;wCAAE,WAAU;kDAAoC;;;;;;;;;;;;0CAEpD,yMAAC;gCAAI,WAAU;;oCAEV,iCACG,yMAAC;wCAAI,WAAU;;0DACZ,yMAAC;gDACE,SAAS,IAAM,mBAAmB;gDAClC,WAAU;;kEAEV,yMAAC,iPAAQ;wDAAC,QAAQ;wDAAG,MAAM;;;;;;oDAAM;;;;;;;0DAEpC,yMAAC;gDACE,SAAS,IAAM,qBAAqB;gDACpC,WAAU;gDACV,OAAM;0DAEN,cAAA,yMAAC,iPAAQ;oDAAC,MAAM;;;;;;;;;;;;;;;;6DAItB,yMAAC;wCACE,SAAS,IAAM,qBAAqB;wCACpC,WAAU;;0DAET,yMAAC,4QAAiB;gDAAC,MAAM;;;;;;4CAAM;;;;;;;kDAMvC,yMAAC;wCACE,SAAS,IAAM,cAAc;wCAC7B,WAAU;;0DAEV,yMAAC,yQAAgB;gDAAC,MAAM;gDAAI,WAAU;;;;;;4CACrC,KAAK,MAAM,GAAG,mBAAK,yMAAC;gDAAK,WAAU;0DAA0H,KAAK,MAAM;;;;;;;;;;;;;;;;;;;;;;;;kCAMrL,yMAAC;wBAAI,WAAU;kCACX,cAAA,yMAAC,wMAA0B;4BACvB,cAAc;gCAAC;gCAA6B;gCAA6B;gCAA0B;6BAAiC;4BACpI,UAAU;4BACV,UAAU,CAAC,IAAM,EAAE,cAAc;;;;;;;;;;;;;;;;;0BAM1C,yMAAC;gBAAI,WAAU;0BACV;oBAAC;oBAAO;oBAAS;oBAAe;oBAAS;oBAAa;iBAAU,CAAC,GAAG,CAAC,CAAC,oBACnE,yMAAC;wBAEA,SAAS,IAAM,qBAAqB;wBACpC,WAAW,IAAA,iIAAE,EACT,sFACA,qBAAqB,MACf,2EACA;kCAGN;uBATC;;;;;;;;;;YAeb,wBACK,yMAAC;gBAAI,WAAU;;kCACX,yMAAC,uPAAU;wBAAC,WAAU;wBAAoB,MAAM;;;;;;kCAChD,yMAAC;kCAAE;;;;;;;;;;;uBAET,iBAAiB,MAAM,KAAK,kBAC1B,yMAAC;gBAAI,WAAU;;kCACX,yMAAC;wBAAI,WAAU;kCACX,cAAA,yMAAC,4QAAiB;4BAAC,MAAM;4BAAI,WAAU;;;;;;;;;;;kCAE3C,yMAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,yMAAC;wBAAE,WAAU;kCAAiC;;;;;;;;;;;qCAGpD,yMAAC;gBAAI,WAAU;0BACV,iBAAiB,GAAG,CAAC,CAAC,wBACnB,yMAAC;wBAAqB,WAAU;wBAA6L,SAAS,IAAM,mBAAmB;;0CAC3P,yMAAC;gCAAI,WAAU;;kDACX,yMAAC,uJAAK;wCACD,KAAK,QAAQ,KAAK;wCAClB,KAAK,QAAQ,IAAI;wCACjB,IAAI;wCACJ,WAAU;;;;;;oCAEd,CAAC,WAAY,iBAAiB,QAAQ,SAAS,KAAK,cAAc,KAAK,AAAC,mBACpE,yMAAC;wCACG,SAAS,CAAC,IAAM,oBAAoB,GAAG,QAAQ,EAAE;wCACjD,WAAU;wCACV,OAAM;kDAEN,cAAA,yMAAC,oPAAS;4CAAC,MAAM;;;;;;;;;;;oCAGzB,QAAQ,cAAc,kBACnB,yMAAC;wCAAI,WAAU;;0DACX,yMAAC,oPAAS;gDAAC,MAAM;gDAAI,QAAQ;;;;;;4CAAK;;;;;;;kDAG1C,yMAAC;wCAAI,WAAU;kDACV,QAAQ,QAAQ;;;;;;;;;;;;0CAIzB,yMAAC;gCAAI,WAAU;;kDACX,yMAAC;wCAAI,WAAU;;0DACV,yMAAC;gDAAG,WAAU;0DAAiH,QAAQ,IAAI;;;;;;0DAC3I,yMAAC;gDAAI,WAAU;;kEACV,yMAAC;wDAAK,WAAU;;4DAA4D;4DAAE,QAAQ,KAAK;;;;;;;kEAC3F,yMAAC;wDAAK,WAAU;;4DAAqD;4DAAE,QAAQ,IAAI,IAAI;;;;;;;;;;;;;;;;;;;kDAIhG,yMAAC;wCAAE,WAAU;;0DACT,yMAAC,4QAAiB;gDAAC,MAAM;;;;;;4CAAM;4CAAE,QAAQ,MAAM;;;;;;;kDAGpD,yMAAC;wCAAI,WAAU;;0DACX,yMAAC;gDACI,SAAS,CAAC;oDAAQ,EAAE,eAAe;oDAAI,UAAU;gDAAU;gDAC3D,WAAU;0DAEX,cAAA,yMAAC,yQAAgB;oDAAC,MAAM;;;;;;;;;;;0DAE5B,yMAAC;gDACI,SAAS,CAAC,IAAM,aAAa,GAAG;gDAChC,WAAU;0DACd;;;;;;;;;;;;;;;;;;;uBAlDH,QAAQ,EAAE;;;;;;;;;;0BA6DhC,yMAAC,6KAAiB;gBACb,QAAQ;gBACR,SAAS,IAAM,qBAAqB;gBACpC,YAAY;gBACZ,aAAa,iBAAiB;;;;;;0BAGnC,yMAAC,2KAAgB;gBACZ,QAAQ;gBACR,SAAS,IAAM,mBAAmB;gBAClC,eAAe;gBACf,eAAe;;;;;;0BAGpB,yMAAC,iLAAmB;gBACf,SAAS;gBACT,SAAS,IAAM,mBAAmB;gBAClC,aAAa;gBACb,UAAU;;;;;;0BAGf,yMAAC,+JAAU;gBACN,QAAQ;gBACR,SAAS,IAAM,cAAc;gBAC7B,MAAM;gBACN,UAAU;gBACV,YAAY;oBACR,cAAc;oBACd,iBAAiB;oBACjB,kBAAkB;gBACtB;;;;;;0BAEL,yMAAC,qKAAa;gBACT,QAAQ;gBACR,SAAS;gBACT,MAAM;gBACN,aAAa,IAAM,QAAQ,EAAE;gBAC7B,eAAe;;;;;;;;;;;;AAK3B;GApXwB;KAAA"}}]
}