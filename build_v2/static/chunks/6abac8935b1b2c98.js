(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81395,e=>{"use strict";let t=(0,e.i(6802).default)("outline","check","Check",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);e.s(["IconCheck",()=>t],81395)},20646,(e,t,r)=>{"use strict";function a({widthInt:e,heightInt:t,blurWidth:r,blurHeight:a,blurDataURL:s,objectFit:l}){let i=r?40*r:e,n=a?40*a:t,d=i&&n?`viewBox='0 0 ${i} ${n}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${d}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${d?"none":"contain"===l?"xMidYMid":"cover"===l?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${s}'/%3E%3C/svg%3E`}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getImageBlurSvg",{enumerable:!0,get:function(){return a}})},60333,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={VALID_LOADERS:function(){return l},imageConfigDefault:function(){return i}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},34323,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getImgProps",{enumerable:!0,get:function(){return d}}),e.r(17348);let a=e.r(20646),s=e.r(60333),l=["-moz-initial","fill","none","scale-down",void 0];function i(e){return void 0!==e.default}function n(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function d({src:e,sizes:t,unoptimized:r=!1,priority:d=!1,preload:o=!1,loading:c,className:u,quality:m,width:g,height:h,fill:x=!1,style:f,overrideSrc:p,onLoad:b,onLoadingComplete:y,placeholder:v="empty",blurDataURL:j,fetchPriority:w,decoding:k="async",layout:N,objectFit:C,objectPosition:S,lazyBoundary:E,lazyRoot:_,...P},O){var z;let M,I,T,{imgConf:R,showAltText:$,blurComplete:D,defaultLoader:A}=O,F=R||s.imageConfigDefault;if("allSizes"in F)M=F;else{let e=[...F.deviceSizes,...F.imageSizes].sort((e,t)=>e-t),t=F.deviceSizes.sort((e,t)=>e-t),r=F.qualities?.sort((e,t)=>e-t);M={...F,allSizes:e,deviceSizes:t,qualities:r}}if(void 0===A)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let U=P.loader||A;delete P.loader,delete P.srcSet;let L="__next_img_default"in U;if(L){if("custom"===M.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=U;U=t=>{let{config:r,...a}=t;return e(a)}}if(N){"fill"===N&&(x=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[N];e&&(f={...f,...e});let r={responsive:"100vw",fill:"100vw"}[N];r&&!t&&(t=r)}let B="",q=n(g),J=n(h);if((z=e)&&"object"==typeof z&&(i(z)||void 0!==z.src)){let t=i(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(I=t.blurWidth,T=t.blurHeight,j=j||t.blurDataURL,B=t.src,!x)if(q||J){if(q&&!J){let e=q/t.width;J=Math.round(t.height*e)}else if(!q&&J){let e=J/t.height;q=Math.round(t.width*e)}}else q=t.width,J=t.height}let G=!d&&!o&&("lazy"===c||void 0===c);(!(e="string"==typeof e?e:B)||e.startsWith("data:")||e.startsWith("blob:"))&&(r=!0,G=!1),M.unoptimized&&(r=!0),L&&!M.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(r=!0);let W=n(m),X=Object.assign(x?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:C,objectPosition:S}:{},$?{}:{color:"transparent"},f),H=D||"empty"===v?null:"blur"===v?`url("data:image/svg+xml;charset=utf-8,${(0,a.getImageBlurSvg)({widthInt:q,heightInt:J,blurWidth:I,blurHeight:T,blurDataURL:j||"",objectFit:X.objectFit})}")`:`url("${v}")`,V=l.includes(X.objectFit)?"fill"===X.objectFit?"100% 100%":"cover":X.objectFit,K=H?{backgroundSize:V,backgroundPosition:X.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:H}:{},Q=function({config:e,src:t,unoptimized:r,width:a,quality:s,sizes:l,loader:i}){if(r)return{src:t,srcSet:void 0,sizes:void 0};let{widths:n,kind:d}=function({deviceSizes:e,allSizes:t},r,a){if(a){let r=/(^|\s)(1?\d?\d)vw/g,s=[];for(let e;e=r.exec(a);)s.push(parseInt(e[2]));if(s.length){let r=.01*Math.min(...s);return{widths:t.filter(t=>t>=e[0]*r),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof r?{widths:e,kind:"w"}:{widths:[...new Set([r,2*r].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,a,l),o=n.length-1;return{sizes:l||"w"!==d?l:"100vw",srcSet:n.map((r,a)=>`${i({config:e,src:t,quality:s,width:r})} ${"w"===d?r:a+1}${d}`).join(", "),src:i({config:e,src:t,quality:s,width:n[o]})}}({config:M,src:e,unoptimized:r,width:q,quality:W,sizes:t,loader:U}),Y=G?"lazy":c;return{props:{...P,loading:Y,fetchPriority:w,width:q,height:J,decoding:k,className:u,style:{...X,...K},sizes:Q.sizes,srcSet:Q.srcSet,src:p||Q.src},meta:{unoptimized:r,preload:o||d,placeholder:v,fill:x}}}},38891,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n}});let a=e.r(70147),s="undefined"==typeof window,l=s?()=>{}:a.useLayoutEffect,i=s?()=>{}:a.useEffect;function n(e){let{headManager:t,reduceComponentsToState:r}=e;function n(){if(t&&t.mountedInstances){let e=a.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(r(e))}}return s&&(t?.mountedInstances?.add(e.children),n()),l(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),l(()=>(t&&(t._pendingUpdate=n),()=>{t&&(t._pendingUpdate=n)})),i(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},94012,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return x},defaultHead:function(){return u}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=e.r(55683),i=e.r(64240),n=e.r(47152),d=i._(e.r(70147)),o=l._(e.r(38891)),c=e.r(7798);function u(){return[(0,n.jsx)("meta",{charSet:"utf-8"},"charset"),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function m(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===d.default.Fragment?e.concat(d.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(17348);let g=["name","httpEquiv","charSet","itemProp"];function h(e){let t,r,a,s;return e.reduce(m,[]).reverse().concat(u().reverse()).filter((t=new Set,r=new Set,a=new Set,s={},e=>{let l=!0,i=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){i=!0;let r=e.key.slice(e.key.indexOf("$")+1);t.has(r)?l=!1:t.add(r)}switch(e.type){case"title":case"base":r.has(e.type)?l=!1:r.add(e.type);break;case"meta":for(let t=0,r=g.length;t<r;t++){let r=g[t];if(e.props.hasOwnProperty(r))if("charSet"===r)a.has(r)?l=!1:a.add(r);else{let t=e.props[r],a=s[r]||new Set;("name"!==r||!i)&&a.has(t)?l=!1:(a.add(t),s[r]=a)}}}return l})).reverse().map((e,t)=>{let r=e.key||t;return d.default.cloneElement(e,{key:r})})}let x=function({children:e}){let t=(0,d.useContext)(c.HeadManagerContext);return(0,n.jsx)(o.default,{reduceComponentsToState:h,headManager:t,children:e})};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},32977,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ImageConfigContext",{enumerable:!0,get:function(){return l}});let a=e.r(55683)._(e.r(70147)),s=e.r(60333),l=a.default.createContext(s.imageConfigDefault)},80796,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RouterContext",{enumerable:!0,get:function(){return a}});let a=e.r(55683)._(e.r(70147)).default.createContext(null)},13769,(e,t,r)=>{"use strict";function a(e,t){let r=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e,0):r}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"findClosestQuality",{enumerable:!0,get:function(){return a}})},12667,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return l}});let a=e.r(13769);function s({config:e,src:t,width:r,quality:s}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let l=(0,a.findClosestQuality)(s,e);return`${e.path}?url=${encodeURIComponent(t)}&w=${r}&q=${l}${t.startsWith("/_next/static/media/"),""}`}s.__next_img_default=!0;let l=s},59330,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return v}});let a=e.r(55683),s=e.r(64240),l=e.r(47152),i=s._(e.r(70147)),n=a._(e.r(76602)),d=a._(e.r(94012)),o=e.r(34323),c=e.r(60333),u=e.r(32977);e.r(17348);let m=e.r(80796),g=a._(e.r(12667)),h=e.r(66687),x={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function f(e,t,r,a,s,l,i){let n=e?.src;e&&e["data-loaded-src"]!==n&&(e["data-loaded-src"]=n,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&s(!0),r?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let a=!1,s=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>a,isPropagationStopped:()=>s,persist:()=>{},preventDefault:()=>{a=!0,t.preventDefault()},stopPropagation:()=>{s=!0,t.stopPropagation()}})}a?.current&&a.current(e)}}))}function p(e){return i.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let b=(0,i.forwardRef)(({src:e,srcSet:t,sizes:r,height:a,width:s,decoding:n,className:d,style:o,fetchPriority:c,placeholder:u,loading:m,unoptimized:g,fill:x,onLoadRef:b,onLoadingCompleteRef:y,setBlurComplete:v,setShowAltText:j,sizesInput:w,onLoad:k,onError:N,...C},S)=>{let E=(0,i.useCallback)(e=>{e&&(N&&(e.src=e.src),e.complete&&f(e,u,b,y,v,g,w))},[e,u,b,y,v,N,g,w]),_=(0,h.useMergedRef)(S,E);return(0,l.jsx)("img",{...C,...p(c),loading:m,width:s,height:a,decoding:n,"data-nimg":x?"fill":"1",className:d,style:o,sizes:r,srcSet:t,src:e,ref:_,onLoad:e=>{f(e.currentTarget,u,b,y,v,g,w)},onError:e=>{j(!0),"empty"!==u&&v(!0),N&&N(e)}})});function y({isAppRouter:e,imgAttributes:t}){let r={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...p(t.fetchPriority)};return e&&n.default.preload?(n.default.preload(t.src,r),null):(0,l.jsx)(d.default,{children:(0,l.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...r},"__nimg-"+t.src+t.srcSet+t.sizes)})}let v=(0,i.forwardRef)((e,t)=>{let r=(0,i.useContext)(m.RouterContext),a=(0,i.useContext)(u.ImageConfigContext),s=(0,i.useMemo)(()=>{let e=x||a||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),r=e.deviceSizes.sort((e,t)=>e-t),s=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:r,qualities:s,localPatterns:"undefined"==typeof window?a?.localPatterns:e.localPatterns}},[a]),{onLoad:n,onLoadingComplete:d}=e,h=(0,i.useRef)(n);(0,i.useEffect)(()=>{h.current=n},[n]);let f=(0,i.useRef)(d);(0,i.useEffect)(()=>{f.current=d},[d]);let[p,v]=(0,i.useState)(!1),[j,w]=(0,i.useState)(!1),{props:k,meta:N}=(0,o.getImgProps)(e,{defaultLoader:g.default,imgConf:s,blurComplete:p,showAltText:j});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b,{...k,unoptimized:N.unoptimized,placeholder:N.placeholder,fill:N.fill,onLoadRef:h,onLoadingCompleteRef:f,setBlurComplete:v,setShowAltText:w,sizesInput:e.sizes,ref:t}),N.preload?(0,l.jsx)(y,{isAppRouter:!r,imgAttributes:k}):null]})});("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},41781,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return c},getImageProps:function(){return o}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=e.r(55683),i=e.r(34323),n=e.r(59330),d=l._(e.r(12667));function o(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:d.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let c=n.Image},53047,(e,t,r)=>{t.exports=e.r(41781)},88985,e=>{"use strict";let t=(0,e.i(6802).default)("outline","edit","Edit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);e.s(["IconEdit",()=>t],88985)},77941,e=>{"use strict";let t=(0,e.i(6802).default)("outline","trash","Trash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);e.s(["IconTrash",()=>t],77941)},68871,e=>{"use strict";var t=e.i(47152),r=e.i(70147),a=e.i(3308),s=e.i(6802);let l=(0,s.default)("outline","heart","Heart",[["path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572",key:"svg-0"}]]),i=(0,s.default)("outline","message-circle","MessageCircle",[["path",{d:"M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1",key:"svg-0"}]]);var n=e.i(36206);let d=(0,s.default)("outline","message","Message",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]]),o=(0,s.default)("outline","send","Send",[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]]),c=(0,s.default)("outline","photo","Photo",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]);var u=e.i(78628),m=e.i(88985),g=e.i(77941);let h=(0,s.default)("outline","arrow-back-up","ArrowBackUp",[["path",{d:"M9 14l-4 -4l4 -4",key:"svg-0"}],["path",{d:"M5 10h11a4 4 0 1 1 0 8h-1",key:"svg-1"}]]);var x=e.i(81395),f=e.i(53047),p=e.i(53607),b=e.i(14753);function y(){let{user:e}=(0,a.useAuth)(),[s,l]=(0,r.useState)("feed"),[d,c]=(0,r.useState)(!1),[m,x]=(0,r.useState)([]),[f,y]=(0,r.useState)(!0),[N,C]=(0,r.useState)(null),[S,E]=(0,r.useState)([]),[_,P]=(0,r.useState)("all"),[O,z]=(0,r.useState)([]),[M,I]=(0,r.useState)(null),[T,R]=(0,r.useState)(""),[$,D]=(0,r.useState)(null),[A,F]=(0,r.useState)(null),U=(0,r.useRef)(null),L=(0,r.useRef)(null);(0,r.useEffect)(()=>{c(!0)},[]),(0,r.useEffect)(()=>{if(d)return q(),J(),U.current=setInterval(()=>{e&&"messages"===s&&G()},3e3),()=>{U.current&&clearInterval(U.current)}},[e,s,d]),(0,r.useEffect)(()=>{"messages"===s&&d&&B()},[O.length,M,s,d]);let B=()=>L.current?.scrollIntoView({behavior:"smooth"}),q=async()=>{y(!0);try{let e=await fetch("/api/community/posts");x(await e.json())}catch(e){}finally{y(!1)}},J=async()=>{try{let e=await fetch("/api/users");E(await e.json())}catch(e){}},G=async()=>{if(e)try{let t=await fetch(`/api/messages?email=${e.email}`);z(await t.json())}catch(e){}},W=async t=>{e&&(E(r=>r.map(r=>{if(r.email===t){let t=r.followers.includes(e.email);return{...r,followers:t?r.followers.filter(t=>t!==e.email):[...r.followers,e.email]}}if(r.email===e.email){let e=r.following.includes(t);return{...r,following:e?r.following.filter(e=>e!==t):[...r.following,t]}}return r})),await fetch("/api/users/follow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e.email,targetEmail:t})}))},X=async(t,r)=>{e&&(await fetch("/api/community/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e.email,userName:e.name||"Farmer",userRole:"farmer",content:t,image:r})}),q())},H=async t=>{e&&(x(r=>r.map(r=>r.id===t?{...r,likes:r.likes.includes(e.email)?r.likes.filter(t=>t!==e.email):[...r.likes,e.email]}:r)),await fetch("/api/community/posts/like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:t,userEmail:e.email})}))},V=async t=>{e&&confirm("Delete this post?")&&(x(e=>e.filter(e=>e.id!==t)),await fetch(`/api/community/posts?id=${t}&userEmail=${e.email}`,{method:"DELETE"}))},K=async(t,r)=>{if(!e)return;let a={id:Date.now().toString(),userEmail:e.email,userName:e.name||"User",text:r,date:new Date().toISOString()};x(e=>e.map(e=>e.id===t?{...e,comments:[...e.comments,a]}:e)),await fetch("/api/community/posts/comment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:t,userEmail:e.email,userName:e.name,text:r})})},Q=async(t,r)=>{e&&confirm("Delete this comment?")&&(x(e=>e.map(e=>e.id===t?{...e,comments:e.comments.filter(e=>e.id!==r)}:e)),await fetch(`/api/community/posts/comment?postId=${t}&commentId=${r}&userEmail=${e.email}`,{method:"DELETE"}))},Y=async(t,r)=>{e&&(x(e=>e.map(e=>e.id===t?{...e,content:r}:e)),C(null),await fetch("/api/community/posts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:t,content:r,userEmail:e.email})}))},Z=async()=>{if(!e||!M||!T.trim())return;let t={id:Date.now().toString(),sender:e.email,receiver:M,content:T,timestamp:new Date().toISOString(),replyToId:$?.id};z(e=>[...e,t]),R(""),D(null),B(),await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:e.email,receiver:M,content:t.content,replyToId:t.replyToId})}),G()},ee=async(t,r)=>{e&&(z(e=>e.map(e=>e.id===t?{...e,reaction:e.reaction===r?void 0:r}:e)),await fetch(`/api/messages/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e.email,reaction:r})}))},et=async t=>{e&&confirm("Delete this message?")&&(z(e=>e.filter(e=>e.id!==t)),await fetch(`/api/messages/${t}?userEmail=${e.email}`,{method:"DELETE"}))},er=async(t,r)=>{e&&(z(e=>e.map(e=>e.id===t?{...e,content:r,edited:!0}:e)),F(null),await fetch(`/api/messages/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e.email,content:r})}))},ea=async()=>{confirm("Are you sure you want to delete this entire conversation?")&&z(t=>t.filter(t=>(t.sender!==e?.email||t.receiver!==M)&&(t.sender!==M||t.receiver!==e?.email)))},es=S.filter(t=>t.email!==e?.email&&("following"===_?t.followers.includes(e?.email||""):"followers"!==_||t.following.includes(e?.email||"")));return d?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-900 text-neutral-900 dark:text-gray-100 font-sans transition-colors duration-300",children:[(0,t.jsxs)("header",{className:"sticky top-0 z-40 bg-white dark:bg-neutral-900 border-b border-gray-200 dark:border-neutral-800 shadow-sm transition-colors duration-300",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-600 flex items-center justify-center",children:(0,t.jsx)(n.IconUsers,{className:"text-white w-5 h-5"})}),(0,t.jsx)("span",{className:"font-bold text-xl tracking-tight text-neutral-900 dark:text-white",children:"AgroNova Community"})]}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)("nav",{className:"hidden md:flex space-x-1 bg-gray-100 dark:bg-neutral-800 p-1 rounded-lg",children:["feed","network","messages"].map(e=>(0,t.jsx)("button",{onClick:()=>l(e),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${s===e?"bg-white dark:bg-neutral-700 text-green-600 shadow-sm":"text-gray-500 hover:text-gray-900 dark:hover:text-gray-200"}`,children:(0,t.jsx)("span",{className:"capitalize",children:e})},e))})})]}),(0,t.jsx)("div",{className:"md:hidden flex justify-center pb-2 px-2",children:(0,t.jsx)("nav",{className:"flex space-x-1 bg-gray-100 dark:bg-neutral-800 p-1 rounded-lg w-full justify-between",children:["feed","network","messages"].map(e=>(0,t.jsx)("button",{onClick:()=>l(e),className:`flex-1 py-1.5 rounded-md text-xs font-medium transition-all ${s===e?"bg-white dark:bg-neutral-700 text-green-600 shadow-sm":"text-gray-500"}`,children:(0,t.jsx)("span",{className:"capitalize",children:e})},e))})})]}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto p-4 md:p-6 lg:p-8",children:(0,t.jsx)(b.AnimatePresence,{mode:"wait",children:(0,t.jsxs)(p.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:["feed"===s&&(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,t.jsx)(v,{user:e,refresh:q,onPost:X}),(0,t.jsx)("div",{className:"space-y-4",children:f?(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-40 bg-gray-200 dark:bg-neutral-800 rounded-xl animate-pulse"},e))}):0===m.length?(0,t.jsx)("div",{className:"text-center py-20 text-gray-500",children:"No posts yet. Be the first to share!"}):m.map(r=>(0,t.jsx)(j,{post:r,user:e,onLike:()=>H(r.id),onDelete:()=>V(r.id),onComment:K,onDeleteComment:Q,onEdit:Y,isEditing:N===r.id,setEditingPostId:C},r.id))})]}),"network"===s&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-center gap-2 mb-6",children:["all","following","followers"].map(e=>(0,t.jsx)("button",{onClick:()=>P(e),className:`px-4 py-1.5 rounded-full text-sm font-semibold capitalize transition-colors ${_===e?"bg-green-600 text-white":"bg-white dark:bg-neutral-800 text-gray-500 border border-gray-200 dark:border-neutral-700"}`,children:e},e))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[es.map(r=>(0,t.jsx)(w,{user:r,currentUser:e,onFollow:()=>W(r.email),onChat:()=>{I(r.email),l("messages"),G()}},r.email)),0===es.length&&(0,t.jsx)("div",{className:"col-span-full text-center py-20 text-gray-500",children:"No users found in this list."})]})]}),"messages"===s&&(0,t.jsxs)("div",{className:"h-[calc(100vh-140px)] bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-2xl overflow-hidden flex shadow-sm",children:[(0,t.jsxs)("div",{className:`w-full md:w-80 border-r border-gray-200 dark:border-neutral-800 flex flex-col bg-gray-50 dark:bg-neutral-900 ${M?"hidden md:flex":"flex"}`,children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-neutral-800",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Messages"})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:S.filter(t=>t.email!==e?.email).map(e=>(0,t.jsxs)("button",{onClick:()=>I(e.email),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${M===e.email?"bg-green-100 dark:bg-neutral-800 text-green-900 dark:text-white":"hover:bg-gray-100 dark:hover:bg-neutral-800"}`,children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center text-sm font-bold text-gray-600 dark:text-gray-300",children:e.name[0]}),(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500 capitalize",children:e.role})]})]},e.email))})]}),(0,t.jsx)("div",{className:`flex-1 flex flex-col bg-white dark:bg-neutral-900 ${!M?"hidden md:flex":"flex"}`,children:M?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"h-16 px-6 border-b border-gray-200 dark:border-neutral-800 flex items-center justify-between bg-white dark:bg-neutral-900",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>I(null),className:"md:hidden p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-full",children:(0,t.jsx)(h,{size:20})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:S.find(e=>e.email===M)?.name||M}),(0,t.jsx)("span",{className:"text-xs text-green-600 flex items-center gap-1",children:"Online"})]})]}),(0,t.jsx)("button",{onClick:ea,className:"p-2 text-gray-400 hover:text-red-500 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800",title:"Delete Chat",children:(0,t.jsx)(g.IconTrash,{size:20})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[O.filter(t=>t.sender===e?.email&&t.receiver===M||t.sender===M&&t.receiver===e?.email).map(r=>(0,t.jsx)(k,{message:r,isMe:r.sender===e?.email,replyContent:r.replyToId?O.find(e=>e.id===r.replyToId)?.content:void 0,onReply:()=>D(r),onReact:e=>ee(r.id,e),onDelete:()=>et(r.id),onEdit:e=>er(r.id,e),isEditing:A===r.id,setEditingMsgId:F},r.id)),(0,t.jsx)("div",{ref:L})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-neutral-800 bg-gray-50 dark:bg-neutral-900",children:[$&&(0,t.jsxs)("div",{className:"mb-2 p-2 bg-gray-200 dark:bg-neutral-800 border-l-2 border-green-500 rounded text-sm flex justify-between items-center text-gray-600 dark:text-gray-300",children:[(0,t.jsxs)("span",{className:"truncate",children:["Replying to: ",$.content.substring(0,50),"..."]}),(0,t.jsx)("button",{onClick:()=>D(null),children:(0,t.jsx)(u.IconX,{size:14})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:T,onChange:e=>R(e.target.value),onKeyDown:e=>"Enter"===e.key&&Z(),placeholder:"Type your message...",className:"flex-1 bg-white dark:bg-neutral-800 border border-gray-300 dark:border-neutral-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 dark:text-white"}),(0,t.jsx)("button",{onClick:Z,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-transform active:scale-95 disabled:opacity-50",disabled:!T.trim(),children:(0,t.jsx)(o,{size:20})})]})]})]}):(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 gap-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-neutral-800 rounded-full flex items-center justify-center",children:(0,t.jsx)(i,{size:32})}),(0,t.jsx)("p",{children:"Select a user to chat"})]})})]})]},s)})})]}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-900"})}let v=({user:e,refresh:a,onPost:s})=>{let[l,i]=(0,r.useState)("");return(0,t.jsx)("div",{className:"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-4 shadow-sm",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-neutral-800 flex items-center justify-center text-green-700 dark:text-green-400 font-bold",children:e?.name?.[0]||"U"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("textarea",{value:l,onChange:e=>i(e.target.value),placeholder:"What's happening?",className:"w-full bg-transparent border-none focus:ring-0 resize-none outline-none text-base placeholder-gray-400 dark:placeholder-neutral-600 min-h-[80px] text-gray-900 dark:text-white"}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100 dark:border-neutral-800 mt-2",children:[(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-full text-green-600",children:(0,t.jsx)(c,{size:18})})}),(0,t.jsx)("button",{onClick:()=>{s(l),i("")},disabled:!l.trim(),className:"px-4 py-1.5 bg-green-600 text-white text-sm font-semibold rounded-full hover:bg-green-700 disabled:opacity-50",children:"Post"})]})]})]})})};function j({post:e,user:a,onLike:s,onDelete:i,onComment:n,onDeleteComment:c,onEdit:u,isEditing:h,setEditingPostId:x}){let[y,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)(""),[k,N]=(0,r.useState)(e.content);return(0,t.jsx)("div",{className:"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:(0,t.jsxs)("div",{className:"p-4 md:p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center font-bold text-gray-600 dark:text-gray-300",children:e.userName?.[0]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.userName}),"expert"===e.userRole&&(0,t.jsx)("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 text-[10px] rounded uppercase font-bold",children:"Expert"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()})]})]}),a?.email===e.userEmail&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>{x(e.id),N(e.content)},className:"p-1.5 text-gray-400 hover:text-green-600 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800",children:(0,t.jsx)(m.IconEdit,{size:16})}),(0,t.jsx)("button",{onClick:i,className:"p-1.5 text-gray-400 hover:text-red-500 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800",children:(0,t.jsx)(g.IconTrash,{size:16})})]})]}),h?(0,t.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,t.jsx)("textarea",{value:k,onChange:e=>N(e.target.value),className:"w-full bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-lg p-3 text-gray-900 dark:text-white",rows:3}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>x(null),className:"px-3 py-1 text-sm text-gray-500 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>u(e.id,k),className:"px-3 py-1 text-sm bg-green-600 text-white rounded-lg",children:"Save"})]})]}):(0,t.jsx)("p",{className:"text-gray-800 dark:text-gray-200 mb-4 whitespace-pre-wrap leading-relaxed text-base",children:e.content}),e.image&&(0,t.jsx)("div",{className:"mb-4 rounded-lg overflow-hidden border border-gray-100 dark:border-neutral-800 relative h-64 w-full",children:(0,t.jsx)(f.default,{src:e.image,alt:"Post",fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex items-center gap-6 pt-3 border-t border-gray-100 dark:border-neutral-800",children:[(0,t.jsxs)("button",{onClick:s,className:`flex items-center gap-2 text-sm font-medium transition-colors ${e.likes.includes(a?.email||"")?"text-pink-500":"text-gray-500 hover:text-pink-500"}`,children:[(0,t.jsx)(l,{size:18,className:e.likes.includes(a?.email||"")?"fill-current":""})," ",(0,t.jsx)("span",{children:e.likes.length})]}),(0,t.jsxs)("button",{onClick:()=>v(!y),className:`flex items-center gap-2 text-sm font-medium transition-colors ${y?"text-green-600":"text-gray-500 hover:text-gray-900 dark:hover:text-white"}`,children:[(0,t.jsx)(d,{size:18})," ",(0,t.jsx)("span",{children:e.comments?.length||0})]})]}),(0,t.jsx)(b.AnimatePresence,{children:y&&(0,t.jsx)(p.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:(0,t.jsxs)("div",{className:"mt-4 space-y-3 pt-3 bg-gray-50 dark:bg-neutral-900/50 -mx-6 px-6 pb-4 border-t border-gray-100 dark:border-neutral-800",children:[e.comments?.map(r=>(0,t.jsxs)("div",{className:"flex gap-2.5",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center text-[10px] font-bold text-gray-600 dark:text-gray-300 shrink-0",children:r.userName[0]}),(0,t.jsxs)("div",{className:"flex-1 bg-white dark:bg-neutral-800 rounded-xl rounded-tl-none px-3 py-2 shadow-sm border border-gray-100 dark:border-neutral-700",children:[(0,t.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,t.jsx)("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:r.userName}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[10px] text-gray-400",children:new Date(r.date).toLocaleDateString()}),a?.email===r.userEmail&&(0,t.jsx)("button",{onClick:()=>c(e.id,r.id),className:"text-[10px] text-red-500 hover:text-red-700",children:(0,t.jsx)(g.IconTrash,{size:12})})]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-0.5",children:r.text})]})]},r.id)),(0,t.jsxs)("div",{className:"flex gap-2 mt-3 items-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-neutral-800 flex items-center justify-center text-xs font-bold text-green-700 dark:text-green-400 shrink-0",children:a?.name?.[0]||"U"}),(0,t.jsxs)("div",{className:"flex-1 flex gap-2 relative",children:[(0,t.jsx)("input",{value:j,onChange:e=>w(e.target.value),onKeyDown:t=>{"Enter"===t.key&&j.trim()&&(n(e.id,j),w(""))},placeholder:"Write a comment...",className:"w-full bg-gray-100 dark:bg-neutral-800 border-none rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-green-500 text-gray-900 dark:text-white"}),(0,t.jsx)("button",{onClick:()=>{j.trim()&&(n(e.id,j),w(""))},disabled:!j.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 text-green-600 hover:text-green-700 disabled:opacity-50 p-1",children:(0,t.jsx)(o,{size:16})})]})]})]})})})]})})}function w({user:e,onFollow:r,currentUser:a,onChat:s}){let l=e.followers.includes(a?.email||"");return(0,t.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-6 flex flex-col items-center gap-4 hover:shadow-lg transition-shadow",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center text-xl font-bold text-gray-600 dark:text-gray-300",children:e.name[0]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-widest mt-1",children:e.role})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{className:"text-gray-900 dark:text-white",children:e.followers.length})," Followers"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{className:"text-gray-900 dark:text-white",children:e.following.length})," Following"]})]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full mt-2",children:[(0,t.jsx)("button",{onClick:r,className:`flex-1 py-1.5 rounded-lg text-sm font-medium transition-all ${l?"bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white hover:bg-gray-200":"bg-green-600 text-white hover:bg-green-700"}`,children:l?"Following":"Follow"}),(0,t.jsx)("button",{onClick:s,className:"p-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-600 dark:text-gray-300 hover:text-green-600 transition-colors",children:(0,t.jsx)(d,{size:18})})]})]})}function k({message:e,isMe:a,onReply:s,replyContent:l,onReact:i,onDelete:n,onEdit:d,isEditing:o,setEditingMsgId:c}){let[f,p]=(0,r.useState)(e.content);return(0,t.jsxs)("div",{className:`flex flex-col ${a?"items-end":"items-start"} relative group`,children:[l&&(0,t.jsxs)("div",{className:`text-xs text-gray-400 mb-1 px-2 border-l-2 ${a?"border-green-500/50 text-right pr-2":"border-gray-300 pl-2"}`,children:["Replying to: ",l.substring(0,30),"..."]}),(0,t.jsxs)("div",{className:"max-w-[80%] relative group/bubble w-full md:w-auto",children:[!o&&(0,t.jsxs)("div",{className:`absolute -top-8 ${a?"right-0":"left-0"} hidden group-hover/bubble:flex items-center gap-1 bg-white dark:bg-neutral-800 shadow-md border border-gray-200 dark:border-neutral-700 rounded-full px-2 py-1 z-10`,children:[(0,t.jsx)("button",{onClick:s,className:"p-1 text-gray-500 hover:text-green-600",title:"Reply",children:(0,t.jsx)(h,{size:14})}),(0,t.jsx)("div",{className:"flex items-center border-l border-r border-gray-200 dark:border-neutral-700 mx-1 px-1 gap-1",children:["ðŸ‘","â¤ï¸","ðŸ˜‚"].map(e=>(0,t.jsx)("button",{onClick:()=>i(e),className:"hover:scale-125 transition-transform",children:e},e))}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{c(e.id),p(e.content)},className:"p-1 text-gray-500 hover:text-blue-500",title:"Edit",children:(0,t.jsx)(m.IconEdit,{size:14})}),(0,t.jsx)("button",{onClick:n,className:"p-1 text-gray-500 hover:text-red-500",title:"Delete",children:(0,t.jsx)(g.IconTrash,{size:14})})]})]}),o?(0,t.jsxs)("div",{className:"flex gap-2 items-center bg-white dark:bg-neutral-800 p-2 rounded-xl border border-gray-200 dark:border-neutral-700 shadow-sm",children:[(0,t.jsx)("input",{value:f,onChange:e=>p(e.target.value),className:"bg-transparent border-none focus:outline-none text-sm w-full min-w-[200px]",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&d(f)}}),(0,t.jsx)("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-red-500",children:(0,t.jsx)(u.IconX,{size:14})}),(0,t.jsx)("button",{onClick:()=>d(f),className:"text-green-600 hover:text-green-700",children:(0,t.jsx)(x.IconCheck,{size:14})})]}):(0,t.jsxs)("div",{className:`px-4 py-2 rounded-2xl text-sm leading-relaxed shadow-sm border relative ${a?"bg-green-600 text-white border-green-600 rounded-br-none":"bg-white dark:bg-neutral-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-neutral-700 rounded-bl-none"}`,children:[e.content,(0,t.jsxs)("div",{className:`text-[10px] mt-1 text-right flex items-center justify-end gap-1 ${a?"text-green-100":"text-gray-400"}`,children:[e.edited&&(0,t.jsx)("span",{children:"(edited)"}),new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.reaction&&(0,t.jsx)("div",{className:`absolute -bottom-2 ${a?"left-0":"right-0"} bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-full w-5 h-5 flex items-center justify-center text-xs shadow-sm`,children:e.reaction})]})]})]})}e.s(["default",()=>y],68871)}]);